var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var i;for(i=0;i<e.length&&(!e[i]||!t(e[i],i,e));i+=1);}}function eachReverse(e,t){if(e){var i;for(i=e.length-1;i>-1&&(!e[i]||!t(e[i],i,e));i-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var i;for(i in e)if(hasProp(e,i)&&t(e[i],i))break}function mixin(e,t,i,r){return t&&eachProp(t,function(t,n){!i&&hasProp(e,n)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[n]=t:(e[n]||(e[n]={}),mixin(e[n],t,i,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,i,r){var n=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return n.requireType=e,n.requireModules=r,i&&(n.originalError=i),n}function newContext(e){function t(e){var t,i;for(t=0;t<e.length;t++)if(i=e[t],"."===i)e.splice(t,1),t-=1;else if(".."===i){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function i(e,i,r){var n,o,a,s,u,c,d,p,f,l,h,m,g=i&&i.split("/"),v=y.map,x=v&&v["*"];if(e&&(e=e.split("/"),d=e.length-1,y.nodeIdCompat&&jsSuffixRegExp.test(e[d])&&(e[d]=e[d].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(m=g.slice(0,g.length-1),e=m.concat(e)),t(e),e=e.join("/")),r&&v&&(g||x)){a=e.split("/");e:for(s=a.length;s>0;s-=1){if(c=a.slice(0,s).join("/"),g)for(u=g.length;u>0;u-=1)if(o=getOwn(v,g.slice(0,u).join("/")),o&&(o=getOwn(o,c))){p=o,f=s;break e}!l&&x&&getOwn(x,c)&&(l=getOwn(x,c),h=s)}!p&&l&&(p=l,f=h),p&&(a.splice(0,f,p),e=a.join("/"))}return n=getOwn(y.pkgs,e),n?n:e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===q.contextName)return t.parentNode.removeChild(t),!0})}function n(e){var t=getOwn(y.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),q.require.undef(e),q.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,i=e?e.indexOf("!"):-1;return i>-1&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function a(e,t,r,n){var a,s,u,c,d=null,p=t?t.name:null,f=e,l=!0,h="";return e||(l=!1,e="_@r"+(A+=1)),c=o(e),d=c[0],e=c[1],d&&(d=i(d,p,n),s=getOwn(j,d)),e&&(d?h=s&&s.normalize?s.normalize(e,function(e){return i(e,p,n)}):e.indexOf("!")===-1?i(e,p,n):e:(h=i(e,p,n),c=o(h),d=c[0],h=c[1],r=!0,a=q.nameToUrl(h))),u=!d||s||r?"":"_unnormalized"+(T+=1),{prefix:d,name:h,parentMap:t,unnormalized:!!u,url:a,originalName:f,isDefine:l,id:(d?d+"!"+h:h)+u}}function s(e){var t=e.id,i=getOwn(S,t);return i||(i=S[t]=new q.Module(e)),i}function u(e,t,i){var r=e.id,n=getOwn(S,r);!hasProp(j,r)||n&&!n.defineEmitComplete?(n=s(e),n.error&&"error"===t?i(n.error):n.on(t,i)):"defined"===t&&i(j[r])}function c(e,t){var i=e.requireModules,r=!1;t?t(e):(each(i,function(t){var i=getOwn(S,t);i&&(i.error=e,i.events.error&&(r=!0,i.emit("error",e)))}),r||req.onError(e))}function d(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(q.defQueueMap[t]=!0),O.push(e)}),globalDefQueue=[])}function p(e){delete S[e],delete k[e]}function f(e,t,i){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,n){var o=r.id,a=getOwn(S,o);!a||e.depMatched[n]||i[o]||(getOwn(t,o)?(e.defineDep(n,j[o]),e.check()):f(a,t,i))}),i[r]=!0)}function l(){var e,t,i=1e3*y.waitSeconds,o=i&&q.startTime+i<(new Date).getTime(),a=[],s=[],u=!1,d=!0;if(!x){if(x=!0,eachProp(k,function(e){var i=e.map,c=i.id;if(e.enabled&&(i.isDefine||s.push(e),!e.error))if(!e.inited&&o)n(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&i.isDefine&&(u=!0,!i.prefix))return d=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=q.contextName,c(e);d&&each(s,function(e){f(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||w||(w=setTimeout(function(){w=0,l()},50)),x=!1}}function h(e){hasProp(j,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function m(e,t,i,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(i,t,!1)}function g(e){var t=e.currentTarget||e.srcElement;return m(t,q.onScriptLoad,"load","onreadystatechange"),m(t,q.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(d();O.length;){if(e=O.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}q.defQueueMap={}}var x,b,q,E,w,y={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},S={},k={},M={},O=[],j={},P={},R={},A=1,T=1;return E={require:function(e){return e.require?e.require:e.require=q.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(y.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(M,e.id)||{},this.map=e,this.shim=getOwn(y.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,i,r){r=r||{},this.inited||(this.factory=t,i?this.on("error",i):this.events.error&&(i=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=i,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,q.startTime=(new Date).getTime();var e=this.map;return this.shim?void q.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,q.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id,r=this.depExports,n=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{n=q.execCb(i,o,r,n)}catch(t){e=t}else n=q.execCb(i,o,r,n);if(this.map.isDefine&&void 0===n&&(t=this.module,t?n=t.exports:this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else n=o;if(this.exports=n,this.map.isDefine&&!this.ignore&&(j[i]=n,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(q,this.map,a)}p(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(q.defQueueMap,i)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var n,o,d,f=getOwn(R,this.map.id),l=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,m=q.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(l=r.normalize(l,function(e){return i(e,h,!0)})||""),o=a(e.prefix+"!"+l,this.map.parentMap),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),d=getOwn(S,o.id),void(d&&(this.depMaps.push(o),this.events.error&&d.on("error",bind(this,function(e){this.emit("error",e)})),d.enable()))):f?(this.map.url=q.nameToUrl(f),void this.load()):(n=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),n.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(S,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&p(e.map.id)}),c(e)}),n.fromText=bind(this,function(i,r){var o=e.name,u=a(o),d=useInteractive;r&&(i=r),d&&(useInteractive=!1),s(u),hasProp(y.config,t)&&(y.config[o]=y.config[t]);try{req.exec(i)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}d&&(useInteractive=!0),this.depMaps.push(u),q.completeLoad(o),m([o],n)}),void r.load(e.name,m,n,y))})),q.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var i,r,n;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,n=getOwn(E,e.id))return void(this.depExports[t]=n(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}i=e.id,r=S[i],hasProp(E,i)||!r||r.enabled||q.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(S,e.id);t&&!t.enabled&&q.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var i=this.events[e];i||(i=this.events[e]=[]),i.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},q={config:y,contextName:e,registry:S,defined:j,urlFetched:P,defQueue:O,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,i){return(i.indexOf("?")===-1?"?":"&")+t}}var i=y.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(y[t]||(y[t]={}),mixin(y[t],e,!0,!0)):y[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(R[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=q.makeShimExports(e)),i[t]=e}),y.shim=i),e.packages&&each(e.packages,function(e){var t,i;e="string"==typeof e?{name:e}:e,i=e.name,t=e.location,t&&(y.paths[i]=e.location),y.pkgs[i]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(S,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&q.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,n){function o(i,r,u){var d,p,f;return n.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof i?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(E,i)?E[i](S[t.id]):req.get?req.get(q,i,t,o):(p=a(i,t,!1,!0),d=p.id,hasProp(j,d)?j[d]:c(makeError("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),q.nextTick(function(){v(),f=s(a(null,t)),f.skipMap=n.skipMap,f.init(i,r,u,{enabled:!0}),l()}),o)}return n=n||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,n=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return n!==-1&&(!a||n>1)&&(r=e.substring(n,e.length),e=e.substring(0,n)),q.nameToUrl(i(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(j,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(j,e)||hasProp(S,e)}}),t||(o.undef=function(e){d();var i=a(e,t,!0),n=getOwn(S,e);n.undefed=!0,r(e),delete j[e],delete P[i.url],delete M[e],eachReverse(O,function(t,i){t[0]===e&&O.splice(i,1)}),delete q.defQueueMap[e],n&&(n.events.defined&&(M[e]=n.events),p(e))}),o},enable:function(e){var t=getOwn(S,e.id);t&&s(e).enable()},completeLoad:function(e){var t,i,r,o=getOwn(y.shim,e)||{},a=o.exports;for(d();O.length;){if(i=O.shift(),null===i[0]){if(i[0]=e,t)break;t=!0}else i[0]===e&&(t=!0);h(i)}if(q.defQueueMap={},r=getOwn(S,e),!t&&!hasProp(j,e)&&r&&!r.inited){if(!(!y.enforceDefine||a&&getGlobal(a)))return n(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}l()},nameToUrl:function(e,t,i){var r,n,o,a,s,u,c,d=getOwn(y.pkgs,e);if(d&&(e=d),c=getOwn(R,e))return q.nameToUrl(c,t,i);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=y.paths,n=e.split("/"),o=n.length;o>0;o-=1)if(a=n.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),n.splice(0,o,u);break}s=n.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||i?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":y.baseUrl)+s}return y.urlArgs&&!/^blob\:/.test(s)?s+y.urlArgs(e,s):s},load:function(e,t){req.load(q,e,t)},execCb:function(e,t,i,r){return t.apply(r,i)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=g(e);q.completeLoad(t.id)}},onScriptError:function(e){var t=g(e);if(!n(t.id)){var i=[];return eachProp(S,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return i.push(r),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(i.length?'", needed by: '+i.join(", "):'"'),e,[t.id]))}}},q.require=q.makeRequire(),q}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.1",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,i,r){var n,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=i,i=r):e=[]),o&&o.context&&(a=o.context),n=getOwn(contexts,a),n||(n=contexts[a]=req.s.newContext(a)),o&&n.configure(o),n.require(e,t,i)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,i){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,i){var r,n=e&&e.config||{};if(isBrowser)return r=req.createNode(n,t,i),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=i,n.onNodeCreated&&n.onNodeCreated(r,n,t,i),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(i),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+i,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||mainScript.indexOf("!")!==-1||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,i){var r,n;"string"!=typeof e&&(i=t,t=e,e=null),isArray(t)||(i=t,t=null),!t&&isFunction(i)&&(t=[],i.length&&(i.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,i){t.push(i)}),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),n=contexts[r.getAttribute("data-requirecontext")])),n?(n.defQueue.push([e,t,i]),n.defQueueMap[e]=!0):globalDefQueue.push([e,t,i])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,setTimeout);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVpcmUuanMiXSwibmFtZXMiOlsicmVxdWlyZWpzIiwicmVxdWlyZSIsImRlZmluZSIsImdsb2JhbCIsInNldFRpbWVvdXQiLCJjb21tZW50UmVwbGFjZSIsIm1hdGNoIiwic2luZ2xlUHJlZml4IiwiaXNGdW5jdGlvbiIsIml0Iiwib3N0cmluZyIsImNhbGwiLCJpc0FycmF5IiwiZWFjaCIsImFyeSIsImZ1bmMiLCJpIiwibGVuZ3RoIiwiZWFjaFJldmVyc2UiLCJoYXNQcm9wIiwib2JqIiwicHJvcCIsImhhc093biIsImdldE93biIsImVhY2hQcm9wIiwibWl4aW4iLCJ0YXJnZXQiLCJzb3VyY2UiLCJmb3JjZSIsImRlZXBTdHJpbmdNaXhpbiIsInZhbHVlIiwiUmVnRXhwIiwiYmluZCIsImZuIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJzY3JpcHRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImRlZmF1bHRPbkVycm9yIiwiZXJyIiwiZ2V0R2xvYmFsIiwiZyIsInNwbGl0IiwicGFydCIsIm1ha2VFcnJvciIsImlkIiwibXNnIiwicmVxdWlyZU1vZHVsZXMiLCJlIiwiRXJyb3IiLCJyZXF1aXJlVHlwZSIsIm9yaWdpbmFsRXJyb3IiLCJuZXdDb250ZXh0IiwiY29udGV4dE5hbWUiLCJ0cmltRG90cyIsInNwbGljZSIsIm5vcm1hbGl6ZSIsIm5hbWUiLCJiYXNlTmFtZSIsImFwcGx5TWFwIiwicGtnTWFpbiIsIm1hcFZhbHVlIiwibmFtZVBhcnRzIiwiaiIsIm5hbWVTZWdtZW50IiwibGFzdEluZGV4IiwiZm91bmRNYXAiLCJmb3VuZEkiLCJmb3VuZFN0YXJNYXAiLCJzdGFySSIsIm5vcm1hbGl6ZWRCYXNlUGFydHMiLCJiYXNlUGFydHMiLCJtYXAiLCJjb25maWciLCJzdGFyTWFwIiwibm9kZUlkQ29tcGF0IiwianNTdWZmaXhSZWdFeHAiLCJ0ZXN0IiwicmVwbGFjZSIsImNoYXJBdCIsInNsaWNlIiwiY29uY2F0Iiwiam9pbiIsIm91dGVyTG9vcCIsInBrZ3MiLCJyZW1vdmVTY3JpcHQiLCJpc0Jyb3dzZXIiLCJzY3JpcHROb2RlIiwiZ2V0QXR0cmlidXRlIiwiY29udGV4dCIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsImhhc1BhdGhGYWxsYmFjayIsInBhdGhDb25maWciLCJwYXRocyIsInNoaWZ0IiwidW5kZWYiLCJtYWtlUmVxdWlyZSIsInNraXBNYXAiLCJzcGxpdFByZWZpeCIsInByZWZpeCIsImluZGV4IiwiaW5kZXhPZiIsInN1YnN0cmluZyIsIm1ha2VNb2R1bGVNYXAiLCJwYXJlbnRNb2R1bGVNYXAiLCJpc05vcm1hbGl6ZWQiLCJ1cmwiLCJwbHVnaW5Nb2R1bGUiLCJzdWZmaXgiLCJwYXJlbnROYW1lIiwib3JpZ2luYWxOYW1lIiwiaXNEZWZpbmUiLCJub3JtYWxpemVkTmFtZSIsInJlcXVpcmVDb3VudGVyIiwiZGVmaW5lZCIsIm5hbWVUb1VybCIsInVubm9ybWFsaXplZENvdW50ZXIiLCJwYXJlbnRNYXAiLCJ1bm5vcm1hbGl6ZWQiLCJnZXRNb2R1bGUiLCJkZXBNYXAiLCJtb2QiLCJyZWdpc3RyeSIsIk1vZHVsZSIsIm9uIiwiZGVmaW5lRW1pdENvbXBsZXRlIiwiZXJyb3IiLCJvbkVycm9yIiwiZXJyYmFjayIsImlkcyIsIm5vdGlmaWVkIiwiZXZlbnRzIiwiZW1pdCIsInJlcSIsInRha2VHbG9iYWxRdWV1ZSIsImdsb2JhbERlZlF1ZXVlIiwicXVldWVJdGVtIiwiZGVmUXVldWVNYXAiLCJkZWZRdWV1ZSIsInB1c2giLCJjbGVhblJlZ2lzdHJ5IiwiZW5hYmxlZFJlZ2lzdHJ5IiwiYnJlYWtDeWNsZSIsInRyYWNlZCIsInByb2Nlc3NlZCIsImRlcE1hcHMiLCJkZXBJZCIsImRlcCIsImRlcE1hdGNoZWQiLCJkZWZpbmVEZXAiLCJjaGVjayIsImNoZWNrTG9hZGVkIiwidXNpbmdQYXRoRmFsbGJhY2siLCJ3YWl0SW50ZXJ2YWwiLCJ3YWl0U2Vjb25kcyIsImV4cGlyZWQiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsIm5vTG9hZHMiLCJyZXFDYWxscyIsInN0aWxsTG9hZGluZyIsIm5lZWRDeWNsZUNoZWNrIiwiaW5DaGVja0xvYWRlZCIsIm1vZElkIiwiZW5hYmxlZCIsImluaXRlZCIsImZldGNoZWQiLCJpc1dlYldvcmtlciIsImNoZWNrTG9hZGVkVGltZW91dElkIiwiY2FsbEdldE1vZHVsZSIsImFyZ3MiLCJpbml0IiwicmVtb3ZlTGlzdGVuZXIiLCJub2RlIiwiaWVOYW1lIiwiZGV0YWNoRXZlbnQiLCJpc09wZXJhIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldFNjcmlwdERhdGEiLCJldnQiLCJjdXJyZW50VGFyZ2V0Iiwic3JjRWxlbWVudCIsIm9uU2NyaXB0TG9hZCIsIm9uU2NyaXB0RXJyb3IiLCJpbnRha2VEZWZpbmVzIiwiaGFuZGxlcnMiLCJiYXNlVXJsIiwiYnVuZGxlcyIsInNoaW0iLCJ1bmRlZkV2ZW50cyIsInVybEZldGNoZWQiLCJidW5kbGVzTWFwIiwiZXhwb3J0cyIsInVzaW5nRXhwb3J0cyIsIm1vZHVsZSIsInVyaSIsInRoaXMiLCJkZXBFeHBvcnRzIiwicGx1Z2luTWFwcyIsImRlcENvdW50IiwicHJvdG90eXBlIiwiZmFjdG9yeSIsIm9wdGlvbnMiLCJpZ25vcmUiLCJlbmFibGUiLCJmZXRjaCIsImVuYWJsZUJ1aWxkQ2FsbGJhY2siLCJkZXBzIiwiY2FsbFBsdWdpbiIsImxvYWQiLCJlbmFibGluZyIsImNqc01vZHVsZSIsImRlZmluaW5nIiwiZXhlY0NiIiwidW5kZWZpbmVkIiwicmVxdWlyZU1hcCIsIm9uUmVzb3VyY2VMb2FkIiwicmVzTG9hZE1hcHMiLCJub3JtYWxpemVkTWFwIiwiZGVmaW5lRW1pdHRlZCIsInBsdWdpbk1hcCIsInBsdWdpbiIsIm5vcm1hbGl6ZWRNb2QiLCJidW5kbGVJZCIsImxvY2FsUmVxdWlyZSIsImZyb21UZXh0IiwidGV4dCIsInRleHRBbHQiLCJtb2R1bGVOYW1lIiwibW9kdWxlTWFwIiwiaGFzSW50ZXJhY3RpdmUiLCJ1c2VJbnRlcmFjdGl2ZSIsImV4ZWMiLCJjb21wbGV0ZUxvYWQiLCJoYW5kbGVyIiwidW5kZWZlZCIsImNiIiwiY2JzIiwibmV4dFRpY2siLCJjb25maWd1cmUiLCJjZmciLCJ1cmxBcmdzIiwib2JqcyIsInYiLCJleHBvcnRzRm4iLCJtYWtlU2hpbUV4cG9ydHMiLCJwYWNrYWdlcyIsInBrZ09iaiIsImxvY2F0aW9uIiwibWFpbiIsImN1cnJEaXJSZWdFeHAiLCJjYWxsYmFjayIsInJldCIsInJlbE1hcCIsInJlcXVpcmVNb2QiLCJfX3JlcXVpcmVKc0J1aWxkIiwiZ2V0IiwidG9VcmwiLCJtb2R1bGVOYW1lUGx1c0V4dCIsImV4dCIsImxhc3RJbmRleE9mIiwic2VnbWVudCIsImlzUmVsYXRpdmUiLCJzcGVjaWZpZWQiLCJmb3VuZCIsInNoRXhwb3J0cyIsImVuZm9yY2VEZWZpbmUiLCJza2lwRXh0Iiwic3ltcyIsInBhcmVudE1vZHVsZSIsInBhcmVudFBhdGgiLCJqc0V4dFJlZ0V4cCIsInR5cGUiLCJyZWFkeVJlZ0V4cCIsInJlYWR5U3RhdGUiLCJpbnRlcmFjdGl2ZVNjcmlwdCIsImRhdGEiLCJwYXJlbnRzIiwia2V5IiwiZ2V0SW50ZXJhY3RpdmVTY3JpcHQiLCJzY3JpcHQiLCJzIiwiaGVhZCIsImJhc2VFbGVtZW50IiwiZGF0YU1haW4iLCJzcmMiLCJjdXJyZW50bHlBZGRpbmdTY3JpcHQiLCJtYWluU2NyaXB0Iiwic3ViUGF0aCIsInZlcnNpb24iLCJjb21tZW50UmVnRXhwIiwiY2pzUmVxdWlyZVJlZ0V4cCIsIm9wIiwiT2JqZWN0IiwidG9TdHJpbmciLCJoYXNPd25Qcm9wZXJ0eSIsIndpbmRvdyIsIm5hdmlnYXRvciIsImltcG9ydFNjcmlwdHMiLCJwbGF0Zm9ybSIsImRlZkNvbnRleHROYW1lIiwib3BlcmEiLCJjb250ZXh0cyIsIm9wdGlvbmFsIiwiY3R4IiwiY3JlYXRlTm9kZSIsInhodG1sIiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlRWxlbWVudCIsInNjcmlwdFR5cGUiLCJjaGFyc2V0IiwiYXN5bmMiLCJzZXRBdHRyaWJ1dGUiLCJhdHRhY2hFdmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbk5vZGVDcmVhdGVkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJza2lwRGF0YU1haW4iLCJwb3AiLCJhbWQiLCJqUXVlcnkiLCJldmFsIl0sIm1hcHBpbmdzIjoiQUFTQSxHQUFJQSxXQUFXQyxRQUFTQyxRQUN2QixTQUFVQyxPQUFRQyxZQTRCZixRQUFTQyxnQkFBZUMsRUFBT0MsR0FDM0IsTUFBT0EsSUFBZ0IsR0FHM0IsUUFBU0MsWUFBV0MsR0FDaEIsTUFBNEIsc0JBQXJCQyxRQUFRQyxLQUFLRixHQUd4QixRQUFTRyxTQUFRSCxHQUNiLE1BQTRCLG1CQUFyQkMsUUFBUUMsS0FBS0YsR0FPeEIsUUFBU0ksTUFBS0MsRUFBS0MsR0FDZixHQUFJRCxFQUFLLENBQ0wsR0FBSUUsRUFDSixLQUFLQSxFQUFJLEVBQUdBLEVBQUlGLEVBQUlHLFVBQ1pILEVBQUlFLEtBQU1ELEVBQUtELEVBQUlFLEdBQUlBLEVBQUdGLElBRE5FLEdBQUssS0FZekMsUUFBU0UsYUFBWUosRUFBS0MsR0FDdEIsR0FBSUQsRUFBSyxDQUNMLEdBQUlFLEVBQ0osS0FBS0EsRUFBSUYsRUFBSUcsT0FBUyxFQUFHRCxHQUFJLEtBQ3JCRixFQUFJRSxLQUFNRCxFQUFLRCxFQUFJRSxHQUFJQSxFQUFHRixJQURERSxHQUFLLEtBUTlDLFFBQVNHLFNBQVFDLEVBQUtDLEdBQ2xCLE1BQU9DLFFBQU9YLEtBQUtTLEVBQUtDLEdBRzVCLFFBQVNFLFFBQU9ILEVBQUtDLEdBQ2pCLE1BQU9GLFNBQVFDLEVBQUtDLElBQVNELEVBQUlDLEdBUXJDLFFBQVNHLFVBQVNKLEVBQUtMLEdBQ25CLEdBQUlNLEVBQ0osS0FBS0EsSUFBUUQsR0FDVCxHQUFJRCxRQUFRQyxFQUFLQyxJQUNUTixFQUFLSyxFQUFJQyxHQUFPQSxHQUNoQixNQVVoQixRQUFTSSxPQUFNQyxFQUFRQyxFQUFRQyxFQUFPQyxHQWtCbEMsTUFqQklGLElBQ0FILFNBQVNHLEVBQVEsU0FBVUcsRUFBT1QsSUFDMUJPLEdBQVVULFFBQVFPLEVBQVFMLE1BQ3RCUSxHQUFvQyxnQkFBVkMsS0FBc0JBLEdBQy9DbEIsUUFBUWtCLElBQVd0QixXQUFXc0IsSUFDN0JBLFlBQWlCQyxRQU9uQkwsRUFBT0wsR0FBUVMsR0FMVkosRUFBT0wsS0FDUkssRUFBT0wsT0FFWEksTUFBTUMsRUFBT0wsR0FBT1MsRUFBT0YsRUFBT0MsT0FPM0NILEVBS1gsUUFBU00sTUFBS1osRUFBS2EsR0FDZixNQUFPLFlBQ0gsTUFBT0EsR0FBR0MsTUFBTWQsRUFBS2UsWUFJN0IsUUFBU0MsV0FDTCxNQUFPQyxVQUFTQyxxQkFBcUIsVUFHekMsUUFBU0MsZ0JBQWVDLEdBQ3BCLEtBQU1BLEdBS1YsUUFBU0MsV0FBVVgsR0FDZixJQUFLQSxFQUNELE1BQU9BLEVBRVgsSUFBSVksR0FBSXZDLE1BSVIsT0FIQVUsTUFBS2lCLEVBQU1hLE1BQU0sS0FBTSxTQUFVQyxHQUM3QkYsRUFBSUEsRUFBRUUsS0FFSEYsRUFXWCxRQUFTRyxXQUFVQyxFQUFJQyxFQUFLUCxFQUFLUSxHQUM3QixHQUFJQyxHQUFJLEdBQUlDLE9BQU1ILEVBQU0sMkNBQTZDRCxFQU1yRSxPQUxBRyxHQUFFRSxZQUFjTCxFQUNoQkcsRUFBRUQsZUFBaUJBLEVBQ2ZSLElBQ0FTLEVBQUVHLGNBQWdCWixHQUVmUyxFQXlCWCxRQUFTSSxZQUFXQyxHQXFDaEIsUUFBU0MsR0FBU3pDLEdBQ2QsR0FBSUUsR0FBRzRCLENBQ1AsS0FBSzVCLEVBQUksRUFBR0EsRUFBSUYsRUFBSUcsT0FBUUQsSUFFeEIsR0FEQTRCLEVBQU85QixFQUFJRSxHQUNFLE1BQVQ0QixFQUNBOUIsRUFBSTBDLE9BQU94QyxFQUFHLEdBQ2RBLEdBQUssTUFDRixJQUFhLE9BQVQ0QixFQUFlLENBTXRCLEdBQVUsSUFBTjVCLEdBQWtCLElBQU5BLEdBQXNCLE9BQVhGLEVBQUksSUFBK0IsT0FBZkEsRUFBSUUsRUFBSSxHQUNuRCxRQUNPQSxHQUFJLElBQ1hGLEVBQUkwQyxPQUFPeEMsRUFBSSxFQUFHLEdBQ2xCQSxHQUFLLElBZ0JyQixRQUFTeUMsR0FBVUMsRUFBTUMsRUFBVUMsR0FDL0IsR0FBSUMsR0FBU0MsRUFBVUMsRUFBVy9DLEVBQUdnRCxFQUFHQyxFQUFhQyxFQUNqREMsRUFBVUMsRUFBUUMsRUFBY0MsRUFBT0MsRUFDdkNDLEVBQWFiLEdBQVlBLEVBQVNoQixNQUFNLEtBQ3hDOEIsRUFBTUMsRUFBT0QsSUFDYkUsRUFBVUYsR0FBT0EsRUFBSSxJQStCekIsSUE1QklmLElBQ0FBLEVBQU9BLEVBQUtmLE1BQU0sS0FDbEJ1QixFQUFZUixFQUFLekMsT0FBUyxFQU10QnlELEVBQU9FLGNBQWdCQyxlQUFlQyxLQUFLcEIsRUFBS1EsTUFDaERSLEVBQUtRLEdBQWFSLEVBQUtRLEdBQVdhLFFBQVFGLGVBQWdCLEtBSXBDLE1BQXRCbkIsRUFBSyxHQUFHc0IsT0FBTyxJQUFjUixJQU03QkQsRUFBc0JDLEVBQVVTLE1BQU0sRUFBR1QsRUFBVXZELE9BQVMsR0FDNUR5QyxFQUFPYSxFQUFvQlcsT0FBT3hCLElBR3RDSCxFQUFTRyxHQUNUQSxFQUFPQSxFQUFLeUIsS0FBSyxNQUlqQnZCLEdBQVlhLElBQVFELEdBQWFHLEdBQVUsQ0FDM0NaLEVBQVlMLEVBQUtmLE1BQU0sSUFFdkJ5QyxHQUFXLElBQUtwRSxFQUFJK0MsRUFBVTlDLE9BQVFELEVBQUksRUFBR0EsR0FBSyxFQUFHLENBR2pELEdBRkFpRCxFQUFjRixFQUFVa0IsTUFBTSxFQUFHakUsR0FBR21FLEtBQUssS0FFckNYLEVBR0EsSUFBS1IsRUFBSVEsRUFBVXZELE9BQVErQyxFQUFJLEVBQUdBLEdBQUssRUFLbkMsR0FKQUYsRUFBV3ZDLE9BQU9rRCxFQUFLRCxFQUFVUyxNQUFNLEVBQUdqQixHQUFHbUIsS0FBSyxNQUk5Q3JCLElBQ0FBLEVBQVd2QyxPQUFPdUMsRUFBVUcsSUFDZCxDQUVWRSxFQUFXTCxFQUNYTSxFQUFTcEQsQ0FDVCxNQUFNb0UsSUFTakJmLEdBQWdCTSxHQUFXcEQsT0FBT29ELEVBQVNWLEtBQzVDSSxFQUFlOUMsT0FBT29ELEVBQVNWLEdBQy9CSyxFQUFRdEQsSUFJWG1ELEdBQVlFLElBQ2JGLEVBQVdFLEVBQ1hELEVBQVNFLEdBR1RILElBQ0FKLEVBQVVQLE9BQU8sRUFBR1ksRUFBUUQsR0FDNUJULEVBQU9LLEVBQVVvQixLQUFLLE1BUTlCLE1BRkF0QixHQUFVdEMsT0FBT21ELEVBQU9XLEtBQU0zQixHQUV2QkcsRUFBVUEsRUFBVUgsRUFHL0IsUUFBUzRCLEdBQWE1QixHQUNkNkIsV0FDQTFFLEtBQUt1QixVQUFXLFNBQVVvRCxHQUN0QixHQUFJQSxFQUFXQyxhQUFhLHdCQUEwQi9CLEdBQzlDOEIsRUFBV0MsYUFBYSx5QkFBMkJDLEVBQVFwQyxZQUUvRCxNQURBa0MsR0FBV0csV0FBV0MsWUFBWUosSUFDM0IsSUFNdkIsUUFBU0ssR0FBZ0IvQyxHQUNyQixHQUFJZ0QsR0FBYXZFLE9BQU9tRCxFQUFPcUIsTUFBT2pELEVBQ3RDLElBQUlnRCxHQUFjbEYsUUFBUWtGLElBQWVBLEVBQVc3RSxPQUFTLEVBWXpELE1BVEE2RSxHQUFXRSxRQUNYTixFQUFRekYsUUFBUWdHLE1BQU1uRCxHQUl0QjRDLEVBQVFRLFlBQVksTUFDaEJDLFNBQVMsS0FDVHJELEtBRUcsRUFPZixRQUFTc0QsR0FBWTFDLEdBQ2pCLEdBQUkyQyxHQUNBQyxFQUFRNUMsRUFBT0EsRUFBSzZDLFFBQVEsTUFBTyxDQUt2QyxPQUpJRCxJQUFRLElBQ1JELEVBQVMzQyxFQUFLOEMsVUFBVSxFQUFHRixHQUMzQjVDLEVBQU9BLEVBQUs4QyxVQUFVRixFQUFRLEVBQUc1QyxFQUFLekMsVUFFbENvRixFQUFRM0MsR0FrQnBCLFFBQVMrQyxHQUFjL0MsRUFBTWdELEVBQWlCQyxFQUFjL0MsR0FDeEQsR0FBSWdELEdBQUtDLEVBQWNDLEVBQVEvQyxFQUMzQnNDLEVBQVMsS0FDVFUsRUFBYUwsRUFBa0JBLEVBQWdCaEQsS0FBTyxLQUN0RHNELEVBQWV0RCxFQUNmdUQsR0FBVyxFQUNYQyxFQUFpQixFQTZEckIsT0F6REt4RCxLQUNEdUQsR0FBVyxFQUNYdkQsRUFBTyxPQUFTeUQsR0FBa0IsSUFHdENwRCxFQUFZcUMsRUFBWTFDLEdBQ3hCMkMsRUFBU3RDLEVBQVUsR0FDbkJMLEVBQU9LLEVBQVUsR0FFYnNDLElBQ0FBLEVBQVM1QyxFQUFVNEMsRUFBUVUsRUFBWW5ELEdBQ3ZDaUQsRUFBZXRGLE9BQU82RixFQUFTZixJQUkvQjNDLElBQ0kyQyxFQUdJYSxFQUZBTCxHQUFnQkEsRUFBYXBELFVBRVpvRCxFQUFhcEQsVUFBVUMsRUFBTSxTQUFVQSxHQUNwRCxNQUFPRCxHQUFVQyxFQUFNcUQsRUFBWW5ELEtBVXRCRixFQUFLNkMsUUFBUSxRQUFTLEVBQ3RCOUMsRUFBVUMsRUFBTXFELEVBQVluRCxHQUM1QkYsR0FJckJ3RCxFQUFpQnpELEVBQVVDLEVBQU1xRCxFQUFZbkQsR0FLN0NHLEVBQVlxQyxFQUFZYyxHQUN4QmIsRUFBU3RDLEVBQVUsR0FDbkJtRCxFQUFpQm5ELEVBQVUsR0FDM0I0QyxHQUFlLEVBRWZDLEVBQU1sQixFQUFRMkIsVUFBVUgsS0FPaENKLEdBQVNULEdBQVdRLEdBQWlCRixFQUU1QixHQURBLGlCQUFtQlcsR0FBdUIsSUFJL0NqQixPQUFRQSxFQUNSM0MsS0FBTXdELEVBQ05LLFVBQVdiLEVBQ1hjLGVBQWdCVixFQUNoQkYsSUFBS0EsRUFDTEksYUFBY0EsRUFDZEMsU0FBVUEsRUFDVm5FLElBQUt1RCxFQUNHQSxFQUFTLElBQU1hLEVBQ2ZBLEdBQWtCSixHQUlsQyxRQUFTVyxHQUFVQyxHQUNmLEdBQUk1RSxHQUFLNEUsRUFBTzVFLEdBQ1o2RSxFQUFNcEcsT0FBT3FHLEVBQVU5RSxFQU0zQixPQUpLNkUsS0FDREEsRUFBTUMsRUFBUzlFLEdBQU0sR0FBSTRDLEdBQVFtQyxPQUFPSCxJQUdyQ0MsRUFHWCxRQUFTRyxHQUFHSixFQUFRaEUsRUFBTXpCLEdBQ3RCLEdBQUlhLEdBQUs0RSxFQUFPNUUsR0FDWjZFLEVBQU1wRyxPQUFPcUcsRUFBVTlFLElBRXZCM0IsUUFBUWlHLEVBQVN0RSxJQUNYNkUsSUFBT0EsRUFBSUksb0JBS2pCSixFQUFNRixFQUFVQyxHQUNaQyxFQUFJSyxPQUFrQixVQUFUdEUsRUFDYnpCLEVBQUcwRixFQUFJSyxPQUVQTCxFQUFJRyxHQUFHcEUsRUFBTXpCLElBUkosWUFBVHlCLEdBQ0F6QixFQUFHbUYsRUFBUXRFLElBWXZCLFFBQVNtRixHQUFRekYsRUFBSzBGLEdBQ2xCLEdBQUlDLEdBQU0zRixFQUFJUSxlQUNWb0YsR0FBVyxDQUVYRixHQUNBQSxFQUFRMUYsSUFFUjNCLEtBQUtzSCxFQUFLLFNBQVVyRixHQUNoQixHQUFJNkUsR0FBTXBHLE9BQU9xRyxFQUFVOUUsRUFDdkI2RSxLQUVBQSxFQUFJSyxNQUFReEYsRUFDUm1GLEVBQUlVLE9BQU9MLFFBQ1hJLEdBQVcsRUFDWFQsRUFBSVcsS0FBSyxRQUFTOUYsT0FLekI0RixHQUNERyxJQUFJTixRQUFRekYsSUFTeEIsUUFBU2dHLEtBRURDLGVBQWV4SCxTQUNmSixLQUFLNEgsZUFBZ0IsU0FBU0MsR0FDMUIsR0FBSTVGLEdBQUs0RixFQUFVLEVBQ0QsaUJBQVA1RixLQUNQNEMsRUFBUWlELFlBQVk3RixJQUFNLEdBRTlCOEYsRUFBU0MsS0FBS0gsS0FFbEJELG1CQXNDUixRQUFTSyxHQUFjaEcsU0FFWjhFLEdBQVM5RSxTQUNUaUcsR0FBZ0JqRyxHQUczQixRQUFTa0csR0FBV3JCLEVBQUtzQixFQUFRQyxHQUM3QixHQUFJcEcsR0FBSzZFLEVBQUlsRCxJQUFJM0IsRUFFYjZFLEdBQUlLLE1BQ0pMLEVBQUlXLEtBQUssUUFBU1gsRUFBSUssUUFFdEJpQixFQUFPbkcsSUFBTSxFQUNiakMsS0FBSzhHLEVBQUl3QixRQUFTLFNBQVV6QixFQUFRMUcsR0FDaEMsR0FBSW9JLEdBQVExQixFQUFPNUUsR0FDZnVHLEVBQU05SCxPQUFPcUcsRUFBVXdCLElBTXZCQyxHQUFRMUIsRUFBSTJCLFdBQVd0SSxJQUFPa0ksRUFBVUUsS0FDcEM3SCxPQUFPMEgsRUFBUUcsSUFDZnpCLEVBQUk0QixVQUFVdkksRUFBR29HLEVBQVFnQyxJQUN6QnpCLEVBQUk2QixTQUVKUixFQUFXSyxFQUFLSixFQUFRQyxNQUlwQ0EsRUFBVXBHLElBQU0sR0FJeEIsUUFBUzJHLEtBQ0wsR0FBSWpILEdBQUtrSCxFQUNMQyxFQUFvQyxJQUFyQmpGLEVBQU9rRixZQUV0QkMsRUFBVUYsR0FBaUJqRSxFQUFRb0UsVUFBWUgsR0FBZ0IsR0FBSUksT0FBT0MsVUFDMUVDLEtBQ0FDLEtBQ0FDLEdBQWUsRUFDZkMsR0FBaUIsQ0FHckIsS0FBSUMsRUFBSixDQTZDQSxHQXpDQUEsR0FBZ0IsRUFHaEI3SSxTQUFTdUgsRUFBaUIsU0FBVXBCLEdBQ2hDLEdBQUlsRCxHQUFNa0QsRUFBSWxELElBQ1Y2RixFQUFRN0YsRUFBSTNCLEVBR2hCLElBQUs2RSxFQUFJNEMsVUFJSjlGLEVBQUl3QyxVQUNMaUQsRUFBU3JCLEtBQUtsQixJQUdiQSxFQUFJSyxPQUdMLElBQUtMLEVBQUk2QyxRQUFVWCxFQUNYaEUsRUFBZ0J5RSxJQUNoQlosR0FBb0IsRUFDcEJTLEdBQWUsSUFFZkYsRUFBUXBCLEtBQUt5QixHQUNiaEYsRUFBYWdGLFFBRWQsS0FBSzNDLEVBQUk2QyxRQUFVN0MsRUFBSThDLFNBQVdoRyxFQUFJd0MsV0FDekNrRCxHQUFlLEdBQ1YxRixFQUFJNEIsUUFNTCxNQUFRK0QsSUFBaUIsSUFNckNQLEdBQVdJLEVBQVFoSixPQUluQixNQUZBdUIsR0FBTUssVUFBVSxVQUFXLDZCQUErQm9ILEVBQVMsS0FBTUEsR0FDekV6SCxFQUFJYyxZQUFjb0MsRUFBUXBDLFlBQ25CMkUsRUFBUXpGLEVBSWY0SCxJQUNBdkosS0FBS3FKLEVBQVUsU0FBVXZDLEdBQ3JCcUIsRUFBV3JCLFdBT2JrQyxJQUFXSCxJQUFzQlMsSUFHOUI1RSxZQUFhbUYsYUFBaUJDLElBQy9CQSxFQUF1QnZLLFdBQVcsV0FDOUJ1SyxFQUF1QixFQUN2QmxCLEtBQ0QsS0FJWFksR0FBZ0IsR0EyZHBCLFFBQVNPLEdBQWNDLEdBRWQxSixRQUFRaUcsRUFBU3lELEVBQUssS0FDdkJwRCxFQUFVaEIsRUFBY29FLEVBQUssR0FBSSxNQUFNLElBQU9DLEtBQUtELEVBQUssR0FBSUEsRUFBSyxJQUl6RSxRQUFTRSxHQUFlQyxFQUFNakssRUFBTTJDLEVBQU11SCxHQUlsQ0QsRUFBS0UsY0FBZ0JDLFFBR2pCRixHQUNBRCxFQUFLRSxZQUFZRCxFQUFRbEssR0FHN0JpSyxFQUFLSSxvQkFBb0IxSCxFQUFNM0MsR0FBTSxHQVU3QyxRQUFTc0ssR0FBY0MsR0FJbkIsR0FBSU4sR0FBT00sRUFBSUMsZUFBaUJELEVBQUlFLFVBTXBDLE9BSEFULEdBQWVDLEVBQU10RixFQUFRK0YsYUFBYyxPQUFRLHNCQUNuRFYsRUFBZUMsRUFBTXRGLEVBQVFnRyxjQUFlLFVBR3hDVixLQUFNQSxFQUNObEksR0FBSWtJLEdBQVFBLEVBQUt2RixhQUFhLHVCQUl0QyxRQUFTa0csS0FDTCxHQUFJZCxFQU1KLEtBSEFyQyxJQUdPSSxFQUFTM0gsUUFBUSxDQUVwQixHQURBNEosRUFBT2pDLEVBQVM1QyxRQUNBLE9BQVo2RSxFQUFLLEdBQ0wsTUFBTzVDLEdBQVFwRixVQUFVLFdBQVkseUNBQ2pDZ0ksRUFBS0EsRUFBSzVKLE9BQVMsSUFJdkIySixHQUFjQyxHQUd0Qm5GLEVBQVFpRCxlQW5pQ1osR0FBSTBCLEdBQWV4QyxFQUFRbkMsRUFBU2tHLEVBQ2hDakIsRUFDQWpHLEdBSUlrRixZQUFhLEVBQ2JpQyxRQUFTLEtBQ1Q5RixTQUNBK0YsV0FDQXpHLFFBQ0EwRyxRQUNBckgsV0FFSmtELEtBSUFtQixLQUNBaUQsS0FDQXBELEtBQ0F4QixLQUNBNkUsS0FDQUMsS0FDQS9FLEVBQWlCLEVBQ2pCRyxFQUFzQixDQSsrQzFCLE9BdHBDQXNFLElBQ0kzTCxRQUFXLFNBQVUwSCxHQUNqQixNQUFJQSxHQUFJMUgsUUFDRzBILEVBQUkxSCxRQUVIMEgsRUFBSTFILFFBQVV5RixFQUFRUSxZQUFZeUIsRUFBSWxELE1BR3REMEgsUUFBVyxTQUFVeEUsR0FFakIsR0FEQUEsRUFBSXlFLGNBQWUsRUFDZnpFLEVBQUlsRCxJQUFJd0MsU0FDUixNQUFJVSxHQUFJd0UsUUFDSS9FLEVBQVFPLEVBQUlsRCxJQUFJM0IsSUFBTTZFLEVBQUl3RSxRQUUxQnhFLEVBQUl3RSxRQUFVL0UsRUFBUU8sRUFBSWxELElBQUkzQixRQUlsRHVKLE9BQVUsU0FBVTFFLEdBQ2hCLE1BQUlBLEdBQUkwRSxPQUNHMUUsRUFBSTBFLE9BRUgxRSxFQUFJMEUsUUFDUnZKLEdBQUk2RSxFQUFJbEQsSUFBSTNCLEdBQ1p3SixJQUFLM0UsRUFBSWxELElBQUltQyxJQUNibEMsT0FBUSxXQUNKLE1BQU9uRCxRQUFPbUQsRUFBT0EsT0FBUWlELEVBQUlsRCxJQUFJM0IsU0FFekNxSixRQUFTeEUsRUFBSXdFLFVBQVl4RSxFQUFJd0UsZUErSDdDdEUsRUFBUyxTQUFVcEQsR0FDZjhILEtBQUtsRSxPQUFTOUcsT0FBT3lLLEVBQWF2SCxFQUFJM0IsUUFDdEN5SixLQUFLOUgsSUFBTUEsRUFDWDhILEtBQUtSLEtBQU94SyxPQUFPbUQsRUFBT3FILEtBQU10SCxFQUFJM0IsSUFDcEN5SixLQUFLQyxjQUNMRCxLQUFLcEQsV0FDTG9ELEtBQUtqRCxjQUNMaUQsS0FBS0UsY0FDTEYsS0FBS0csU0FBVyxHQVFwQjdFLEVBQU84RSxXQUNIN0IsS0FBTSxTQUFVM0IsRUFBU3lELEVBQVMxRSxFQUFTMkUsR0FDdkNBLEVBQVVBLE1BS05OLEtBQUsvQixTQUlUK0IsS0FBS0ssUUFBVUEsRUFFWDFFLEVBRUFxRSxLQUFLekUsR0FBRyxRQUFTSSxHQUNWcUUsS0FBS2xFLE9BQU9MLFFBR25CRSxFQUFVbEcsS0FBS3VLLEtBQU0sU0FBVS9KLEdBQzNCK0osS0FBS2pFLEtBQUssUUFBUzlGLE1BUzNCK0osS0FBS3BELFFBQVVBLEdBQVdBLEVBQVFsRSxNQUFNLEdBRXhDc0gsS0FBS3JFLFFBQVVBLEVBR2ZxRSxLQUFLL0IsUUFBUyxFQUVkK0IsS0FBS08sT0FBU0QsRUFBUUMsT0FNbEJELEVBQVF0QyxTQUFXZ0MsS0FBS2hDLFFBR3hCZ0MsS0FBS1EsU0FFTFIsS0FBSy9DLFVBSWJELFVBQVcsU0FBVXZJLEVBQUd3TCxHQUdmRCxLQUFLakQsV0FBV3RJLEtBQ2pCdUwsS0FBS2pELFdBQVd0SSxJQUFLLEVBQ3JCdUwsS0FBS0csVUFBWSxFQUNqQkgsS0FBS0MsV0FBV3hMLEdBQUt3TCxJQUk3QlEsTUFBTyxXQUNILElBQUlULEtBQUs5QixRQUFULENBR0E4QixLQUFLOUIsU0FBVSxFQUVmL0UsRUFBUW9FLFdBQVksR0FBS0MsT0FBUUMsU0FFakMsSUFBSXZGLEdBQU04SCxLQUFLOUgsR0FJZixPQUFJOEgsTUFBS1IsU0FDTHJHLEdBQVFRLFlBQVlxRyxLQUFLOUgsS0FDckJ3SSxxQkFBcUIsSUFDdEJWLEtBQUtSLEtBQUttQixTQUFZbEwsS0FBS3VLLEtBQU0sV0FDaEMsTUFBTzlILEdBQUk0QixPQUFTa0csS0FBS1ksYUFBZVosS0FBS2EsVUFJMUMzSSxFQUFJNEIsT0FBU2tHLEtBQUtZLGFBQWVaLEtBQUthLFNBSXJEQSxLQUFNLFdBQ0YsR0FBSXhHLEdBQU0yRixLQUFLOUgsSUFBSW1DLEdBR2RxRixHQUFXckYsS0FDWnFGLEVBQVdyRixJQUFPLEVBQ2xCbEIsRUFBUTBILEtBQUtiLEtBQUs5SCxJQUFJM0IsR0FBSThELEtBUWxDNEMsTUFBTyxXQUNILEdBQUsrQyxLQUFLaEMsVUFBV2dDLEtBQUtjLFNBQTFCLENBSUEsR0FBSTdLLEdBQUs4SyxFQUNMeEssRUFBS3lKLEtBQUs5SCxJQUFJM0IsR0FDZDBKLEVBQWFELEtBQUtDLFdBQ2xCTCxFQUFVSSxLQUFLSixRQUNmUyxFQUFVTCxLQUFLSyxPQUVuQixJQUFLTCxLQUFLL0IsUUFLSCxHQUFJK0IsS0FBS3ZFLE1BQ1p1RSxLQUFLakUsS0FBSyxRQUFTaUUsS0FBS3ZFLFdBQ3JCLEtBQUt1RSxLQUFLZ0IsU0FBVSxDQU92QixHQUZBaEIsS0FBS2dCLFVBQVcsRUFFWmhCLEtBQUtHLFNBQVcsSUFBTUgsS0FBS25GLFFBQVMsQ0FDcEMsR0FBSTVHLFdBQVdvTSxHQUFVLENBT3JCLEdBQUtMLEtBQUtsRSxPQUFPTCxPQUFTdUUsS0FBSzlILElBQUl3QyxVQUMvQnNCLElBQUlOLFVBQVkxRixlQUNoQixJQUNJNEosRUFBVXpHLEVBQVE4SCxPQUFPMUssRUFBSThKLEVBQVNKLEVBQVlMLEdBQ3BELE1BQU9sSixHQUNMVCxFQUFNUyxNQUdWa0osR0FBVXpHLEVBQVE4SCxPQUFPMUssRUFBSThKLEVBQVNKLEVBQVlMLEVBZ0J0RCxJQVZJSSxLQUFLOUgsSUFBSXdDLFVBQXdCd0csU0FBWnRCLElBQ3JCbUIsRUFBWWYsS0FBS0YsT0FDYmlCLEVBQ0FuQixFQUFVbUIsRUFBVW5CLFFBQ2JJLEtBQUtILGVBRVpELEVBQVVJLEtBQUtKLFVBSW5CM0osRUFJQSxNQUhBQSxHQUFJa0wsV0FBYW5CLEtBQUs5SCxJQUN0QmpDLEVBQUlRLGVBQWlCdUosS0FBSzlILElBQUl3QyxVQUFZc0YsS0FBSzlILElBQUkzQixJQUFNLEtBQ3pETixFQUFJVyxZQUFjb0osS0FBSzlILElBQUl3QyxTQUFXLFNBQVcsVUFDMUNnQixFQUFTc0UsS0FBS3ZFLE1BQVF4RixPQUtqQzJKLEdBQVVTLENBS2QsSUFGQUwsS0FBS0osUUFBVUEsRUFFWEksS0FBSzlILElBQUl3QyxXQUFhc0YsS0FBS08sU0FDM0IxRixFQUFRdEUsR0FBTXFKLEVBRVY1RCxJQUFJb0YsZ0JBQWdCLENBQ3BCLEdBQUlDLEtBQ0ovTSxNQUFLMEwsS0FBS3BELFFBQVMsU0FBVXpCLEdBQ3pCa0csRUFBWS9FLEtBQUtuQixFQUFPbUcsZUFBaUJuRyxLQUU3Q2EsSUFBSW9GLGVBQWVqSSxFQUFTNkcsS0FBSzlILElBQUttSixHQUs5QzlFLEVBQWNoRyxHQUVkeUosS0FBS25GLFNBQVUsRUFNbkJtRixLQUFLZ0IsVUFBVyxFQUVaaEIsS0FBS25GLFVBQVltRixLQUFLdUIsZ0JBQ3RCdkIsS0FBS3VCLGVBQWdCLEVBQ3JCdkIsS0FBS2pFLEtBQUssVUFBV2lFLEtBQUtKLFNBQzFCSSxLQUFLeEUsb0JBQXFCLFFBcEZ6QjVHLFNBQVF1RSxFQUFRaUQsWUFBYTdGLElBQzlCeUosS0FBS1MsVUF5RmpCRyxXQUFZLFdBQ1IsR0FBSTFJLEdBQU04SCxLQUFLOUgsSUFDWDNCLEVBQUsyQixFQUFJM0IsR0FFVGlMLEVBQVl0SCxFQUFjaEMsRUFBSTRCLE9BSWxDa0csTUFBS3BELFFBQVFOLEtBQUtrRixHQUVsQmpHLEVBQUdpRyxFQUFXLFVBQVcvTCxLQUFLdUssS0FBTSxTQUFVeUIsR0FDMUMsR0FBSVosR0FBTVMsRUFBZUksRUFDckJDLEVBQVczTSxPQUFPMkssRUFBWUssS0FBSzlILElBQUkzQixJQUN2Q1ksRUFBTzZJLEtBQUs5SCxJQUFJZixLQUNoQnFELEVBQWF3RixLQUFLOUgsSUFBSThDLFVBQVlnRixLQUFLOUgsSUFBSThDLFVBQVU3RCxLQUFPLEtBQzVEeUssRUFBZXpJLEVBQVFRLFlBQVl6QixFQUFJOEMsV0FDbkMwRixxQkFBcUIsR0FLN0IsT0FBSVYsTUFBSzlILElBQUkrQyxjQUVMd0csRUFBT3ZLLFlBQ1BDLEVBQU9zSyxFQUFPdkssVUFBVUMsRUFBTSxTQUFVQSxHQUNwQyxNQUFPRCxHQUFVQyxFQUFNcUQsR0FBWSxNQUNqQyxJQUtWOEcsRUFBZ0JwSCxFQUFjaEMsRUFBSTRCLE9BQVMsSUFBTTNDLEVBQ25CNkksS0FBSzlILElBQUk4QyxXQUN2Q08sRUFBRytGLEVBQ0MsVUFBVzdMLEtBQUt1SyxLQUFNLFNBQVV6SyxHQUM1QnlLLEtBQUs5SCxJQUFJb0osY0FBZ0JBLEVBQ3pCdEIsS0FBS3pCLFFBQVMsV0FBYyxNQUFPaEosSUFBVSxNQUN6Q3lJLFNBQVMsRUFDVHVDLFFBQVEsT0FJcEJtQixFQUFnQjFNLE9BQU9xRyxFQUFVaUcsRUFBYy9LLFNBQzNDbUwsSUFHQTFCLEtBQUtwRCxRQUFRTixLQUFLZ0YsR0FFZHRCLEtBQUtsRSxPQUFPTCxPQUNaaUcsRUFBY25HLEdBQUcsUUFBUzlGLEtBQUt1SyxLQUFNLFNBQVUvSixHQUMzQytKLEtBQUtqRSxLQUFLLFFBQVM5RixNQUczQnlMLEVBQWNsQixZQVFsQm1CLEdBQ0EzQixLQUFLOUgsSUFBSW1DLElBQU1sQixFQUFRMkIsVUFBVTZHLE9BQ2pDM0IsTUFBS2EsU0FJVEEsRUFBT3BMLEtBQUt1SyxLQUFNLFNBQVV6SyxHQUN4QnlLLEtBQUt6QixRQUFTLFdBQWMsTUFBT2hKLElBQVUsTUFDekN5SSxTQUFTLE1BSWpCNkMsRUFBS3BGLE1BQVFoRyxLQUFLdUssS0FBTSxTQUFVL0osR0FDOUIrSixLQUFLL0IsUUFBUyxFQUNkK0IsS0FBS3ZFLE1BQVF4RixFQUNiQSxFQUFJUSxnQkFBa0JGLEdBSXRCdEIsU0FBU29HLEVBQVUsU0FBVUQsR0FDd0IsSUFBN0NBLEVBQUlsRCxJQUFJM0IsR0FBR3lELFFBQVF6RCxFQUFLLGtCQUN4QmdHLEVBQWNuQixFQUFJbEQsSUFBSTNCLE1BSTlCbUYsRUFBUXpGLEtBS1o0SyxFQUFLZ0IsU0FBV3BNLEtBQUt1SyxLQUFNLFNBQVU4QixFQUFNQyxHQUV2QyxHQUFJQyxHQUFhOUosRUFBSWYsS0FDakI4SyxFQUFZL0gsRUFBYzhILEdBQzFCRSxFQUFpQkMsY0FNakJKLEtBQ0FELEVBQU9DLEdBS1BHLElBQ0FDLGdCQUFpQixHQUtyQmpILEVBQVUrRyxHQUdOck4sUUFBUXVELEVBQU9BLE9BQVE1QixLQUN2QjRCLEVBQU9BLE9BQU82SixHQUFjN0osRUFBT0EsT0FBTzVCLEdBRzlDLEtBQ0l5RixJQUFJb0csS0FBS04sR0FDWCxNQUFPcEwsR0FDTCxNQUFPZ0YsR0FBUXBGLFVBQVUsZUFDUixxQkFBdUJDLEVBQ3hCLFlBQWNHLEVBQ2JBLEdBQ0NILEtBR2xCMkwsSUFDQUMsZ0JBQWlCLEdBS3JCbkMsS0FBS3BELFFBQVFOLEtBQUsyRixHQUdsQjlJLEVBQVFrSixhQUFhTCxHQUlyQkosR0FBY0ksR0FBYW5CLFNBTS9CWSxHQUFPWixLQUFLM0ksRUFBSWYsS0FBTXlLLEVBQWNmLEVBQU0xSSxPQUc5Q2dCLEVBQVFxSCxPQUFPZ0IsRUFBV3hCLE1BQzFCQSxLQUFLRSxXQUFXc0IsRUFBVWpMLElBQU1pTCxHQUdwQ2hCLE9BQVEsV0FDSmhFLEVBQWdCd0QsS0FBSzlILElBQUkzQixJQUFNeUosS0FDL0JBLEtBQUtoQyxTQUFVLEVBTWZnQyxLQUFLYyxVQUFXLEVBR2hCeE0sS0FBSzBMLEtBQUtwRCxRQUFTbkgsS0FBS3VLLEtBQU0sU0FBVTdFLEVBQVExRyxHQUM1QyxHQUFJOEIsR0FBSTZFLEVBQUtrSCxDQUViLElBQXNCLGdCQUFYbkgsR0FBcUIsQ0FXNUIsR0FSQUEsRUFBU2pCLEVBQWNpQixFQUNDNkUsS0FBSzlILElBQUl3QyxTQUFXc0YsS0FBSzlILElBQU04SCxLQUFLOUgsSUFBSThDLFdBQ3pDLEdBQ0NnRixLQUFLcEcsU0FDN0JvRyxLQUFLcEQsUUFBUW5JLEdBQUswRyxFQUVsQm1ILEVBQVV0TixPQUFPcUssRUFBVWxFLEVBQU81RSxJQUk5QixZQURBeUosS0FBS0MsV0FBV3hMLEdBQUs2TixFQUFRdEMsTUFJakNBLE1BQUtHLFVBQVksRUFFakI1RSxFQUFHSixFQUFRLFVBQVcxRixLQUFLdUssS0FBTSxTQUFVQyxHQUNuQ0QsS0FBS3VDLFVBR1R2QyxLQUFLaEQsVUFBVXZJLEVBQUd3TCxHQUNsQkQsS0FBSy9DLFlBR0wrQyxLQUFLckUsUUFDTEosRUFBR0osRUFBUSxRQUFTMUYsS0FBS3VLLEtBQU1BLEtBQUtyRSxVQUM3QnFFLEtBQUtsRSxPQUFPTCxPQUluQkYsRUFBR0osRUFBUSxRQUFTMUYsS0FBS3VLLEtBQU0sU0FBUy9KLEdBQ3BDK0osS0FBS2pFLEtBQUssUUFBUzlGLE1BSy9CTSxFQUFLNEUsRUFBTzVFLEdBQ1o2RSxFQUFNQyxFQUFTOUUsR0FLVjNCLFFBQVF5SyxFQUFVOUksS0FBTzZFLEdBQVFBLEVBQUk0QyxTQUN0QzdFLEVBQVFxSCxPQUFPckYsRUFBUTZFLFNBTS9CL0ssU0FBUytLLEtBQUtFLFdBQVl6SyxLQUFLdUssS0FBTSxTQUFVd0IsR0FDM0MsR0FBSXBHLEdBQU1wRyxPQUFPcUcsRUFBVW1HLEVBQVVqTCxHQUNqQzZFLEtBQVFBLEVBQUk0QyxTQUNaN0UsRUFBUXFILE9BQU9nQixFQUFXeEIsU0FJbENBLEtBQUtjLFVBQVcsRUFFaEJkLEtBQUsvQyxTQUdUMUIsR0FBSSxTQUFVcEUsRUFBTXFMLEdBQ2hCLEdBQUlDLEdBQU16QyxLQUFLbEUsT0FBTzNFLEVBQ2pCc0wsS0FDREEsRUFBTXpDLEtBQUtsRSxPQUFPM0UsT0FFdEJzTCxFQUFJbkcsS0FBS2tHLElBR2J6RyxLQUFNLFNBQVU1RSxFQUFNNEgsR0FDbEJ6SyxLQUFLMEwsS0FBS2xFLE9BQU8zRSxHQUFPLFNBQVVxTCxHQUM5QkEsRUFBR3pELEtBRU0sVUFBVDVILFNBSU82SSxNQUFLbEUsT0FBTzNFLEtBc0UvQmdDLEdBQ0loQixPQUFRQSxFQUNScEIsWUFBYUEsRUFDYnNFLFNBQVVBLEVBQ1ZSLFFBQVNBLEVBQ1Q2RSxXQUFZQSxFQUNackQsU0FBVUEsRUFDVkQsZUFDQWQsT0FBUUEsRUFDUnBCLGNBQWVBLEVBQ2Z3SSxTQUFVMUcsSUFBSTBHLFNBQ2RoSCxRQUFTQSxFQU1UaUgsVUFBVyxTQUFVQyxHQVNqQixHQVBJQSxFQUFJdEQsU0FDK0MsTUFBL0NzRCxFQUFJdEQsUUFBUTdHLE9BQU9tSyxFQUFJdEQsUUFBUTVLLE9BQVMsS0FDeENrTyxFQUFJdEQsU0FBVyxLQUtJLGdCQUFoQnNELEdBQUlDLFFBQXNCLENBQ2pDLEdBQUlBLEdBQVVELEVBQUlDLE9BQ2xCRCxHQUFJQyxRQUFVLFNBQVN0TSxFQUFJOEQsR0FDdkIsT0FBUUEsRUFBSUwsUUFBUSxRQUFTLEVBQUssSUFBTSxLQUFPNkksR0FNdkQsR0FBSXJELEdBQU9ySCxFQUFPcUgsS0FDZHNELEdBQ0l0SixPQUFPLEVBQ1ArRixTQUFTLEVBQ1RwSCxRQUFRLEVBQ1JELEtBQUssRUFHYmpELFVBQVMyTixFQUFLLFNBQVVyTixFQUFPVCxHQUN2QmdPLEVBQUtoTyxJQUNBcUQsRUFBT3JELEtBQ1JxRCxFQUFPckQsT0FFWEksTUFBTWlELEVBQU9yRCxHQUFPUyxHQUFPLEdBQU0sSUFFakM0QyxFQUFPckQsR0FBUVMsSUFLbkJxTixFQUFJckQsU0FDSnRLLFNBQVMyTixFQUFJckQsUUFBUyxTQUFVaEssRUFBT1QsR0FDbkNSLEtBQUtpQixFQUFPLFNBQVV3TixHQUNkQSxJQUFNak8sSUFDTjZLLEVBQVdvRCxHQUFLak8sT0FPNUI4TixFQUFJcEQsT0FDSnZLLFNBQVMyTixFQUFJcEQsS0FBTSxTQUFVakssRUFBT2dCLEdBRTVCbEMsUUFBUWtCLEtBQ1JBLEdBQ0lvTCxLQUFNcEwsS0FHVEEsRUFBTXFLLFVBQVdySyxFQUFNZ0osTUFBVWhKLEVBQU15TixZQUN4Q3pOLEVBQU15TixVQUFZN0osRUFBUThKLGdCQUFnQjFOLElBRTlDaUssRUFBS2pKLEdBQU1oQixJQUVmNEMsRUFBT3FILEtBQU9BLEdBSWRvRCxFQUFJTSxVQUNKNU8sS0FBS3NPLEVBQUlNLFNBQVUsU0FBVUMsR0FDekIsR0FBSUMsR0FBVWpNLENBRWRnTSxHQUEyQixnQkFBWEEsSUFBdUJoTSxLQUFNZ00sR0FBVUEsRUFFdkRoTSxFQUFPZ00sRUFBT2hNLEtBQ2RpTSxFQUFXRCxFQUFPQyxTQUNkQSxJQUNBakwsRUFBT3FCLE1BQU1yQyxHQUFRZ00sRUFBT0MsVUFRaENqTCxFQUFPVyxLQUFLM0IsR0FBUWdNLEVBQU9oTSxLQUFPLEtBQU9nTSxFQUFPRSxNQUFRLFFBQzFDN0ssUUFBUThLLGNBQWUsSUFDdkI5SyxRQUFRRixlQUFnQixNQU85Q3JELFNBQVNvRyxFQUFVLFNBQVVELEVBQUs3RSxHQUl6QjZFLEVBQUk2QyxRQUFXN0MsRUFBSWxELElBQUkrQyxlQUN4QkcsRUFBSWxELElBQU1nQyxFQUFjM0QsRUFBSSxNQUFNLE9BT3RDcU0sRUFBSWpDLE1BQVFpQyxFQUFJVyxXQUNoQnBLLEVBQVF6RixRQUFRa1AsRUFBSWpDLFNBQVlpQyxFQUFJVyxXQUk1Q04sZ0JBQWlCLFNBQVUxTixHQUN2QixRQUFTRyxLQUNMLEdBQUk4TixFQUlKLE9BSElqTyxHQUFNZ0osT0FDTmlGLEVBQU1qTyxFQUFNZ0osS0FBSzVJLE1BQU0vQixPQUFRZ0MsWUFFNUI0TixHQUFRak8sRUFBTXFLLFNBQVcxSixVQUFVWCxFQUFNcUssU0FFcEQsTUFBT2xLLElBR1hpRSxZQUFhLFNBQVU4SixFQUFRbkQsR0FHM0IsUUFBU3NCLEdBQWFqQixFQUFNNEMsRUFBVTVILEdBQ2xDLEdBQUlwRixHQUFJMkIsRUFBS3dMLENBTWIsT0FKSXBELEdBQVFJLHFCQUF1QjZDLEdBQVl0UCxXQUFXc1AsS0FDdERBLEVBQVNJLGtCQUFtQixHQUdaLGdCQUFUaEQsR0FDSDFNLFdBQVdzUCxHQUVKN0gsRUFBUXBGLFVBQVUsY0FBZSx3QkFBeUJxRixHQU1qRThILEdBQVU3TyxRQUFReUssRUFBVXNCLEdBQ3JCdEIsRUFBU3NCLEdBQU10RixFQUFTb0ksRUFBT2xOLEtBS3RDeUYsSUFBSTRILElBQ0c1SCxJQUFJNEgsSUFBSXpLLEVBQVN3SCxFQUFNOEMsRUFBUTdCLElBSTFDMUosRUFBTWdDLEVBQWN5RyxFQUFNOEMsR0FBUSxHQUFPLEdBQ3pDbE4sRUFBSzJCLEVBQUkzQixHQUVKM0IsUUFBUWlHLEVBQVN0RSxHQU9mc0UsRUFBUXRFLEdBTkptRixFQUFRcEYsVUFBVSxZQUFhLGdCQUMxQkMsRUFDQSwwQ0FDQVEsR0FDQzBNLEVBQVMsR0FBSyx5QkFNbkNyRSxJQUdBakcsRUFBUXVKLFNBQVMsV0FHYnRELElBRUFzRSxFQUFheEksRUFBVWhCLEVBQWMsS0FBTXVKLElBSTNDQyxFQUFXOUosUUFBVTBHLEVBQVExRyxRQUU3QjhKLEVBQVduRixLQUFLb0MsRUFBTTRDLEVBQVU1SCxHQUM1QnFDLFNBQVMsSUFHYmQsTUFHRzBFLEdBOEVYLE1BOUlBdEIsR0FBVUEsTUFtRVZwTCxNQUFNME0sR0FDRjVJLFVBQVdBLFVBT1g2SyxNQUFPLFNBQVVDLEdBQ2IsR0FBSUMsR0FDQWhLLEVBQVErSixFQUFrQkUsWUFBWSxLQUN0Q0MsRUFBVUgsRUFBa0IxTixNQUFNLEtBQUssR0FDdkM4TixFQUF5QixNQUFaRCxHQUErQixPQUFaQSxDQVNwQyxPQUxJbEssTUFBVSxLQUFRbUssR0FBY25LLEVBQVEsS0FDeENnSyxFQUFNRCxFQUFrQjdKLFVBQVVGLEVBQU8rSixFQUFrQnBQLFFBQzNEb1AsRUFBb0JBLEVBQWtCN0osVUFBVSxFQUFHRixJQUdoRFosRUFBUTJCLFVBQVU1RCxFQUFVNE0sRUFDWEwsR0FBVUEsRUFBT2xOLElBQUksR0FBT3dOLEdBQU0sSUFHOURsSixRQUFTLFNBQVV0RSxHQUNmLE1BQU8zQixTQUFRaUcsRUFBU1gsRUFBYzNELEVBQUlrTixHQUFRLEdBQU8sR0FBTWxOLEtBR25FNE4sVUFBVyxTQUFVNU4sR0FFakIsTUFEQUEsR0FBSzJELEVBQWMzRCxFQUFJa04sR0FBUSxHQUFPLEdBQU1sTixHQUNyQzNCLFFBQVFpRyxFQUFTdEUsSUFBTzNCLFFBQVF5RyxFQUFVOUUsTUFLcERrTixJQUNEN0IsRUFBYWxJLE1BQVEsU0FBVW5ELEdBRzNCMEYsR0FFQSxJQUFJL0QsR0FBTWdDLEVBQWMzRCxFQUFJa04sR0FBUSxHQUNoQ3JJLEVBQU1wRyxPQUFPcUcsRUFBVTlFLEVBRTNCNkUsR0FBSW1ILFNBQVUsRUFDZHhKLEVBQWF4QyxTQUVOc0UsR0FBUXRFLFNBQ1JtSixHQUFXeEgsRUFBSW1DLFdBQ2ZvRixHQUFZbEosR0FLbkI1QixZQUFZMEgsRUFBVSxTQUFTaUMsRUFBTTdKLEdBQzdCNkosRUFBSyxLQUFPL0gsR0FDWjhGLEVBQVNwRixPQUFPeEMsRUFBRyxXQUdwQjBFLEdBQVFpRCxZQUFZN0YsR0FFdkI2RSxJQUlJQSxFQUFJVSxPQUFPakIsVUFDWDRFLEVBQVlsSixHQUFNNkUsRUFBSVUsUUFHMUJTLEVBQWNoRyxNQUtuQnFMLEdBU1hwQixPQUFRLFNBQVVyRixHQUNkLEdBQUlDLEdBQU1wRyxPQUFPcUcsRUFBVUYsRUFBTzVFLEdBQzlCNkUsSUFDQUYsRUFBVUMsR0FBUXFGLFVBVTFCNkIsYUFBYyxTQUFVTCxHQUNwQixHQUFJb0MsR0FBTzlGLEVBQU1sRCxFQUNib0UsRUFBT3hLLE9BQU9tRCxFQUFPcUgsS0FBTXdDLE9BQzNCcUMsRUFBWTdFLEVBQUtJLE9BSXJCLEtBRkEzRCxJQUVPSSxFQUFTM0gsUUFBUSxDQUVwQixHQURBNEosRUFBT2pDLEVBQVM1QyxRQUNBLE9BQVo2RSxFQUFLLEdBQWEsQ0FLbEIsR0FKQUEsRUFBSyxHQUFLMEQsRUFJTm9DLEVBQ0EsS0FFSkEsSUFBUSxNQUNEOUYsR0FBSyxLQUFPMEQsSUFFbkJvQyxHQUFRLEVBR1ovRixHQUFjQyxHQVFsQixHQU5BbkYsRUFBUWlELGVBSVJoQixFQUFNcEcsT0FBT3FHLEVBQVUyRyxJQUVsQm9DLElBQVV4UCxRQUFRaUcsRUFBU21ILElBQWU1RyxJQUFRQSxFQUFJNkMsT0FBUSxDQUMvRCxNQUFJOUYsRUFBT21NLGVBQW1CRCxHQUFjbk8sVUFBVW1PLElBQ2xELE1BQUkvSyxHQUFnQjBJLEdBQ2hCLE9BRU90RyxFQUFRcEYsVUFBVSxXQUNSLHNCQUF3QjBMLEVBQ3hCLE1BQ0NBLElBS3RCM0QsSUFBZTJELEVBQWF4QyxFQUFLbUIsU0FBYW5CLEVBQUt3RCxZQUkzRDlGLEtBVUpwQyxVQUFXLFNBQVVrSCxFQUFZK0IsRUFBS1EsR0FDbEMsR0FBSS9LLEdBQU9nTCxFQUFNL1AsRUFBR2dRLEVBQWNwSyxFQUM5QnFLLEVBQVkvQyxFQUNackssRUFBVXRDLE9BQU9tRCxFQUFPVyxLQUFNa0osRUFRbEMsSUFOSTFLLElBQ0EwSyxFQUFhMUssR0FHakJxSyxFQUFXM00sT0FBTzJLLEVBQVlxQyxHQUcxQixNQUFPN0ksR0FBUTJCLFVBQVU2RyxFQUFVb0MsRUFBS1EsRUFPNUMsSUFBSXZJLElBQUkySSxZQUFZcE0sS0FBS3lKLEdBSXJCM0gsRUFBTTJILEdBQWMrQixHQUFPLFFBQ3hCLENBUUgsSUFOQXZLLEVBQVFyQixFQUFPcUIsTUFFZmdMLEVBQU94QyxFQUFXNUwsTUFBTSxLQUluQjNCLEVBQUkrUCxFQUFLOVAsT0FBUUQsRUFBSSxFQUFHQSxHQUFLLEVBSTlCLEdBSEFnUSxFQUFlRCxFQUFLOUwsTUFBTSxFQUFHakUsR0FBR21FLEtBQUssS0FFckM4TCxFQUFhMVAsT0FBT3dFLEVBQU9pTCxHQUNYLENBR1JwUSxRQUFRcVEsS0FDUkEsRUFBYUEsRUFBVyxJQUU1QkYsRUFBS3ZOLE9BQU8sRUFBR3hDLEVBQUdpUSxFQUNsQixPQUtSckssRUFBTW1LLEVBQUs1TCxLQUFLLEtBQ2hCeUIsR0FBUTBKLElBQVEscUJBQXFCeEwsS0FBSzhCLElBQVFrSyxFQUFVLEdBQUssT0FDakVsSyxHQUF5QixNQUFsQkEsRUFBSTVCLE9BQU8sSUFBYzRCLEVBQUl0RyxNQUFNLGlCQUFtQixHQUFLb0UsRUFBT21ILFNBQVdqRixFQUd4RixNQUFPbEMsR0FBTzBLLFVBQVksVUFBVXRLLEtBQUs4QixHQUNsQ0EsRUFBTWxDLEVBQU8wSyxRQUFRYixFQUFZM0gsR0FBT0EsR0FLbkR3RyxLQUFNLFNBQVV0SyxFQUFJOEQsR0FDaEIyQixJQUFJNkUsS0FBSzFILEVBQVM1QyxFQUFJOEQsSUFVMUI0RyxPQUFRLFNBQVU5SixFQUFNb00sRUFBVWpGLEVBQU1zQixHQUNwQyxNQUFPMkQsR0FBUzVOLE1BQU1pSyxFQUFTdEIsSUFTbkNZLGFBQWMsU0FBVUgsR0FJcEIsR0FBaUIsU0FBYkEsRUFBSTZGLE1BQ0NDLFlBQVl0TSxNQUFNd0csRUFBSUMsZUFBaUJELEVBQUlFLFlBQVk2RixZQUFjLENBRzFFQyxrQkFBb0IsSUFHcEIsSUFBSUMsR0FBT2xHLEVBQWNDLEVBQ3pCNUYsR0FBUWtKLGFBQWEyQyxFQUFLek8sTUFPbEM0SSxjQUFlLFNBQVVKLEdBQ3JCLEdBQUlpRyxHQUFPbEcsRUFBY0MsRUFDekIsS0FBS3pGLEVBQWdCMEwsRUFBS3pPLElBQUssQ0FDM0IsR0FBSTBPLEtBV0osT0FWQWhRLFVBQVNvRyxFQUFVLFNBQVM5RixFQUFPMlAsR0FDSixJQUF2QkEsRUFBSWxMLFFBQVEsUUFDWjFGLEtBQUtpQixFQUFNcUgsUUFBUyxTQUFTekIsR0FDekIsR0FBSUEsRUFBTzVFLEtBQU95TyxFQUFLek8sR0FFbkIsTUFEQTBPLEdBQVEzSSxLQUFLNEksSUFDTixNQUtoQnhKLEVBQVFwRixVQUFVLGNBQWUscUJBQXVCME8sRUFBS3pPLElBQzFDME8sRUFBUXZRLE9BQ1QsaUJBQW1CdVEsRUFBUXJNLEtBQUssTUFDaEMsS0FBTW1HLEdBQU1pRyxFQUFLek8sU0FLdEQ0QyxFQUFRekYsUUFBVXlGLEVBQVFRLGNBQ25CUixFQXNQWCxRQUFTZ00sd0JBQ0wsTUFBSUosb0JBQXNELGdCQUFqQ0Esa0JBQWtCRCxXQUNoQ0MsbUJBR1hwUSxZQUFZa0IsVUFBVyxTQUFVdVAsR0FDN0IsR0FBMEIsZ0JBQXRCQSxFQUFPTixXQUNQLE1BQVFDLG1CQUFvQkssSUFHN0JMLG1CQXA4RFgsR0FBSS9JLEtBQUtxSixFQUFHQyxLQUFNQyxZQUFhQyxTQUFVQyxJQUNyQ1Ysa0JBQW1CVyxzQkFBdUJDLFdBQVlDLFFBQ3REQyxRQUFVLFFBQ1ZDLGNBQWdCLHdDQUNoQkMsaUJBQW1CLGlEQUNuQnpOLGVBQWlCLFFBQ2pCZ0wsY0FBZ0IsUUFDaEIwQyxHQUFLQyxPQUFPN0YsVUFDWmpNLFFBQVU2UixHQUFHRSxTQUNiblIsT0FBU2lSLEdBQUdHLGVBQ1puTixZQUFpQyxtQkFBWG9OLFNBQStDLG1CQUFkQyxhQUE2QkQsT0FBT3RRLFVBQzNGcUksYUFBZW5GLFdBQXNDLG1CQUFsQnNOLGVBS25DekIsWUFBYzdMLFdBQW9DLGtCQUF2QnFOLFVBQVVFLFNBQ3ZCLGFBQWUsc0JBQzdCQyxlQUFpQixJQUVqQjVILFFBQTJCLG1CQUFWNkgsUUFBOEMsbUJBQXJCQSxNQUFNUCxXQUNoRFEsWUFDQTlELE9BQ0ExRyxrQkFDQWlHLGdCQUFpQixDQTZJckIsSUFBc0IsbUJBQVh4TyxRQUFYLENBTUEsR0FBeUIsbUJBQWRGLFdBQTJCLENBQ2xDLEdBQUlRLFdBQVdSLFdBRVgsTUFFSm1QLEtBQU1uUCxVQUNOQSxVQUFZeU4sT0FJTyxtQkFBWnhOLFVBQTRCTyxXQUFXUCxXQUU5Q2tQLElBQU1sUCxRQUNOQSxRQUFVd04sUUE2aERkbEYsSUFBTXZJLFVBQVksU0FBVWtOLEVBQU00QyxFQUFVNUgsRUFBU2dMLEdBR2pELEdBQUl4TixHQUFTaEIsRUFDVHBCLEVBQWN5UCxjQTZCbEIsT0ExQktuUyxTQUFRc00sSUFBeUIsZ0JBQVRBLEtBRXpCeEksRUFBU3dJLEVBQ0x0TSxRQUFRa1AsSUFFUjVDLEVBQU80QyxFQUNQQSxFQUFXNUgsRUFDWEEsRUFBVWdMLEdBRVZoRyxNQUlKeEksR0FBVUEsRUFBT2dCLFVBQ2pCcEMsRUFBY29CLEVBQU9nQixTQUd6QkEsRUFBVW5FLE9BQU8wUixTQUFVM1AsR0FDdEJvQyxJQUNEQSxFQUFVdU4sU0FBUzNQLEdBQWVpRixJQUFJcUosRUFBRXZPLFdBQVdDLElBR25Eb0IsR0FDQWdCLEVBQVF3SixVQUFVeEssR0FHZmdCLEVBQVF6RixRQUFRaU4sRUFBTTRDLEVBQVU1SCxJQU8zQ0ssSUFBSTdELE9BQVMsU0FBVUEsR0FDbkIsTUFBTzZELEtBQUk3RCxJQVNmNkQsSUFBSTBHLFNBQWlDLG1CQUFmN08sWUFBNkIsU0FBVTZCLEdBQ3pEN0IsV0FBVzZCLEVBQUksSUFDZixTQUFVQSxHQUFNQSxLQUtmaEMsVUFDREEsUUFBVXNJLEtBR2RBLElBQUk2SixRQUFVQSxRQUdkN0osSUFBSTJJLFlBQWMsaUJBQ2xCM0ksSUFBSWhELFVBQVlBLFVBQ2hCcU0sRUFBSXJKLElBQUlxSixHQUNKcUIsU0FBVUEsU0FDVjVQLFdBQVlBLFlBSWhCa0YsUUFHQTFILE1BQ0ksUUFDQSxRQUNBLFVBQ0EsYUFDRCxTQUFVUSxHQUlUa0gsSUFBSWxILEdBQVEsV0FDUixHQUFJOFIsR0FBTUYsU0FBU0YsZUFDbkIsT0FBT0ksR0FBSWxULFFBQVFvQixHQUFNYSxNQUFNaVIsRUFBS2hSLGNBSXhDb0QsWUFDQXNNLEtBQU9ELEVBQUVDLEtBQU94UCxTQUFTQyxxQkFBcUIsUUFBUSxHQUl0RHdQLFlBQWN6UCxTQUFTQyxxQkFBcUIsUUFBUSxHQUNoRHdQLGNBQ0FELEtBQU9ELEVBQUVDLEtBQU9DLFlBQVluTSxhQVNwQzRDLElBQUlOLFFBQVUxRixlQUtkZ0csSUFBSTZLLFdBQWEsU0FBVTFPLEVBQVE2SixFQUFZM0gsR0FDM0MsR0FBSW9FLEdBQU90RyxFQUFPMk8sTUFDVmhSLFNBQVNpUixnQkFBZ0IsK0JBQWdDLGVBQ3pEalIsU0FBU2tSLGNBQWMsU0FJL0IsT0FIQXZJLEdBQUttRyxLQUFPek0sRUFBTzhPLFlBQWMsa0JBQ2pDeEksRUFBS3lJLFFBQVUsUUFDZnpJLEVBQUswSSxPQUFRLEVBQ04xSSxHQVlYekMsSUFBSTZFLEtBQU8sU0FBVTFILEVBQVM2SSxFQUFZM0gsR0FDdEMsR0FDSW9FLEdBREF0RyxFQUFVZ0IsR0FBV0EsRUFBUWhCLFVBRWpDLElBQUlhLFVBb0VBLE1BbEVBeUYsR0FBT3pDLElBQUk2SyxXQUFXMU8sRUFBUTZKLEVBQVkzSCxHQUUxQ29FLEVBQUsySSxhQUFhLHNCQUF1QmpPLEVBQVFwQyxhQUNqRDBILEVBQUsySSxhQUFhLHFCQUFzQnBGLElBVXBDdkQsRUFBSzRJLGFBUUM1SSxFQUFLNEksWUFBWW5CLFVBQVl6SCxFQUFLNEksWUFBWW5CLFdBQVdsTSxRQUFRLGdCQUFrQixHQUNwRjRFLFNBcUJMSCxFQUFLNkksaUJBQWlCLE9BQVFuTyxFQUFRK0YsY0FBYyxHQUNwRFQsRUFBSzZJLGlCQUFpQixRQUFTbk8sRUFBUWdHLGVBQWUsS0FoQnREZ0QsZ0JBQWlCLEVBRWpCMUQsRUFBSzRJLFlBQVkscUJBQXNCbE8sRUFBUStGLGVBZ0JuRFQsRUFBS2dILElBQU1wTCxFQUlQbEMsRUFBT29QLGVBQ1BwUCxFQUFPb1AsY0FBYzlJLEVBQU10RyxFQUFRNkosRUFBWTNILEdBT25EcUwsc0JBQXdCakgsRUFDcEI4RyxZQUNBRCxLQUFLa0MsYUFBYS9JLEVBQU04RyxhQUV4QkQsS0FBS21DLFlBQVloSixHQUVyQmlILHNCQUF3QixLQUVqQmpILENBQ0osSUFBSU4sWUFDUCxJQVdJdEssV0FBVyxhQUFlLEdBQzFCeVMsY0FBY2pNLEdBR2RsQixFQUFRa0osYUFBYUwsR0FDdkIsTUFBT3RMLEdBQ0x5QyxFQUFRdUMsUUFBUXBGLFVBQVUsZ0JBQ1YsNEJBQ0kwTCxFQUFhLE9BQVMzSCxFQUMxQjNELEdBQ0NzTCxPQW1CekJoSixZQUFjNEosSUFBSThFLGNBRWxCL1MsWUFBWWtCLFVBQVcsU0FBVXVQLEdBVzdCLEdBUktFLE9BQ0RBLEtBQU9GLEVBQU9oTSxZQU1sQm9NLFNBQVdKLEVBQU9sTSxhQUFhLGFBOEIzQixNQTNCQXlNLFlBQWFILFNBS1I1QyxJQUFJdEQsU0FBV3FHLFdBQVczTCxRQUFRLFFBQVMsSUFHNUN5TCxJQUFNRSxXQUFXdlAsTUFBTSxLQUN2QnVQLFdBQWFGLElBQUlrQyxNQUNqQi9CLFFBQVVILElBQUkvUSxPQUFTK1EsSUFBSTdNLEtBQUssS0FBUSxJQUFNLEtBRTlDZ0ssSUFBSXRELFFBQVVzRyxTQUtsQkQsV0FBYUEsV0FBV25OLFFBQVFGLGVBQWdCLElBRzVDMEQsSUFBSTJJLFlBQVlwTSxLQUFLb04sY0FDckJBLFdBQWFILFVBSWpCNUMsSUFBSWpDLEtBQU9pQyxJQUFJakMsS0FBT2lDLElBQUlqQyxLQUFLaEksT0FBT2dOLGFBQWVBLGFBRTlDLElBWW5CaFMsT0FBUyxTQUFVd0QsRUFBTXdKLEVBQU00QyxHQUMzQixHQUFJOUUsR0FBTXRGLENBR1UsaUJBQVRoQyxLQUVQb00sRUFBVzVDLEVBQ1hBLEVBQU94SixFQUNQQSxFQUFPLE1BSU45QyxRQUFRc00sS0FDVDRDLEVBQVc1QyxFQUNYQSxFQUFPLE9BS05BLEdBQVExTSxXQUFXc1AsS0FDcEI1QyxLQUlJNEMsRUFBUzdPLFNBQ1Q2TyxFQUNLMkMsV0FDQTFOLFFBQVFzTixjQUFlaFMsZ0JBQ3ZCMEUsUUFBUXVOLGlCQUFrQixTQUFVaFMsRUFBTytJLEdBQ3hDNkQsRUFBS3JFLEtBQUtRLEtBUWxCNkQsR0FBNEIsSUFBcEI0QyxFQUFTN08sUUFBZ0IsWUFBYyxVQUFXLFVBQVcsV0FBV2lFLE9BQU9nSSxLQU0zRndCLGlCQUNBMUQsRUFBT2lILHVCQUF5QlAsdUJBQzVCMUcsSUFDS3RILElBQ0RBLEVBQU9zSCxFQUFLdkYsYUFBYSx1QkFFN0JDLEVBQVV1TixTQUFTakksRUFBS3ZGLGFBQWEsMEJBVXpDQyxHQUNBQSxFQUFRa0QsU0FBU0MsTUFBTW5GLEVBQU13SixFQUFNNEMsSUFDbkNwSyxFQUFRaUQsWUFBWWpGLElBQVEsR0FFNUIrRSxlQUFlSSxNQUFNbkYsRUFBTXdKLEVBQU00QyxLQUl6QzVQLE9BQU9pVSxLQUNIQyxRQUFRLEdBU1o3TCxJQUFJb0csS0FBTyxTQUFVTixNQUVqQixNQUFPZ0csTUFBS2hHLE9BSWhCOUYsSUFBSTRHLE9BQ041QyxLQUFNbk0iLCJmaWxlIjoicmVxdWlyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiB2aW06IGV0OnRzPTQ6c3c9NDpzdHM9NFxyXG4gKiBAbGljZW5zZSBSZXF1aXJlSlMgMi4zLjEgQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMuXHJcbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlLCBodHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9ibG9iL21hc3Rlci9MSUNFTlNFXHJcbiAqL1xyXG4vL05vdCB1c2luZyBzdHJpY3Q6IHVuZXZlbiBzdHJpY3Qgc3VwcG9ydCBpbiBicm93c2VycywgIzM5MiwgYW5kIGNhdXNlc1xyXG4vL3Byb2JsZW1zIHdpdGggcmVxdWlyZWpzLmV4ZWMoKS90cmFuc3BpbGVyIHBsdWdpbnMgdGhhdCBtYXkgbm90IGJlIHN0cmljdC5cclxuLypqc2xpbnQgcmVnZXhwOiB0cnVlLCBub21lbjogdHJ1ZSwgc2xvcHB5OiB0cnVlICovXHJcbi8qZ2xvYmFsIHdpbmRvdywgbmF2aWdhdG9yLCBkb2N1bWVudCwgaW1wb3J0U2NyaXB0cywgc2V0VGltZW91dCwgb3BlcmEgKi9cclxuXHJcbnZhciByZXF1aXJlanMsIHJlcXVpcmUsIGRlZmluZTtcclxuKGZ1bmN0aW9uIChnbG9iYWwsIHNldFRpbWVvdXQpIHtcclxuICAgIHZhciByZXEsIHMsIGhlYWQsIGJhc2VFbGVtZW50LCBkYXRhTWFpbiwgc3JjLFxyXG4gICAgICAgIGludGVyYWN0aXZlU2NyaXB0LCBjdXJyZW50bHlBZGRpbmdTY3JpcHQsIG1haW5TY3JpcHQsIHN1YlBhdGgsXHJcbiAgICAgICAgdmVyc2lvbiA9ICcyLjMuMScsXHJcbiAgICAgICAgY29tbWVudFJlZ0V4cCA9IC9cXC9cXCpbXFxzXFxTXSo/XFwqXFwvfChbXjpcIic9XXxeKVxcL1xcLy4qJC9tZyxcclxuICAgICAgICBjanNSZXF1aXJlUmVnRXhwID0gL1teLl1cXHMqcmVxdWlyZVxccypcXChcXHMqW1wiJ10oW14nXCJcXHNdKylbXCInXVxccypcXCkvZyxcclxuICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXC5qcyQvLFxyXG4gICAgICAgIGN1cnJEaXJSZWdFeHAgPSAvXlxcLlxcLy8sXHJcbiAgICAgICAgb3AgPSBPYmplY3QucHJvdG90eXBlLFxyXG4gICAgICAgIG9zdHJpbmcgPSBvcC50b1N0cmluZyxcclxuICAgICAgICBoYXNPd24gPSBvcC5oYXNPd25Qcm9wZXJ0eSxcclxuICAgICAgICBpc0Jyb3dzZXIgPSAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQpLFxyXG4gICAgICAgIGlzV2ViV29ya2VyID0gIWlzQnJvd3NlciAmJiB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcsXHJcbiAgICAgICAgLy9QUzMgaW5kaWNhdGVzIGxvYWRlZCBhbmQgY29tcGxldGUsIGJ1dCBuZWVkIHRvIHdhaXQgZm9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy9zcGVjaWZpY2FsbHkuIFNlcXVlbmNlIGlzICdsb2FkaW5nJywgJ2xvYWRlZCcsIGV4ZWN1dGlvbixcclxuICAgICAgICAvLyB0aGVuICdjb21wbGV0ZScuIFRoZSBVQSBjaGVjayBpcyB1bmZvcnR1bmF0ZSwgYnV0IG5vdCBzdXJlIGhvd1xyXG4gICAgICAgIC8vdG8gZmVhdHVyZSB0ZXN0IHcvbyBjYXVzaW5nIHBlcmYgaXNzdWVzLlxyXG4gICAgICAgIHJlYWR5UmVnRXhwID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ1BMQVlTVEFUSU9OIDMnID9cclxuICAgICAgICAgICAgICAgICAgICAgIC9eY29tcGxldGUkLyA6IC9eKGNvbXBsZXRlfGxvYWRlZCkkLyxcclxuICAgICAgICBkZWZDb250ZXh0TmFtZSA9ICdfJyxcclxuICAgICAgICAvL09oIHRoZSB0cmFnZWR5LCBkZXRlY3Rpbmcgb3BlcmEuIFNlZSB0aGUgdXNhZ2Ugb2YgaXNPcGVyYSBmb3IgcmVhc29uLlxyXG4gICAgICAgIGlzT3BlcmEgPSB0eXBlb2Ygb3BlcmEgIT09ICd1bmRlZmluZWQnICYmIG9wZXJhLnRvU3RyaW5nKCkgPT09ICdbb2JqZWN0IE9wZXJhXScsXHJcbiAgICAgICAgY29udGV4dHMgPSB7fSxcclxuICAgICAgICBjZmcgPSB7fSxcclxuICAgICAgICBnbG9iYWxEZWZRdWV1ZSA9IFtdLFxyXG4gICAgICAgIHVzZUludGVyYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgLy9Db3VsZCBtYXRjaCBzb21ldGhpbmcgbGlrZSAnKS8vY29tbWVudCcsIGRvIG5vdCBsb3NlIHRoZSBwcmVmaXggdG8gY29tbWVudC5cclxuICAgIGZ1bmN0aW9uIGNvbW1lbnRSZXBsYWNlKG1hdGNoLCBzaW5nbGVQcmVmaXgpIHtcclxuICAgICAgICByZXR1cm4gc2luZ2xlUHJlZml4IHx8ICcnO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGlzRnVuY3Rpb24oaXQpIHtcclxuICAgICAgICByZXR1cm4gb3N0cmluZy5jYWxsKGl0KSA9PT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBpc0FycmF5KGl0KSB7XHJcbiAgICAgICAgcmV0dXJuIG9zdHJpbmcuY2FsbChpdCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGl0ZXJhdGluZyBvdmVyIGFuIGFycmF5LiBJZiB0aGUgZnVuYyByZXR1cm5zXHJcbiAgICAgKiBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBlYWNoKGFyeSwgZnVuYykge1xyXG4gICAgICAgIGlmIChhcnkpIHtcclxuICAgICAgICAgICAgdmFyIGk7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBhcnkubGVuZ3RoOyBpICs9IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmdW5jdGlvbiBmb3IgaXRlcmF0aW5nIG92ZXIgYW4gYXJyYXkgYmFja3dhcmRzLiBJZiB0aGUgZnVuY1xyXG4gICAgICogcmV0dXJucyBhIHRydWUgdmFsdWUsIGl0IHdpbGwgYnJlYWsgb3V0IG9mIHRoZSBsb29wLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBlYWNoUmV2ZXJzZShhcnksIGZ1bmMpIHtcclxuICAgICAgICBpZiAoYXJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBpO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSBhcnkubGVuZ3RoIC0gMTsgaSA+IC0xOyBpIC09IDEpIHtcclxuICAgICAgICAgICAgICAgIGlmIChhcnlbaV0gJiYgZnVuYyhhcnlbaV0sIGksIGFyeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBoYXNQcm9wKG9iaiwgcHJvcCkge1xyXG4gICAgICAgIHJldHVybiBoYXNPd24uY2FsbChvYmosIHByb3ApO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE93bihvYmosIHByb3ApIHtcclxuICAgICAgICByZXR1cm4gaGFzUHJvcChvYmosIHByb3ApICYmIG9ialtwcm9wXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEN5Y2xlcyBvdmVyIHByb3BlcnRpZXMgaW4gYW4gb2JqZWN0IGFuZCBjYWxscyBhIGZ1bmN0aW9uIGZvciBlYWNoXHJcbiAgICAgKiBwcm9wZXJ0eSB2YWx1ZS4gSWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgYSB0cnV0aHkgdmFsdWUsIHRoZW4gdGhlXHJcbiAgICAgKiBpdGVyYXRpb24gaXMgc3RvcHBlZC5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZWFjaFByb3Aob2JqLCBmdW5jKSB7XHJcbiAgICAgICAgdmFyIHByb3A7XHJcbiAgICAgICAgZm9yIChwcm9wIGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAoaGFzUHJvcChvYmosIHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZnVuYyhvYmpbcHJvcF0sIHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTaW1wbGUgZnVuY3Rpb24gdG8gbWl4IGluIHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgaW50byB0YXJnZXQsXHJcbiAgICAgKiBidXQgb25seSBpZiB0YXJnZXQgZG9lcyBub3QgYWxyZWFkeSBoYXZlIGEgcHJvcGVydHkgb2YgdGhlIHNhbWUgbmFtZS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWl4aW4odGFyZ2V0LCBzb3VyY2UsIGZvcmNlLCBkZWVwU3RyaW5nTWl4aW4pIHtcclxuICAgICAgICBpZiAoc291cmNlKSB7XHJcbiAgICAgICAgICAgIGVhY2hQcm9wKHNvdXJjZSwgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9yY2UgfHwgIWhhc1Byb3AodGFyZ2V0LCBwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWVwU3RyaW5nTWl4aW4gJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAhaXNBcnJheSh2YWx1ZSkgJiYgIWlzRnVuY3Rpb24odmFsdWUpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICEodmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFtwcm9wXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWl4aW4odGFyZ2V0W3Byb3BdLCB2YWx1ZSwgZm9yY2UsIGRlZXBTdHJpbmdNaXhpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgIH1cclxuXHJcbiAgICAvL1NpbWlsYXIgdG8gRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIGJ1dCB0aGUgJ3RoaXMnIG9iamVjdCBpcyBzcGVjaWZpZWRcclxuICAgIC8vZmlyc3QsIHNpbmNlIGl0IGlzIGVhc2llciB0byByZWFkL2ZpZ3VyZSBvdXQgd2hhdCAndGhpcycgd2lsbCBiZS5cclxuICAgIGZ1bmN0aW9uIGJpbmQob2JqLCBmbikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzY3JpcHRzKCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVmYXVsdE9uRXJyb3IoZXJyKSB7XHJcbiAgICAgICAgdGhyb3cgZXJyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vQWxsb3cgZ2V0dGluZyBhIGdsb2JhbCB0aGF0IGlzIGV4cHJlc3NlZCBpblxyXG4gICAgLy9kb3Qgbm90YXRpb24sIGxpa2UgJ2EuYi5jJy5cclxuICAgIGZ1bmN0aW9uIGdldEdsb2JhbCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdmFsdWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZyA9IGdsb2JhbDtcclxuICAgICAgICBlYWNoKHZhbHVlLnNwbGl0KCcuJyksIGZ1bmN0aW9uIChwYXJ0KSB7XHJcbiAgICAgICAgICAgIGcgPSBnW3BhcnRdO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0cyBhbiBlcnJvciB3aXRoIGEgcG9pbnRlciB0byBhbiBVUkwgd2l0aCBtb3JlIGluZm9ybWF0aW9uLlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGlkIHRoZSBlcnJvciBJRCB0aGF0IG1hcHMgdG8gYW4gSUQgb24gYSB3ZWIgcGFnZS5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlIGh1bWFuIHJlYWRhYmxlIGVycm9yLlxyXG4gICAgICogQHBhcmFtIHtFcnJvcn0gW2Vycl0gdGhlIG9yaWdpbmFsIGVycm9yLCBpZiB0aGVyZSBpcyBvbmUuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMge0Vycm9yfVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBtYWtlRXJyb3IoaWQsIG1zZywgZXJyLCByZXF1aXJlTW9kdWxlcykge1xyXG4gICAgICAgIHZhciBlID0gbmV3IEVycm9yKG1zZyArICdcXG5odHRwOi8vcmVxdWlyZWpzLm9yZy9kb2NzL2Vycm9ycy5odG1sIycgKyBpZCk7XHJcbiAgICAgICAgZS5yZXF1aXJlVHlwZSA9IGlkO1xyXG4gICAgICAgIGUucmVxdWlyZU1vZHVsZXMgPSByZXF1aXJlTW9kdWxlcztcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgIGUub3JpZ2luYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGU7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy9JZiBhIGRlZmluZSBpcyBhbHJlYWR5IGluIHBsYXkgdmlhIGFub3RoZXIgQU1EIGxvYWRlcixcclxuICAgICAgICAvL2RvIG5vdCBvdmVyd3JpdGUuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgcmVxdWlyZWpzICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKHJlcXVpcmVqcykpIHtcclxuICAgICAgICAgICAgLy9EbyBub3Qgb3ZlcndyaXRlIGFuIGV4aXN0aW5nIHJlcXVpcmVqcyBpbnN0YW5jZS5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjZmcgPSByZXF1aXJlanM7XHJcbiAgICAgICAgcmVxdWlyZWpzID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vQWxsb3cgZm9yIGEgcmVxdWlyZSBjb25maWcgb2JqZWN0XHJcbiAgICBpZiAodHlwZW9mIHJlcXVpcmUgIT09ICd1bmRlZmluZWQnICYmICFpc0Z1bmN0aW9uKHJlcXVpcmUpKSB7XHJcbiAgICAgICAgLy9hc3N1bWUgaXQgaXMgYSBjb25maWcgb2JqZWN0LlxyXG4gICAgICAgIGNmZyA9IHJlcXVpcmU7XHJcbiAgICAgICAgcmVxdWlyZSA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBuZXdDb250ZXh0KGNvbnRleHROYW1lKSB7XHJcbiAgICAgICAgdmFyIGluQ2hlY2tMb2FkZWQsIE1vZHVsZSwgY29udGV4dCwgaGFuZGxlcnMsXHJcbiAgICAgICAgICAgIGNoZWNrTG9hZGVkVGltZW91dElkLFxyXG4gICAgICAgICAgICBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAvL0RlZmF1bHRzLiBEbyBub3Qgc2V0IGEgZGVmYXVsdCBmb3IgbWFwXHJcbiAgICAgICAgICAgICAgICAvL2NvbmZpZyB0byBzcGVlZCB1cCBub3JtYWxpemUoKSwgd2hpY2hcclxuICAgICAgICAgICAgICAgIC8vd2lsbCBydW4gZmFzdGVyIGlmIHRoZXJlIGlzIG5vIGRlZmF1bHQuXHJcbiAgICAgICAgICAgICAgICB3YWl0U2Vjb25kczogNyxcclxuICAgICAgICAgICAgICAgIGJhc2VVcmw6ICcuLycsXHJcbiAgICAgICAgICAgICAgICBwYXRoczoge30sXHJcbiAgICAgICAgICAgICAgICBidW5kbGVzOiB7fSxcclxuICAgICAgICAgICAgICAgIHBrZ3M6IHt9LFxyXG4gICAgICAgICAgICAgICAgc2hpbToge30sXHJcbiAgICAgICAgICAgICAgICBjb25maWc6IHt9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5ID0ge30sXHJcbiAgICAgICAgICAgIC8vcmVnaXN0cnkgb2YganVzdCBlbmFibGVkIG1vZHVsZXMsIHRvIHNwZWVkXHJcbiAgICAgICAgICAgIC8vY3ljbGUgYnJlYWtpbmcgY29kZSB3aGVuIGxvdHMgb2YgbW9kdWxlc1xyXG4gICAgICAgICAgICAvL2FyZSByZWdpc3RlcmVkLCBidXQgbm90IGFjdGl2YXRlZC5cclxuICAgICAgICAgICAgZW5hYmxlZFJlZ2lzdHJ5ID0ge30sXHJcbiAgICAgICAgICAgIHVuZGVmRXZlbnRzID0ge30sXHJcbiAgICAgICAgICAgIGRlZlF1ZXVlID0gW10sXHJcbiAgICAgICAgICAgIGRlZmluZWQgPSB7fSxcclxuICAgICAgICAgICAgdXJsRmV0Y2hlZCA9IHt9LFxyXG4gICAgICAgICAgICBidW5kbGVzTWFwID0ge30sXHJcbiAgICAgICAgICAgIHJlcXVpcmVDb3VudGVyID0gMSxcclxuICAgICAgICAgICAgdW5ub3JtYWxpemVkQ291bnRlciA9IDE7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRyaW1zIHRoZSAuIGFuZCAuLiBmcm9tIGFuIGFycmF5IG9mIHBhdGggc2VnbWVudHMuXHJcbiAgICAgICAgICogSXQgd2lsbCBrZWVwIGEgbGVhZGluZyBwYXRoIHNlZ21lbnQgaWYgYSAuLiB3aWxsIGJlY29tZVxyXG4gICAgICAgICAqIHRoZSBmaXJzdCBwYXRoIHNlZ21lbnQsIHRvIGhlbHAgd2l0aCBtb2R1bGUgbmFtZSBsb29rdXBzLFxyXG4gICAgICAgICAqIHdoaWNoIGFjdCBsaWtlIHBhdGhzLCBidXQgY2FuIGJlIHJlbWFwcGVkLiBCdXQgdGhlIGVuZCByZXN1bHQsXHJcbiAgICAgICAgICogYWxsIHBhdGhzIHRoYXQgdXNlIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGxvb2sgbm9ybWFsaXplZC5cclxuICAgICAgICAgKiBOT1RFOiB0aGlzIG1ldGhvZCBNT0RJRklFUyB0aGUgaW5wdXQgYXJyYXkuXHJcbiAgICAgICAgICogQHBhcmFtIHtBcnJheX0gYXJ5IHRoZSBhcnJheSBvZiBwYXRoIHNlZ21lbnRzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIHRyaW1Eb3RzKGFyeSkge1xyXG4gICAgICAgICAgICB2YXIgaSwgcGFydDtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGFyeS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgcGFydCA9IGFyeVtpXTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSAnLicpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnkuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkgLT0gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGFydCA9PT0gJy4uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGF0IHRoZSBzdGFydCwgb3IgcHJldmlvdXMgdmFsdWUgaXMgc3RpbGwgLi4sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8ga2VlcCB0aGVtIHNvIHRoYXQgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoIGl0IG1heVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIHdvcmsgd2hlbiBjb252ZXJ0ZWQgdG8gYSBwYXRoLCBldmVuIHRob3VnaFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGFuIElEIGl0IGlzIGxlc3MgdGhhbiBpZGVhbC4gSW4gbGFyZ2VyIHBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsZWFzZXMsIG1heSBiZSBiZXR0ZXIgdG8ganVzdCBraWNrIG91dCBhbiBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCAoaSA9PT0gMSAmJiBhcnlbMl0gPT09ICcuLicpIHx8IGFyeVtpIC0gMV0gPT09ICcuLicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcnkuc3BsaWNlKGkgLSAxLCAyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXHJcbiAgICAgICAgICogYSByZWFsIG5hbWUgdGhhdCBjYW4gYmUgbWFwcGVkIHRvIGEgcGF0aC5cclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgcmVsYXRpdmUgbmFtZVxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxyXG4gICAgICAgICAqIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gYXBwbHlNYXAgYXBwbHkgdGhlIG1hcCBjb25maWcgdG8gdGhlIHZhbHVlLiBTaG91bGRcclxuICAgICAgICAgKiBvbmx5IGJlIGRvbmUgaWYgdGhpcyBub3JtYWxpemF0aW9uIGlzIGZvciBhIGRlcGVuZGVuY3kgSUQuXHJcbiAgICAgICAgICogQHJldHVybnMge1N0cmluZ30gbm9ybWFsaXplZCBuYW1lXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplKG5hbWUsIGJhc2VOYW1lLCBhcHBseU1hcCkge1xyXG4gICAgICAgICAgICB2YXIgcGtnTWFpbiwgbWFwVmFsdWUsIG5hbWVQYXJ0cywgaSwgaiwgbmFtZVNlZ21lbnQsIGxhc3RJbmRleCxcclxuICAgICAgICAgICAgICAgIGZvdW5kTWFwLCBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIG5vcm1hbGl6ZWRCYXNlUGFydHMsXHJcbiAgICAgICAgICAgICAgICBiYXNlUGFydHMgPSAoYmFzZU5hbWUgJiYgYmFzZU5hbWUuc3BsaXQoJy8nKSksXHJcbiAgICAgICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxyXG4gICAgICAgICAgICAgICAgc3Rhck1hcCA9IG1hcCAmJiBtYXBbJyonXTtcclxuXHJcbiAgICAgICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cclxuICAgICAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XHJcbiAgICAgICAgICAgICAgICBsYXN0SW5kZXggPSBuYW1lLmxlbmd0aCAtIDE7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSWYgd2FudGluZyBub2RlIElEIGNvbXBhdGliaWxpdHksIHN0cmlwIC5qcyBmcm9tIGVuZFxyXG4gICAgICAgICAgICAgICAgLy8gb2YgSURzLiBIYXZlIHRvIGRvIHRoaXMgaGVyZSwgYW5kIG5vdCBpbiBuYW1lVG9VcmxcclxuICAgICAgICAgICAgICAgIC8vIGJlY2F1c2Ugbm9kZSBhbGxvd3MgZWl0aGVyIC5qcyBvciBub24gLmpzIHRvIG1hcFxyXG4gICAgICAgICAgICAgICAgLy8gdG8gc2FtZSBmaWxlLlxyXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5ub2RlSWRDb21wYXQgJiYganNTdWZmaXhSZWdFeHAudGVzdChuYW1lW2xhc3RJbmRleF0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVtsYXN0SW5kZXhdID0gbmFtZVtsYXN0SW5kZXhdLnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTdGFydHMgd2l0aCBhICcuJyBzbyBuZWVkIHRoZSBiYXNlTmFtZVxyXG4gICAgICAgICAgICAgICAgaWYgKG5hbWVbMF0uY2hhckF0KDApID09PSAnLicgJiYgYmFzZVBhcnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9Db252ZXJ0IGJhc2VOYW1lIHRvIGFycmF5LCBhbmQgbG9wIG9mZiB0aGUgbGFzdCBwYXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vc28gdGhhdCAuIG1hdGNoZXMgdGhhdCAnZGlyZWN0b3J5JyBhbmQgbm90IG5hbWUgb2YgdGhlIGJhc2VOYW1lJ3NcclxuICAgICAgICAgICAgICAgICAgICAvL21vZHVsZS4gRm9yIGluc3RhbmNlLCBiYXNlTmFtZSBvZiAnb25lL3R3by90aHJlZScsIG1hcHMgdG9cclxuICAgICAgICAgICAgICAgICAgICAvLydvbmUvdHdvL3RocmVlLmpzJywgYnV0IHdlIHdhbnQgdGhlIGRpcmVjdG9yeSwgJ29uZS90d28nIGZvclxyXG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyBub3JtYWxpemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRCYXNlUGFydHMgPSBiYXNlUGFydHMuc2xpY2UoMCwgYmFzZVBhcnRzLmxlbmd0aCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBub3JtYWxpemVkQmFzZVBhcnRzLmNvbmNhdChuYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0cmltRG90cyhuYW1lKTtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLmpvaW4oJy8nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9BcHBseSBtYXAgY29uZmlnIGlmIGF2YWlsYWJsZS5cclxuICAgICAgICAgICAgaWYgKGFwcGx5TWFwICYmIG1hcCAmJiAoYmFzZVBhcnRzIHx8IHN0YXJNYXApKSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lUGFydHMgPSBuYW1lLnNwbGl0KCcvJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgb3V0ZXJMb29wOiBmb3IgKGkgPSBuYW1lUGFydHMubGVuZ3RoOyBpID4gMDsgaSAtPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVNlZ21lbnQgPSBuYW1lUGFydHMuc2xpY2UoMCwgaSkuam9pbignLycpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmFzZVBhcnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRmluZCB0aGUgbG9uZ2VzdCBiYXNlTmFtZSBzZWdtZW50IG1hdGNoIGluIHRoZSBjb25maWcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU28sIGRvIGpvaW5zIG9uIHRoZSBiaWdnZXN0IHRvIHNtYWxsZXN0IGxlbmd0aHMgb2YgYmFzZVBhcnRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSBiYXNlUGFydHMubGVuZ3RoOyBqID4gMDsgaiAtPSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IGdldE93bihtYXAsIGJhc2VQYXJ0cy5zbGljZSgwLCBqKS5qb2luKCcvJykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgY29uZmlnLCBmaW5kIGlmIGl0IGhhcyBvbmUgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgbmFtZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gZ2V0T3duKG1hcFZhbHVlLCBuYW1lU2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTWF0Y2gsIHVwZGF0ZSBuYW1lIHRvIHRoZSBuZXcgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kTWFwID0gbWFwVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kSSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrIG91dGVyTG9vcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiB0aGVyZSBpcyBhIHNob3J0ZXIgc2VnbWVudCBtYXRjaCBsYXRlciBpbiBhIG1hdGNoaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb25maWcsIHRoZW4gZmF2b3Igb3ZlciB0aGlzIHN0YXIgbWFwLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgZ2V0T3duKHN0YXJNYXAsIG5hbWVTZWdtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZFN0YXJNYXAgPSBnZXRPd24oc3Rhck1hcCwgbmFtZVNlZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFySSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBmb3VuZFN0YXJNYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgZm91bmRJID0gc3Rhckk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZVBhcnRzLnNwbGljZSgwLCBmb3VuZEksIGZvdW5kTWFwKTtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZVBhcnRzLmpvaW4oJy8nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIG5hbWUgcG9pbnRzIHRvIGEgcGFja2FnZSdzIG5hbWUsIHVzZVxyXG4gICAgICAgICAgICAvLyB0aGUgcGFja2FnZSBtYWluIGluc3RlYWQuXHJcbiAgICAgICAgICAgIHBrZ01haW4gPSBnZXRPd24oY29uZmlnLnBrZ3MsIG5hbWUpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBrZ01haW4gPyBwa2dNYWluIDogbmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVNjcmlwdChuYW1lKSB7XHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIGVhY2goc2NyaXB0cygpLCBmdW5jdGlvbiAoc2NyaXB0Tm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JpcHROb2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlbW9kdWxlJykgPT09IG5hbWUgJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcmlwdE5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVjb250ZXh0JykgPT09IGNvbnRleHQuY29udGV4dE5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2NyaXB0Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdE5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaGFzUGF0aEZhbGxiYWNrKGlkKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXRoQ29uZmlnID0gZ2V0T3duKGNvbmZpZy5wYXRocywgaWQpO1xyXG4gICAgICAgICAgICBpZiAocGF0aENvbmZpZyAmJiBpc0FycmF5KHBhdGhDb25maWcpICYmIHBhdGhDb25maWcubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgLy9Qb3Agb2ZmIHRoZSBmaXJzdCBhcnJheSB2YWx1ZSwgc2luY2UgaXQgZmFpbGVkLCBhbmRcclxuICAgICAgICAgICAgICAgIC8vcmV0cnlcclxuICAgICAgICAgICAgICAgIHBhdGhDb25maWcuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQucmVxdWlyZS51bmRlZihpZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9DdXN0b20gcmVxdWlyZSB0aGF0IGRvZXMgbm90IGRvIG1hcCB0cmFuc2xhdGlvbiwgc2luY2VcclxuICAgICAgICAgICAgICAgIC8vSUQgaXMgXCJhYnNvbHV0ZVwiLCBhbHJlYWR5IG1hcHBlZC9yZXNvbHZlZC5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQubWFrZVJlcXVpcmUobnVsbCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNraXBNYXA6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pKFtpZF0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1R1cm5zIGEgcGx1Z2luIXJlc291cmNlIHRvIFtwbHVnaW4sIHJlc291cmNlXVxyXG4gICAgICAgIC8vd2l0aCB0aGUgcGx1Z2luIGJlaW5nIHVuZGVmaW5lZCBpZiB0aGUgbmFtZVxyXG4gICAgICAgIC8vZGlkIG5vdCBoYXZlIGEgcGx1Z2luIHByZWZpeC5cclxuICAgICAgICBmdW5jdGlvbiBzcGxpdFByZWZpeChuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciBwcmVmaXgsXHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IG5hbWUgPyBuYW1lLmluZGV4T2YoJyEnKSA6IC0xO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyaW5nKGluZGV4ICsgMSwgbmFtZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBbcHJlZml4LCBuYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENyZWF0ZXMgYSBtb2R1bGUgbWFwcGluZyB0aGF0IGluY2x1ZGVzIHBsdWdpbiBwcmVmaXgsIG1vZHVsZVxyXG4gICAgICAgICAqIG5hbWUsIGFuZCBwYXRoLiBJZiBwYXJlbnRNb2R1bGVNYXAgaXMgcHJvdmlkZWQgaXQgd2lsbFxyXG4gICAgICAgICAqIGFsc28gbm9ybWFsaXplIHRoZSBuYW1lIHZpYSByZXF1aXJlLm5vcm1hbGl6ZSgpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSB0aGUgbW9kdWxlIG5hbWVcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhcmVudE1vZHVsZU1hcF0gcGFyZW50IG1vZHVsZSBtYXBcclxuICAgICAgICAgKiBmb3IgdGhlIG1vZHVsZSBuYW1lLCB1c2VkIHRvIHJlc29sdmUgcmVsYXRpdmUgbmFtZXMuXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBpc05vcm1hbGl6ZWQ6IGlzIHRoZSBJRCBhbHJlYWR5IG5vcm1hbGl6ZWQuXHJcbiAgICAgICAgICogVGhpcyBpcyB0cnVlIGlmIHRoaXMgY2FsbCBpcyBkb25lIGZvciBhIGRlZmluZSgpIG1vZHVsZSBJRC5cclxuICAgICAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGx5TWFwOiBhcHBseSB0aGUgbWFwIGNvbmZpZyB0byB0aGUgSUQuXHJcbiAgICAgICAgICogU2hvdWxkIG9ubHkgYmUgdHJ1ZSBpZiB0aGlzIG1hcCBpcyBmb3IgYSBkZXBlbmRlbmN5LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBtYWtlTW9kdWxlTWFwKG5hbWUsIHBhcmVudE1vZHVsZU1hcCwgaXNOb3JtYWxpemVkLCBhcHBseU1hcCkge1xyXG4gICAgICAgICAgICB2YXIgdXJsLCBwbHVnaW5Nb2R1bGUsIHN1ZmZpeCwgbmFtZVBhcnRzLFxyXG4gICAgICAgICAgICAgICAgcHJlZml4ID0gbnVsbCxcclxuICAgICAgICAgICAgICAgIHBhcmVudE5hbWUgPSBwYXJlbnRNb2R1bGVNYXAgPyBwYXJlbnRNb2R1bGVNYXAubmFtZSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbE5hbWUgPSBuYW1lLFxyXG4gICAgICAgICAgICAgICAgaXNEZWZpbmUgPSB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUgPSAnJztcclxuXHJcbiAgICAgICAgICAgIC8vSWYgbm8gbmFtZSwgdGhlbiBpdCBtZWFucyBpdCBpcyBhIHJlcXVpcmUgY2FsbCwgZ2VuZXJhdGUgYW5cclxuICAgICAgICAgICAgLy9pbnRlcm5hbCBuYW1lLlxyXG4gICAgICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlzRGVmaW5lID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBuYW1lID0gJ19AcicgKyAocmVxdWlyZUNvdW50ZXIgKz0gMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpO1xyXG4gICAgICAgICAgICBwcmVmaXggPSBuYW1lUGFydHNbMF07XHJcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHNbMV07XHJcblxyXG4gICAgICAgICAgICBpZiAocHJlZml4KSB7XHJcbiAgICAgICAgICAgICAgICBwcmVmaXggPSBub3JtYWxpemUocHJlZml4LCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5Nb2R1bGUgPSBnZXRPd24oZGVmaW5lZCwgcHJlZml4KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9BY2NvdW50IGZvciByZWxhdGl2ZSBwYXRocyBpZiB0aGVyZSBpcyBhIGJhc2UgbmFtZS5cclxuICAgICAgICAgICAgaWYgKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luTW9kdWxlICYmIHBsdWdpbk1vZHVsZS5ub3JtYWxpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9QbHVnaW4gaXMgbG9hZGVkLCB1c2UgaXRzIG5vcm1hbGl6ZSBtZXRob2QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gcGx1Z2luTW9kdWxlLm5vcm1hbGl6ZShuYW1lLCBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIG5lc3RlZCBwbHVnaW4gcmVmZXJlbmNlcywgdGhlbiBkbyBub3QgdHJ5IHRvXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vcm1hbGl6ZSwgYXMgaXQgd2lsbCBub3Qgbm9ybWFsaXplIGNvcnJlY3RseS4gVGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwbGFjZXMgYSByZXN0cmljdGlvbiBvbiByZXNvdXJjZUlkcywgYW5kIHRoZSBsb25nZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGVybSBzb2x1dGlvbiBpcyBub3QgdG8gbm9ybWFsaXplIHVudGlsIHBsdWdpbnMgYXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvYWRlZCBhbmQgYWxsIG5vcm1hbGl6YXRpb25zIHRvIGFsbG93IGZvciBhc3luY1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBsb2FkaW5nIG9mIGEgbG9hZGVyIHBsdWdpbi4gQnV0IGZvciBub3csIGZpeGVzIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb21tb24gdXNlcy4gRGV0YWlscyBpbiAjMTEzMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5hbWUuaW5kZXhPZignIScpID09PSAtMSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplKG5hbWUsIHBhcmVudE5hbWUsIGFwcGx5TWFwKSA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQSByZWd1bGFyIG1vZHVsZS5cclxuICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkTmFtZSA9IG5vcm1hbGl6ZShuYW1lLCBwYXJlbnROYW1lLCBhcHBseU1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplZCBuYW1lIG1heSBiZSBhIHBsdWdpbiBJRCBkdWUgdG8gbWFwIGNvbmZpZ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYXBwbGljYXRpb24gaW4gbm9ybWFsaXplLiBUaGUgbWFwIGNvbmZpZyB2YWx1ZXMgbXVzdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vYWxyZWFkeSBiZSBub3JtYWxpemVkLCBzbyBkbyBub3QgbmVlZCB0byByZWRvIHRoYXQgcGFydC5cclxuICAgICAgICAgICAgICAgICAgICBuYW1lUGFydHMgPSBzcGxpdFByZWZpeChub3JtYWxpemVkTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gbmFtZVBhcnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWROYW1lID0gbmFtZVBhcnRzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlzTm9ybWFsaXplZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQubmFtZVRvVXJsKG5vcm1hbGl6ZWROYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9JZiB0aGUgaWQgaXMgYSBwbHVnaW4gaWQgdGhhdCBjYW5ub3QgYmUgZGV0ZXJtaW5lZCBpZiBpdCBuZWVkc1xyXG4gICAgICAgICAgICAvL25vcm1hbGl6YXRpb24sIHN0YW1wIGl0IHdpdGggYSB1bmlxdWUgSUQgc28gdHdvIG1hdGNoaW5nIHJlbGF0aXZlXHJcbiAgICAgICAgICAgIC8vaWRzIHRoYXQgbWF5IGNvbmZsaWN0IGNhbiBiZSBzZXBhcmF0ZS5cclxuICAgICAgICAgICAgc3VmZml4ID0gcHJlZml4ICYmICFwbHVnaW5Nb2R1bGUgJiYgIWlzTm9ybWFsaXplZCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICdfdW5ub3JtYWxpemVkJyArICh1bm5vcm1hbGl6ZWRDb3VudGVyICs9IDEpIDpcclxuICAgICAgICAgICAgICAgICAgICAgJyc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJlZml4OiBwcmVmaXgsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBub3JtYWxpemVkTmFtZSxcclxuICAgICAgICAgICAgICAgIHBhcmVudE1hcDogcGFyZW50TW9kdWxlTWFwLFxyXG4gICAgICAgICAgICAgICAgdW5ub3JtYWxpemVkOiAhIXN1ZmZpeCxcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxOYW1lOiBvcmlnaW5hbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBpc0RlZmluZTogaXNEZWZpbmUsXHJcbiAgICAgICAgICAgICAgICBpZDogKHByZWZpeCA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCArICchJyArIG5vcm1hbGl6ZWROYW1lIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE5hbWUpICsgc3VmZml4XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRNb2R1bGUoZGVwTWFwKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IGRlcE1hcC5pZCxcclxuICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtb2QpIHtcclxuICAgICAgICAgICAgICAgIG1vZCA9IHJlZ2lzdHJ5W2lkXSA9IG5ldyBjb250ZXh0Lk1vZHVsZShkZXBNYXApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbW9kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb24oZGVwTWFwLCBuYW1lLCBmbikge1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBkZXBNYXAuaWQsXHJcbiAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChoYXNQcm9wKGRlZmluZWQsIGlkKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICghbW9kIHx8IG1vZC5kZWZpbmVFbWl0Q29tcGxldGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2RlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4oZGVmaW5lZFtpZF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbW9kID0gZ2V0TW9kdWxlKGRlcE1hcCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobW9kLmVycm9yICYmIG5hbWUgPT09ICdlcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbihtb2QuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2Qub24obmFtZSwgZm4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGVyciwgZXJyYmFjaykge1xyXG4gICAgICAgICAgICB2YXIgaWRzID0gZXJyLnJlcXVpcmVNb2R1bGVzLFxyXG4gICAgICAgICAgICAgICAgbm90aWZpZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlcnJiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJiYWNrKGVycik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBlYWNoKGlkcywgZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1vZCA9IGdldE93bihyZWdpc3RyeSwgaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgZXJyb3Igb24gbW9kdWxlLCBzbyBpdCBza2lwcyB0aW1lb3V0IGNoZWNrcy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVycm9yID0gZXJyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV2ZW50cy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmVtaXQoJ2Vycm9yJywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghbm90aWZpZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXEub25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnRlcm5hbCBtZXRob2QgdG8gdHJhbnNmZXIgZ2xvYmFsUXVldWUgaXRlbXMgdG8gdGhpcyBjb250ZXh0J3NcclxuICAgICAgICAgKiBkZWZRdWV1ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiB0YWtlR2xvYmFsUXVldWUoKSB7XHJcbiAgICAgICAgICAgIC8vUHVzaCBhbGwgdGhlIGdsb2JhbERlZlF1ZXVlIGl0ZW1zIGludG8gdGhlIGNvbnRleHQncyBkZWZRdWV1ZVxyXG4gICAgICAgICAgICBpZiAoZ2xvYmFsRGVmUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBlYWNoKGdsb2JhbERlZlF1ZXVlLCBmdW5jdGlvbihxdWV1ZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBxdWV1ZUl0ZW1bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcFtpZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWZRdWV1ZS5wdXNoKHF1ZXVlSXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGdsb2JhbERlZlF1ZXVlID0gW107XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGhhbmRsZXJzID0ge1xyXG4gICAgICAgICAgICAncmVxdWlyZSc6IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtb2QucmVxdWlyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtb2QucmVxdWlyZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChtb2QucmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUobW9kLm1hcCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnZXhwb3J0cyc6IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICAgICAgICAgIG1vZC51c2luZ0V4cG9ydHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZC5tYXAuaXNEZWZpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV4cG9ydHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChkZWZpbmVkW21vZC5tYXAuaWRdID0gbW9kLmV4cG9ydHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLmV4cG9ydHMgPSBkZWZpbmVkW21vZC5tYXAuaWRdID0ge30pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ21vZHVsZSc6IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtb2QubW9kdWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1vZC5tb2R1bGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAobW9kLm1vZHVsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IG1vZC5tYXAuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVyaTogbW9kLm1hcC51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE93bihjb25maWcuY29uZmlnLCBtb2QubWFwLmlkKSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0czogbW9kLmV4cG9ydHMgfHwgKG1vZC5leHBvcnRzID0ge30pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhblJlZ2lzdHJ5KGlkKSB7XHJcbiAgICAgICAgICAgIC8vQ2xlYW4gdXAgbWFjaGluZXJ5IHVzZWQgZm9yIHdhaXRpbmcgbW9kdWxlcy5cclxuICAgICAgICAgICAgZGVsZXRlIHJlZ2lzdHJ5W2lkXTtcclxuICAgICAgICAgICAgZGVsZXRlIGVuYWJsZWRSZWdpc3RyeVtpZF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBicmVha0N5Y2xlKG1vZCwgdHJhY2VkLCBwcm9jZXNzZWQpIHtcclxuICAgICAgICAgICAgdmFyIGlkID0gbW9kLm1hcC5pZDtcclxuXHJcbiAgICAgICAgICAgIGlmIChtb2QuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG1vZC5lbWl0KCdlcnJvcicsIG1vZC5lcnJvcik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0cmFjZWRbaWRdID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGVhY2gobW9kLmRlcE1hcHMsIGZ1bmN0aW9uIChkZXBNYXAsIGkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGVwSWQgPSBkZXBNYXAuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlcCA9IGdldE93bihyZWdpc3RyeSwgZGVwSWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL09ubHkgZm9yY2UgdGhpbmdzIHRoYXQgaGF2ZSBub3QgY29tcGxldGVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy9iZWluZyBkZWZpbmVkLCBzbyBzdGlsbCBpbiB0aGUgcmVnaXN0cnksXHJcbiAgICAgICAgICAgICAgICAgICAgLy9hbmQgb25seSBpZiBpdCBoYXMgbm90IGJlZW4gbWF0Y2hlZCB1cFxyXG4gICAgICAgICAgICAgICAgICAgIC8vaW4gdGhlIG1vZHVsZSBhbHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXAgJiYgIW1vZC5kZXBNYXRjaGVkW2ldICYmICFwcm9jZXNzZWRbZGVwSWRdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnZXRPd24odHJhY2VkLCBkZXBJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZC5kZWZpbmVEZXAoaSwgZGVmaW5lZFtkZXBJZF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kLmNoZWNrKCk7IC8vcGFzcyBmYWxzZT9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrQ3ljbGUoZGVwLCB0cmFjZWQsIHByb2Nlc3NlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZFtpZF0gPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjaGVja0xvYWRlZCgpIHtcclxuICAgICAgICAgICAgdmFyIGVyciwgdXNpbmdQYXRoRmFsbGJhY2ssXHJcbiAgICAgICAgICAgICAgICB3YWl0SW50ZXJ2YWwgPSBjb25maWcud2FpdFNlY29uZHMgKiAxMDAwLFxyXG4gICAgICAgICAgICAgICAgLy9JdCBpcyBwb3NzaWJsZSB0byBkaXNhYmxlIHRoZSB3YWl0IGludGVydmFsIGJ5IHVzaW5nIHdhaXRTZWNvbmRzIG9mIDAuXHJcbiAgICAgICAgICAgICAgICBleHBpcmVkID0gd2FpdEludGVydmFsICYmIChjb250ZXh0LnN0YXJ0VGltZSArIHdhaXRJbnRlcnZhbCkgPCBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgICAgIG5vTG9hZHMgPSBbXSxcclxuICAgICAgICAgICAgICAgIHJlcUNhbGxzID0gW10sXHJcbiAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG5lZWRDeWNsZUNoZWNrID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIC8vRG8gbm90IGJvdGhlciBpZiB0aGlzIGNhbGwgd2FzIGEgcmVzdWx0IG9mIGEgY3ljbGUgYnJlYWsuXHJcbiAgICAgICAgICAgIGlmIChpbkNoZWNrTG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGluQ2hlY2tMb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy9GaWd1cmUgb3V0IHRoZSBzdGF0ZSBvZiBhbGwgdGhlIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGVhY2hQcm9wKGVuYWJsZWRSZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1vZC5tYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kSWQgPSBtYXAuaWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9Ta2lwIHRoaW5ncyB0aGF0IGFyZSBub3QgZW5hYmxlZCBvciBpbiBlcnJvciBzdGF0ZS5cclxuICAgICAgICAgICAgICAgIGlmICghbW9kLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXAuaXNEZWZpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXFDYWxscy5wdXNoKG1vZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtb2QuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0lmIHRoZSBtb2R1bGUgc2hvdWxkIGJlIGV4ZWN1dGVkLCBhbmQgaXQgaGFzIG5vdFxyXG4gICAgICAgICAgICAgICAgICAgIC8vYmVlbiBpbml0ZWQgYW5kIHRpbWUgaXMgdXAsIHJlbWVtYmVyIGl0LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9kLmluaXRlZCAmJiBleHBpcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNQYXRoRmFsbGJhY2sobW9kSWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2luZ1BhdGhGYWxsYmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9Mb2Fkcy5wdXNoKG1vZElkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZVNjcmlwdChtb2RJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFtb2QuaW5pdGVkICYmIG1vZC5mZXRjaGVkICYmIG1hcC5pc0RlZmluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGlsbExvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW1hcC5wcmVmaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vTm8gcmVhc29uIHRvIGtlZXAgbG9va2luZyBmb3IgdW5maW5pc2hlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2FkaW5nLiBJZiB0aGUgb25seSBzdGlsbExvYWRpbmcgaXMgYVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9wbHVnaW4gcmVzb3VyY2UgdGhvdWdoLCBrZWVwIGdvaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9iZWNhdXNlIGl0IG1heSBiZSB0aGF0IGEgcGx1Z2luIHJlc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2lzIHdhaXRpbmcgb24gYSBub24tcGx1Z2luIGN5Y2xlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChuZWVkQ3ljbGVDaGVjayA9IGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXhwaXJlZCAmJiBub0xvYWRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgLy9JZiB3YWl0IHRpbWUgZXhwaXJlZCwgdGhyb3cgZXJyb3Igb2YgdW5sb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgICAgIGVyciA9IG1ha2VFcnJvcigndGltZW91dCcsICdMb2FkIHRpbWVvdXQgZm9yIG1vZHVsZXM6ICcgKyBub0xvYWRzLCBudWxsLCBub0xvYWRzKTtcclxuICAgICAgICAgICAgICAgIGVyci5jb250ZXh0TmFtZSA9IGNvbnRleHQuY29udGV4dE5hbWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL05vdCBleHBpcmVkLCBjaGVjayBmb3IgYSBjeWNsZS5cclxuICAgICAgICAgICAgaWYgKG5lZWRDeWNsZUNoZWNrKSB7XHJcbiAgICAgICAgICAgICAgICBlYWNoKHJlcUNhbGxzLCBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtDeWNsZShtb2QsIHt9LCB7fSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9JZiBzdGlsbCB3YWl0aW5nIG9uIGxvYWRzLCBhbmQgdGhlIHdhaXRpbmcgbG9hZCBpcyBzb21ldGhpbmdcclxuICAgICAgICAgICAgLy9vdGhlciB0aGFuIGEgcGx1Z2luIHJlc291cmNlLCBvciB0aGVyZSBhcmUgc3RpbGwgb3V0c3RhbmRpbmdcclxuICAgICAgICAgICAgLy9zY3JpcHRzLCB0aGVuIGp1c3QgdHJ5IGJhY2sgbGF0ZXIuXHJcbiAgICAgICAgICAgIGlmICgoIWV4cGlyZWQgfHwgdXNpbmdQYXRoRmFsbGJhY2spICYmIHN0aWxsTG9hZGluZykge1xyXG4gICAgICAgICAgICAgICAgLy9Tb21ldGhpbmcgaXMgc3RpbGwgd2FpdGluZyB0byBsb2FkLiBXYWl0IGZvciBpdCwgYnV0IG9ubHlcclxuICAgICAgICAgICAgICAgIC8vaWYgYSB0aW1lb3V0IGlzIG5vdCBhbHJlYWR5IGluIGVmZmVjdC5cclxuICAgICAgICAgICAgICAgIGlmICgoaXNCcm93c2VyIHx8IGlzV2ViV29ya2VyKSAmJiAhY2hlY2tMb2FkZWRUaW1lb3V0SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZFRpbWVvdXRJZCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbkNoZWNrTG9hZGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBNb2R1bGUgPSBmdW5jdGlvbiAobWFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gZ2V0T3duKHVuZGVmRXZlbnRzLCBtYXAuaWQpIHx8IHt9O1xyXG4gICAgICAgICAgICB0aGlzLm1hcCA9IG1hcDtcclxuICAgICAgICAgICAgdGhpcy5zaGltID0gZ2V0T3duKGNvbmZpZy5zaGltLCBtYXAuaWQpO1xyXG4gICAgICAgICAgICB0aGlzLmRlcEV4cG9ydHMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5kZXBNYXBzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuZGVwTWF0Y2hlZCA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbk1hcHMgPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5kZXBDb3VudCA9IDA7XHJcblxyXG4gICAgICAgICAgICAvKiB0aGlzLmV4cG9ydHMgdGhpcy5mYWN0b3J5XHJcbiAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IFtdLFxyXG4gICAgICAgICAgICAgICB0aGlzLmVuYWJsZWQsIHRoaXMuZmV0Y2hlZFxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIE1vZHVsZS5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uIChkZXBNYXBzLCBmYWN0b3J5LCBlcnJiYWNrLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0RvIG5vdCBkbyBtb3JlIGluaXRzIGlmIGFscmVhZHkgZG9uZS4gQ2FuIGhhcHBlbiBpZiB0aGVyZVxyXG4gICAgICAgICAgICAgICAgLy9hcmUgbXVsdGlwbGUgZGVmaW5lIGNhbGxzIGZvciB0aGUgc2FtZSBtb2R1bGUuIFRoYXQgaXMgbm90XHJcbiAgICAgICAgICAgICAgICAvL2Egbm9ybWFsLCBjb21tb24gY2FzZSwgYnV0IGl0IGlzIGFsc28gbm90IHVuZXhwZWN0ZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbml0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUmVnaXN0ZXIgZm9yIGVycm9ycyBvbiB0aGlzIG1vZHVsZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKCdlcnJvcicsIGVycmJhY2spO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50cy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vSWYgbm8gZXJyYmFjayBhbHJlYWR5LCBidXQgdGhlcmUgYXJlIGVycm9yIGxpc3RlbmVyc1xyXG4gICAgICAgICAgICAgICAgICAgIC8vb24gdGhpcyBtb2R1bGUsIHNldCB1cCBhbiBlcnJiYWNrIHRvIHBhc3MgdG8gdGhlIGRlcHMuXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyYmFjayA9IGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL0RvIGEgY29weSBvZiB0aGUgZGVwZW5kZW5jeSBhcnJheSwgc28gdGhhdFxyXG4gICAgICAgICAgICAgICAgLy9zb3VyY2UgaW5wdXRzIGFyZSBub3QgbW9kaWZpZWQuIEZvciBleGFtcGxlXHJcbiAgICAgICAgICAgICAgICAvL1wic2hpbVwiIGRlcHMgYXJlIHBhc3NlZCBpbiBoZXJlIGRpcmVjdGx5LCBhbmRcclxuICAgICAgICAgICAgICAgIC8vZG9pbmcgYSBkaXJlY3QgbW9kaWZpY2F0aW9uIG9mIHRoZSBkZXBNYXBzIGFycmF5XHJcbiAgICAgICAgICAgICAgICAvL3dvdWxkIGFmZmVjdCB0aGF0IGNvbmZpZy5cclxuICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcyA9IGRlcE1hcHMgJiYgZGVwTWFwcy5zbGljZSgwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmVycmJhY2sgPSBlcnJiYWNrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vSW5kaWNhdGUgdGhpcyBtb2R1bGUgaGFzIGJlIGluaXRpYWxpemVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5pZ25vcmUgPSBvcHRpb25zLmlnbm9yZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0NvdWxkIGhhdmUgb3B0aW9uIHRvIGluaXQgdGhpcyBtb2R1bGUgaW4gZW5hYmxlZCBtb2RlLFxyXG4gICAgICAgICAgICAgICAgLy9vciBjb3VsZCBoYXZlIGJlZW4gcHJldmlvdXNseSBtYXJrZWQgYXMgZW5hYmxlZC4gSG93ZXZlcixcclxuICAgICAgICAgICAgICAgIC8vdGhlIGRlcGVuZGVuY2llcyBhcmUgbm90IGtub3duIHVudGlsIGluaXQgaXMgY2FsbGVkLiBTb1xyXG4gICAgICAgICAgICAgICAgLy9pZiBlbmFibGVkIHByZXZpb3VzbHksIG5vdyB0cmlnZ2VyIGRlcGVuZGVuY2llcyBhcyBlbmFibGVkLlxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlZCB8fCB0aGlzLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0VuYWJsZSB0aGlzIG1vZHVsZSBhbmQgZGVwZW5kZW5jaWVzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vV2lsbCBjYWxsIHRoaXMuY2hlY2soKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGRlZmluZURlcDogZnVuY3Rpb24gKGksIGRlcEV4cG9ydHMpIHtcclxuICAgICAgICAgICAgICAgIC8vQmVjYXVzZSBvZiBjeWNsZXMsIGRlZmluZWQgY2FsbGJhY2sgZm9yIGEgZ2l2ZW5cclxuICAgICAgICAgICAgICAgIC8vZXhwb3J0IGNhbiBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZGVwTWF0Y2hlZFtpXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWF0Y2hlZFtpXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBDb3VudCAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwRXhwb3J0c1tpXSA9IGRlcEV4cG9ydHM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBmZXRjaDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmV0Y2hlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5zdGFydFRpbWUgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBtYXAgPSB0aGlzLm1hcDtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0lmIHRoZSBtYW5hZ2VyIGlzIGZvciBhIHBsdWdpbiBtYW5hZ2VkIHJlc291cmNlLFxyXG4gICAgICAgICAgICAgICAgLy9hc2sgdGhlIHBsdWdpbiB0byBsb2FkIGl0IG5vdy5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNoaW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1ha2VSZXF1aXJlKHRoaXMubWFwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZUJ1aWxkQ2FsbGJhY2s6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICB9KSh0aGlzLnNoaW0uZGVwcyB8fCBbXSwgYmluZCh0aGlzLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXAucHJlZml4ID8gdGhpcy5jYWxsUGx1Z2luKCkgOiB0aGlzLmxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUmVndWxhciBkZXBlbmRlbmN5LlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXAucHJlZml4ID8gdGhpcy5jYWxsUGx1Z2luKCkgOiB0aGlzLmxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1cmwgPSB0aGlzLm1hcC51cmw7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9SZWd1bGFyIGRlcGVuZGVuY3kuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXVybEZldGNoZWRbdXJsXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybEZldGNoZWRbdXJsXSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5sb2FkKHRoaXMubWFwLmlkLCB1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENoZWNrcyBpZiB0aGUgbW9kdWxlIGlzIHJlYWR5IHRvIGRlZmluZSBpdHNlbGYsIGFuZCBpZiBzbyxcclxuICAgICAgICAgICAgICogZGVmaW5lIGl0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY2hlY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5lbmFibGVkIHx8IHRoaXMuZW5hYmxpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVyciwgY2pzTW9kdWxlLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkID0gdGhpcy5tYXAuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVwRXhwb3J0cyA9IHRoaXMuZGVwRXhwb3J0cyxcclxuICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gdGhpcy5leHBvcnRzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmluaXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgZmV0Y2ggaWYgbm90IGFscmVhZHkgaW4gdGhlIGRlZlF1ZXVlLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChjb250ZXh0LmRlZlF1ZXVlTWFwLCBpZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mZXRjaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCB0aGlzLmVycm9yKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZGVmaW5pbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL1RoZSBmYWN0b3J5IGNvdWxkIHRyaWdnZXIgYW5vdGhlciByZXF1aXJlIGNhbGxcclxuICAgICAgICAgICAgICAgICAgICAvL3RoYXQgd291bGQgcmVzdWx0IGluIGNoZWNraW5nIHRoaXMgbW9kdWxlIHRvXHJcbiAgICAgICAgICAgICAgICAgICAgLy9kZWZpbmUgaXRzZWxmIGFnYWluLiBJZiBhbHJlYWR5IGluIHRoZSBwcm9jZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgLy9vZiBkb2luZyB0aGF0LCBza2lwIHRoaXMgd29yay5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluaW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVwQ291bnQgPCAxICYmICF0aGlzLmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oZmFjdG9yeSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vSWYgdGhlcmUgaXMgYW4gZXJyb3IgbGlzdGVuZXIsIGZhdm9yIHBhc3NpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gdGhhdCBpbnN0ZWFkIG9mIHRocm93aW5nIGFuIGVycm9yLiBIb3dldmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9vbmx5IGRvIGl0IGZvciBkZWZpbmUoKSdkICBtb2R1bGVzLiByZXF1aXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2VycmJhY2tzIHNob3VsZCBub3QgYmUgY2FsbGVkIGZvciBmYWlsdXJlcyBpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGVpciBjYWxsYmFja3MgKCM2OTkpLiBIb3dldmVyIGlmIGEgZ2xvYmFsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL29uRXJyb3IgaXMgc2V0LCB1c2UgdGhhdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodGhpcy5ldmVudHMuZXJyb3IgJiYgdGhpcy5tYXAuaXNEZWZpbmUpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxLm9uRXJyb3IgIT09IGRlZmF1bHRPbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGNvbnRleHQuZXhlY0NiKGlkLCBmYWN0b3J5LCBkZXBFeHBvcnRzLCBleHBvcnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyciA9IGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gY29udGV4dC5leGVjQ2IoaWQsIGZhY3RvcnksIGRlcEV4cG9ydHMsIGV4cG9ydHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhdm9yIHJldHVybiB2YWx1ZSBvdmVyIGV4cG9ydHMuIElmIG5vZGUvY2pzIGluIHBsYXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGVuIHdpbGwgbm90IGhhdmUgYSByZXR1cm4gdmFsdWUgYW55d2F5LiBGYXZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9kdWxlLmV4cG9ydHMgYXNzaWdubWVudCBvdmVyIGV4cG9ydHMgb2JqZWN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLmlzRGVmaW5lICYmIGV4cG9ydHMgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IHRoaXMubW9kdWxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjanNNb2R1bGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwb3J0cyA9IGNqc01vZHVsZS5leHBvcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy51c2luZ0V4cG9ydHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9leHBvcnRzIGFscmVhZHkgc2V0IHRoZSBkZWZpbmVkIHZhbHVlLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gdGhpcy5leHBvcnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyLnJlcXVpcmVNYXAgPSB0aGlzLm1hcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnIucmVxdWlyZU1vZHVsZXMgPSB0aGlzLm1hcC5pc0RlZmluZSA/IFt0aGlzLm1hcC5pZF0gOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlVHlwZSA9IHRoaXMubWFwLmlzRGVmaW5lID8gJ2RlZmluZScgOiAncmVxdWlyZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoKHRoaXMuZXJyb3IgPSBlcnIpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0p1c3QgYSBsaXRlcmFsIHZhbHVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBvcnRzID0gZmFjdG9yeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHBvcnRzID0gZXhwb3J0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcC5pc0RlZmluZSAmJiAhdGhpcy5pZ25vcmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmluZWRbaWRdID0gZXhwb3J0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxLm9uUmVzb3VyY2VMb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc0xvYWRNYXBzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh0aGlzLmRlcE1hcHMsIGZ1bmN0aW9uIChkZXBNYXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzTG9hZE1hcHMucHVzaChkZXBNYXAubm9ybWFsaXplZE1hcCB8fCBkZXBNYXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcS5vblJlc291cmNlTG9hZChjb250ZXh0LCB0aGlzLm1hcCwgcmVzTG9hZE1hcHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NsZWFuIHVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuUmVnaXN0cnkoaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vRmluaXNoZWQgdGhlIGRlZmluZSBzdGFnZS4gQWxsb3cgY2FsbGluZyBjaGVjayBhZ2FpblxyXG4gICAgICAgICAgICAgICAgICAgIC8vdG8gYWxsb3cgZGVmaW5lIG5vdGlmaWNhdGlvbnMgYmVsb3cgaW4gdGhlIGNhc2Ugb2YgYVxyXG4gICAgICAgICAgICAgICAgICAgIC8vY3ljbGUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWZpbmVkICYmICF0aGlzLmRlZmluZUVtaXR0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVFbWl0dGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdkZWZpbmVkJywgdGhpcy5leHBvcnRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVFbWl0Q29tcGxldGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBjYWxsUGx1Z2luOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gdGhpcy5tYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgaWQgPSBtYXAuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9NYXAgYWxyZWFkeSBub3JtYWxpemVkIHRoZSBwcmVmaXguXHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luTWFwID0gbWFrZU1vZHVsZU1hcChtYXAucHJlZml4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL01hcmsgdGhpcyBhcyBhIGRlcGVuZGVuY3kgZm9yIHRoaXMgcGx1Z2luLCBzbyBpdFxyXG4gICAgICAgICAgICAgICAgLy9jYW4gYmUgdHJhY2VkIGZvciBjeWNsZXMuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHMucHVzaChwbHVnaW5NYXApO1xyXG5cclxuICAgICAgICAgICAgICAgIG9uKHBsdWdpbk1hcCwgJ2RlZmluZWQnLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChwbHVnaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbG9hZCwgbm9ybWFsaXplZE1hcCwgbm9ybWFsaXplZE1vZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVuZGxlSWQgPSBnZXRPd24oYnVuZGxlc01hcCwgdGhpcy5tYXAuaWQpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gdGhpcy5tYXAubmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50TmFtZSA9IHRoaXMubWFwLnBhcmVudE1hcCA/IHRoaXMubWFwLnBhcmVudE1hcC5uYW1lIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlID0gY29udGV4dC5tYWtlUmVxdWlyZShtYXAucGFyZW50TWFwLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVCdWlsZENhbGxiYWNrOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0lmIGN1cnJlbnQgbWFwIGlzIG5vdCBub3JtYWxpemVkLCB3YWl0IGZvciB0aGF0XHJcbiAgICAgICAgICAgICAgICAgICAgLy9ub3JtYWxpemVkIG5hbWUgdG8gbG9hZCBpbnN0ZWFkIG9mIGNvbnRpbnVpbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwLnVubm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL05vcm1hbGl6ZSB0aGUgSUQgaWYgdGhlIHBsdWdpbiBhbGxvd3MgaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4ubm9ybWFsaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gcGx1Z2luLm5vcm1hbGl6ZShuYW1lLCBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBub3JtYWxpemUobmFtZSwgcGFyZW50TmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9wcmVmaXggYW5kIG5hbWUgc2hvdWxkIGFscmVhZHkgYmUgbm9ybWFsaXplZCwgbm8gbmVlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2ZvciBhcHBseWluZyBtYXAgY29uZmlnIGFnYWluIGVpdGhlci5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1hcCA9IG1ha2VNb2R1bGVNYXAobWFwLnByZWZpeCArICchJyArIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWFwLnBhcmVudE1hcCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uKG5vcm1hbGl6ZWRNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZGVmaW5lZCcsIGJpbmQodGhpcywgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXAubm9ybWFsaXplZE1hcCA9IG5vcm1hbGl6ZWRNYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSwgbnVsbCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZ25vcmU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGl6ZWRNb2QgPSBnZXRPd24ocmVnaXN0cnksIG5vcm1hbGl6ZWRNYXAuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsaXplZE1vZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9NYXJrIHRoaXMgYXMgYSBkZXBlbmRlbmN5IGZvciB0aGlzIHBsdWdpbiwgc28gaXRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FuIGJlIHRyYWNlZCBmb3IgY3ljbGVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBNYXBzLnB1c2gobm9ybWFsaXplZE1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZC5vbignZXJyb3InLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9ybWFsaXplZE1vZC5lbmFibGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9JZiBhIHBhdGhzIGNvbmZpZywgdGhlbiBqdXN0IGxvYWQgdGhhdCBmaWxlIGluc3RlYWQgdG9cclxuICAgICAgICAgICAgICAgICAgICAvL3Jlc29sdmUgdGhlIHBsdWdpbiwgYXMgaXQgaXMgYnVpbHQgaW50byB0aGF0IHBhdGhzIGxheWVyLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChidW5kbGVJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hcC51cmwgPSBjb250ZXh0Lm5hbWVUb1VybChidW5kbGVJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsb2FkID0gYmluZCh0aGlzLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KFtdLCBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSwgbnVsbCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZC5lcnJvciA9IGJpbmQodGhpcywgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyci5yZXF1aXJlTW9kdWxlcyA9IFtpZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1JlbW92ZSB0ZW1wIHVubm9ybWFsaXplZCBtb2R1bGVzIGZvciB0aGlzIG1vZHVsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zaW5jZSB0aGV5IHdpbGwgbmV2ZXIgYmUgcmVzb2x2ZWQgb3RoZXJ3aXNlIG5vdy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AocmVnaXN0cnksIGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2QubWFwLmlkLmluZGV4T2YoaWQgKyAnX3Vubm9ybWFsaXplZCcpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5SZWdpc3RyeShtb2QubWFwLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbkVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vQWxsb3cgcGx1Z2lucyB0byBsb2FkIG90aGVyIGNvZGUgd2l0aG91dCBoYXZpbmcgdG8ga25vdyB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvL2NvbnRleHQgb3IgaG93IHRvICdjb21wbGV0ZScgdGhlIGxvYWQuXHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZC5mcm9tVGV4dCA9IGJpbmQodGhpcywgZnVuY3Rpb24gKHRleHQsIHRleHRBbHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypqc2xpbnQgZXZpbDogdHJ1ZSAqL1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kdWxlTmFtZSA9IG1hcC5uYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlTWFwID0gbWFrZU1vZHVsZU1hcChtb2R1bGVOYW1lKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc0ludGVyYWN0aXZlID0gdXNlSW50ZXJhY3RpdmU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0FzIG9mIDIuMS4wLCBzdXBwb3J0IGp1c3QgcGFzc2luZyB0aGUgdGV4dCwgdG8gcmVpbmZvcmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZnJvbVRleHQgb25seSBiZWluZyBjYWxsZWQgb25jZSBwZXIgcmVzb3VyY2UuIFN0aWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vc3VwcG9ydCBvbGQgc3R5bGUgb2YgcGFzc2luZyBtb2R1bGVOYW1lIGJ1dCBkaXNjYXJkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhhdCBtb2R1bGVOYW1lIGluIGZhdm9yIG9mIHRoZSBpbnRlcm5hbCByZWYuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0QWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gdGV4dEFsdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9UdXJuIG9mZiBpbnRlcmFjdGl2ZSBzY3JpcHQgbWF0Y2hpbmcgZm9yIElFIGZvciBhbnkgZGVmaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FsbHMgaW4gdGhlIHRleHQsIHRoZW4gdHVybiBpdCBiYWNrIG9uIGF0IHRoZSBlbmQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoYXNJbnRlcmFjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9QcmltZSB0aGUgc3lzdGVtIGJ5IGNyZWF0aW5nIGEgbW9kdWxlIGluc3RhbmNlIGZvclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2l0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZXRNb2R1bGUobW9kdWxlTWFwKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vVHJhbnNmZXIgYW55IGNvbmZpZyB0byB0aGlzIG90aGVyIG1vZHVsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1Byb3AoY29uZmlnLmNvbmZpZywgaWQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuY29uZmlnW21vZHVsZU5hbWVdID0gY29uZmlnLmNvbmZpZ1tpZF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXEuZXhlYyh0ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdmcm9tdGV4dGV2YWwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnJvbVRleHQgZXZhbCBmb3IgJyArIGlkICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGZhaWxlZDogJyArIGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtpZF0pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc0ludGVyYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VJbnRlcmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTWFyayB0aGlzIGFzIGEgZGVwZW5kZW5jeSBmb3IgdGhlIHBsdWdpblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Jlc291cmNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwTWFwcy5wdXNoKG1vZHVsZU1hcCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N1cHBvcnQgYW5vbnltb3VzIG1vZHVsZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKG1vZHVsZU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9CaW5kIHRoZSB2YWx1ZSBvZiB0aGF0IG1vZHVsZSB0byB0aGUgdmFsdWUgZm9yIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9yZXNvdXJjZSBJRC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlKFttb2R1bGVOYW1lXSwgbG9hZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vVXNlIHBhcmVudE5hbWUgaGVyZSBzaW5jZSB0aGUgcGx1Z2luJ3MgbmFtZSBpcyBub3QgcmVsaWFibGUsXHJcbiAgICAgICAgICAgICAgICAgICAgLy9jb3VsZCBiZSBzb21lIHdlaXJkIHN0cmluZyB3aXRoIG5vIHBhdGggdGhhdCBhY3R1YWxseSB3YW50cyB0b1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVmZXJlbmNlIHRoZSBwYXJlbnROYW1lJ3MgcGF0aC5cclxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4ubG9hZChtYXAubmFtZSwgbG9jYWxSZXF1aXJlLCBsb2FkLCBjb25maWcpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnRleHQuZW5hYmxlKHBsdWdpbk1hcCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbk1hcHNbcGx1Z2luTWFwLmlkXSA9IHBsdWdpbk1hcDtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZW5hYmxlZFJlZ2lzdHJ5W3RoaXMubWFwLmlkXSA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vU2V0IGZsYWcgbWVudGlvbmluZyB0aGF0IHRoZSBtb2R1bGUgaXMgZW5hYmxpbmcsXHJcbiAgICAgICAgICAgICAgICAvL3NvIHRoYXQgaW1tZWRpYXRlIGNhbGxzIHRvIHRoZSBkZWZpbmVkIGNhbGxiYWNrc1xyXG4gICAgICAgICAgICAgICAgLy9mb3IgZGVwZW5kZW5jaWVzIGRvIG5vdCB0cmlnZ2VyIGluYWR2ZXJ0ZW50IGxvYWRcclxuICAgICAgICAgICAgICAgIC8vd2l0aCB0aGUgZGVwQ291bnQgc3RpbGwgYmVpbmcgemVyby5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxpbmcgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vRW5hYmxlIGVhY2ggZGVwZW5kZW5jeVxyXG4gICAgICAgICAgICAgICAgZWFjaCh0aGlzLmRlcE1hcHMsIGJpbmQodGhpcywgZnVuY3Rpb24gKGRlcE1hcCwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCwgbW9kLCBoYW5kbGVyO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGRlcE1hcCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9EZXBlbmRlbmN5IG5lZWRzIHRvIGJlIGNvbnZlcnRlZCB0byBhIGRlcE1hcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FuZCB3aXJlZCB1cCB0byB0aGlzIG1vZHVsZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVwTWFwID0gbWFrZU1vZHVsZU1hcChkZXBNYXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubWFwLmlzRGVmaW5lID8gdGhpcy5tYXAgOiB0aGlzLm1hcC5wYXJlbnRNYXApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnNraXBNYXApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcE1hcHNbaV0gPSBkZXBNYXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyID0gZ2V0T3duKGhhbmRsZXJzLCBkZXBNYXAuaWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwRXhwb3J0c1tpXSA9IGhhbmRsZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwQ291bnQgKz0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uKGRlcE1hcCwgJ2RlZmluZWQnLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChkZXBFeHBvcnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51bmRlZmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZpbmVEZXAoaSwgZGVwRXhwb3J0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmVycmJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uKGRlcE1hcCwgJ2Vycm9yJywgYmluZCh0aGlzLCB0aGlzLmVycmJhY2spKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV2ZW50cy5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gZGlyZWN0IGVycmJhY2sgb24gdGhpcyBtb2R1bGUsIGJ1dCBzb21ldGhpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsc2UgaXMgbGlzdGVuaW5nIGZvciBlcnJvcnMsIHNvIGJlIHN1cmUgdG9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHByb3BhZ2F0ZSB0aGUgZXJyb3IgY29ycmVjdGx5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb24oZGVwTWFwLCAnZXJyb3InLCBiaW5kKHRoaXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZXJyb3InLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZCA9IGRlcE1hcC5pZDtcclxuICAgICAgICAgICAgICAgICAgICBtb2QgPSByZWdpc3RyeVtpZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vU2tpcCBzcGVjaWFsIG1vZHVsZXMgbGlrZSAncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSdcclxuICAgICAgICAgICAgICAgICAgICAvL0Fsc28sIGRvbid0IGNhbGwgZW5hYmxlIGlmIGl0IGlzIGFscmVhZHkgZW5hYmxlZCxcclxuICAgICAgICAgICAgICAgICAgICAvL2ltcG9ydGFudCBpbiBjaXJjdWxhciBkZXBlbmRlbmN5IGNhc2VzLlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaGFzUHJvcChoYW5kbGVycywgaWQpICYmIG1vZCAmJiAhbW9kLmVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5lbmFibGUoZGVwTWFwLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9FbmFibGUgZWFjaCBwbHVnaW4gdGhhdCBpcyB1c2VkIGluXHJcbiAgICAgICAgICAgICAgICAvL2EgZGVwZW5kZW5jeVxyXG4gICAgICAgICAgICAgICAgZWFjaFByb3AodGhpcy5wbHVnaW5NYXBzLCBiaW5kKHRoaXMsIGZ1bmN0aW9uIChwbHVnaW5NYXApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBwbHVnaW5NYXAuaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2QgJiYgIW1vZC5lbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuZW5hYmxlKHBsdWdpbk1hcCwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrKCk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBvbjogZnVuY3Rpb24gKG5hbWUsIGNiKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2JzID0gdGhpcy5ldmVudHNbbmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNicykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNicyA9IHRoaXMuZXZlbnRzW25hbWVdID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYnMucHVzaChjYik7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBlbWl0OiBmdW5jdGlvbiAobmFtZSwgZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBlYWNoKHRoaXMuZXZlbnRzW25hbWVdLCBmdW5jdGlvbiAoY2IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYihldnQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmFtZSA9PT0gJ2Vycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vTm93IHRoYXQgdGhlIGVycm9yIGhhbmRsZXIgd2FzIHRyaWdnZXJlZCwgcmVtb3ZlXHJcbiAgICAgICAgICAgICAgICAgICAgLy90aGUgbGlzdGVuZXJzLCBzaW5jZSB0aGlzIGJyb2tlbiBNb2R1bGUgaW5zdGFuY2VcclxuICAgICAgICAgICAgICAgICAgICAvL2NhbiBzdGF5IGFyb3VuZCBmb3IgYSB3aGlsZSBpbiB0aGUgcmVnaXN0cnkuXHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRzW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2FsbEdldE1vZHVsZShhcmdzKSB7XHJcbiAgICAgICAgICAgIC8vU2tpcCBtb2R1bGVzIGFscmVhZHkgZGVmaW5lZC5cclxuICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIGFyZ3NbMF0pKSB7XHJcbiAgICAgICAgICAgICAgICBnZXRNb2R1bGUobWFrZU1vZHVsZU1hcChhcmdzWzBdLCBudWxsLCB0cnVlKSkuaW5pdChhcmdzWzFdLCBhcmdzWzJdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGlzdGVuZXIobm9kZSwgZnVuYywgbmFtZSwgaWVOYW1lKSB7XHJcbiAgICAgICAgICAgIC8vRmF2b3IgZGV0YWNoRXZlbnQgYmVjYXVzZSBvZiBJRTlcclxuICAgICAgICAgICAgLy9pc3N1ZSwgc2VlIGF0dGFjaEV2ZW50L2FkZEV2ZW50TGlzdGVuZXIgY29tbWVudCBlbHNld2hlcmVcclxuICAgICAgICAgICAgLy9pbiB0aGlzIGZpbGUuXHJcbiAgICAgICAgICAgIGlmIChub2RlLmRldGFjaEV2ZW50ICYmICFpc09wZXJhKSB7XHJcbiAgICAgICAgICAgICAgICAvL1Byb2JhYmx5IElFLiBJZiBub3QgaXQgd2lsbCB0aHJvdyBhbiBlcnJvciwgd2hpY2ggd2lsbCBiZVxyXG4gICAgICAgICAgICAgICAgLy91c2VmdWwgdG8ga25vdy5cclxuICAgICAgICAgICAgICAgIGlmIChpZU5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlLmRldGFjaEV2ZW50KGllTmFtZSwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgZnVuYywgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHaXZlbiBhbiBldmVudCBmcm9tIGEgc2NyaXB0IG5vZGUsIGdldCB0aGUgcmVxdWlyZWpzIGluZm8gZnJvbSBpdCxcclxuICAgICAgICAgKiBhbmQgdGhlbiByZW1vdmVzIHRoZSBldmVudCBsaXN0ZW5lcnMgb24gdGhlIG5vZGUuXHJcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZ0XHJcbiAgICAgICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRTY3JpcHREYXRhKGV2dCkge1xyXG4gICAgICAgICAgICAvL1VzaW5nIGN1cnJlbnRUYXJnZXQgaW5zdGVhZCBvZiB0YXJnZXQgZm9yIEZpcmVmb3ggMi4wJ3Mgc2FrZS4gTm90XHJcbiAgICAgICAgICAgIC8vYWxsIG9sZCBicm93c2VycyB3aWxsIGJlIHN1cHBvcnRlZCwgYnV0IHRoaXMgb25lIHdhcyBlYXN5IGVub3VnaFxyXG4gICAgICAgICAgICAvL3RvIHN1cHBvcnQgYW5kIHN0aWxsIG1ha2VzIHNlbnNlLlxyXG4gICAgICAgICAgICB2YXIgbm9kZSA9IGV2dC5jdXJyZW50VGFyZ2V0IHx8IGV2dC5zcmNFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgLy9SZW1vdmUgdGhlIGxpc3RlbmVycyBvbmNlIGhlcmUuXHJcbiAgICAgICAgICAgIHJlbW92ZUxpc3RlbmVyKG5vZGUsIGNvbnRleHQub25TY3JpcHRMb2FkLCAnbG9hZCcsICdvbnJlYWR5c3RhdGVjaGFuZ2UnKTtcclxuICAgICAgICAgICAgcmVtb3ZlTGlzdGVuZXIobm9kZSwgY29udGV4dC5vblNjcmlwdEVycm9yLCAnZXJyb3InKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBub2RlOiBub2RlLFxyXG4gICAgICAgICAgICAgICAgaWQ6IG5vZGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcmVxdWlyZW1vZHVsZScpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpbnRha2VEZWZpbmVzKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncztcclxuXHJcbiAgICAgICAgICAgIC8vQW55IGRlZmluZWQgbW9kdWxlcyBpbiB0aGUgZ2xvYmFsIHF1ZXVlLCBpbnRha2UgdGhlbSBub3cuXHJcbiAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xyXG5cclxuICAgICAgICAgICAgLy9NYWtlIHN1cmUgYW55IHJlbWFpbmluZyBkZWZRdWV1ZSBpdGVtcyBnZXQgcHJvcGVybHkgcHJvY2Vzc2VkLlxyXG4gICAgICAgICAgICB3aGlsZSAoZGVmUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBhcmdzID0gZGVmUXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIGlmIChhcmdzWzBdID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdtaXNtYXRjaCcsICdNaXNtYXRjaGVkIGFub255bW91cyBkZWZpbmUoKSBtb2R1bGU6ICcgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzW2FyZ3MubGVuZ3RoIC0gMV0pKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9hcmdzIGFyZSBpZCwgZGVwcywgZmFjdG9yeS4gU2hvdWxkIGJlIG5vcm1hbGl6ZWQgYnkgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy9kZWZpbmUoKSBmdW5jdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICBjYWxsR2V0TW9kdWxlKGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRleHQuZGVmUXVldWVNYXAgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgIGNvbmZpZzogY29uZmlnLFxyXG4gICAgICAgICAgICBjb250ZXh0TmFtZTogY29udGV4dE5hbWUsXHJcbiAgICAgICAgICAgIHJlZ2lzdHJ5OiByZWdpc3RyeSxcclxuICAgICAgICAgICAgZGVmaW5lZDogZGVmaW5lZCxcclxuICAgICAgICAgICAgdXJsRmV0Y2hlZDogdXJsRmV0Y2hlZCxcclxuICAgICAgICAgICAgZGVmUXVldWU6IGRlZlF1ZXVlLFxyXG4gICAgICAgICAgICBkZWZRdWV1ZU1hcDoge30sXHJcbiAgICAgICAgICAgIE1vZHVsZTogTW9kdWxlLFxyXG4gICAgICAgICAgICBtYWtlTW9kdWxlTWFwOiBtYWtlTW9kdWxlTWFwLFxyXG4gICAgICAgICAgICBuZXh0VGljazogcmVxLm5leHRUaWNrLFxyXG4gICAgICAgICAgICBvbkVycm9yOiBvbkVycm9yLFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFNldCBhIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBjb250ZXh0LlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gY2ZnIGNvbmZpZyBvYmplY3QgdG8gaW50ZWdyYXRlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29uZmlndXJlOiBmdW5jdGlvbiAoY2ZnKSB7XHJcbiAgICAgICAgICAgICAgICAvL01ha2Ugc3VyZSB0aGUgYmFzZVVybCBlbmRzIGluIGEgc2xhc2guXHJcbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmJhc2VVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2ZnLmJhc2VVcmwuY2hhckF0KGNmZy5iYXNlVXJsLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2ZnLmJhc2VVcmwgKz0gJy8nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IG9sZCBzdHlsZSB1cmxBcmdzIHN0cmluZyB0byBhIGZ1bmN0aW9uLlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjZmcudXJsQXJncyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdXJsQXJncyA9IGNmZy51cmxBcmdzO1xyXG4gICAgICAgICAgICAgICAgICAgIGNmZy51cmxBcmdzID0gZnVuY3Rpb24oaWQsIHVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHVybC5pbmRleE9mKCc/JykgPT09IC0xID8gJz8nIDogJyYnKSArIHVybEFyZ3M7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1NhdmUgb2ZmIHRoZSBwYXRocyBzaW5jZSB0aGV5IHJlcXVpcmUgc3BlY2lhbCBwcm9jZXNzaW5nLFxyXG4gICAgICAgICAgICAgICAgLy90aGV5IGFyZSBhZGRpdGl2ZS5cclxuICAgICAgICAgICAgICAgIHZhciBzaGltID0gY29uZmlnLnNoaW0sXHJcbiAgICAgICAgICAgICAgICAgICAgb2JqcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBlYWNoUHJvcChjZmcsIGZ1bmN0aW9uICh2YWx1ZSwgcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpzW3Byb3BdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY29uZmlnW3Byb3BdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWdbcHJvcF0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaXhpbihjb25maWdbcHJvcF0sIHZhbHVlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWdbcHJvcF0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL1JldmVyc2UgbWFwIHRoZSBidW5kbGVzXHJcbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmJ1bmRsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlYWNoUHJvcChjZmcuYnVuZGxlcywgZnVuY3Rpb24gKHZhbHVlLCBwcm9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2godmFsdWUsIGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodiAhPT0gcHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1bmRsZXNNYXBbdl0gPSBwcm9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL01lcmdlIHNoaW1cclxuICAgICAgICAgICAgICAgIGlmIChjZmcuc2hpbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVhY2hQcm9wKGNmZy5zaGltLCBmdW5jdGlvbiAodmFsdWUsIGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIHRoZSBzdHJ1Y3R1cmVcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXBzOiB2YWx1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHZhbHVlLmV4cG9ydHMgfHwgdmFsdWUuaW5pdCkgJiYgIXZhbHVlLmV4cG9ydHNGbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUuZXhwb3J0c0ZuID0gY29udGV4dC5tYWtlU2hpbUV4cG9ydHModmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoaW1baWRdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnNoaW0gPSBzaGltO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vQWRqdXN0IHBhY2thZ2VzIGlmIG5lY2Vzc2FyeS5cclxuICAgICAgICAgICAgICAgIGlmIChjZmcucGFja2FnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBlYWNoKGNmZy5wYWNrYWdlcywgZnVuY3Rpb24gKHBrZ09iaikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24sIG5hbWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwa2dPYmogPSB0eXBlb2YgcGtnT2JqID09PSAnc3RyaW5nJyA/IHtuYW1lOiBwa2dPYmp9IDogcGtnT2JqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHBrZ09iai5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbiA9IHBrZ09iai5sb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25maWcucGF0aHNbbmFtZV0gPSBwa2dPYmoubG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2F2ZSBwb2ludGVyIHRvIG1haW4gbW9kdWxlIElEIGZvciBwa2cgbmFtZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9SZW1vdmUgbGVhZGluZyBkb3QgaW4gbWFpbiwgc28gbWFpbiBwYXRocyBhcmUgbm9ybWFsaXplZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmQgcmVtb3ZlIGFueSB0cmFpbGluZyAuanMsIHNpbmNlIGRpZmZlcmVudCBwYWNrYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZW52cyBoYXZlIGRpZmZlcmVudCBjb252ZW50aW9uczogc29tZSB1c2UgYSBtb2R1bGUgbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9zb21lIHVzZSBhIGZpbGUgbmFtZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnBrZ3NbbmFtZV0gPSBwa2dPYmoubmFtZSArICcvJyArIChwa2dPYmoubWFpbiB8fCAnbWFpbicpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjdXJyRGlyUmVnRXhwLCAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiB0aGVyZSBhcmUgYW55IFwid2FpdGluZyB0byBleGVjdXRlXCIgbW9kdWxlcyBpbiB0aGUgcmVnaXN0cnksXHJcbiAgICAgICAgICAgICAgICAvL3VwZGF0ZSB0aGUgbWFwcyBmb3IgdGhlbSwgc2luY2UgdGhlaXIgaW5mbywgbGlrZSBVUkxzIHRvIGxvYWQsXHJcbiAgICAgICAgICAgICAgICAvL21heSBoYXZlIGNoYW5nZWQuXHJcbiAgICAgICAgICAgICAgICBlYWNoUHJvcChyZWdpc3RyeSwgZnVuY3Rpb24gKG1vZCwgaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0lmIG1vZHVsZSBhbHJlYWR5IGhhcyBpbml0IGNhbGxlZCwgc2luY2UgaXQgaXMgdG9vXHJcbiAgICAgICAgICAgICAgICAgICAgLy9sYXRlIHRvIG1vZGlmeSB0aGVtLCBhbmQgaWdub3JlIHVubm9ybWFsaXplZCBvbmVzXHJcbiAgICAgICAgICAgICAgICAgICAgLy9zaW5jZSB0aGV5IGFyZSB0cmFuc2llbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2QuaW5pdGVkICYmICFtb2QubWFwLnVubm9ybWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2QubWFwID0gbWFrZU1vZHVsZU1hcChpZCwgbnVsbCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiBhIGRlcHMgYXJyYXkgb3IgYSBjb25maWcgY2FsbGJhY2sgaXMgc3BlY2lmaWVkLCB0aGVuIGNhbGxcclxuICAgICAgICAgICAgICAgIC8vcmVxdWlyZSB3aXRoIHRob3NlIGFyZ3MuIFRoaXMgaXMgdXNlZnVsIHdoZW4gcmVxdWlyZSBpcyBkZWZpbmVkIGFzIGFcclxuICAgICAgICAgICAgICAgIC8vY29uZmlnIG9iamVjdCBiZWZvcmUgcmVxdWlyZS5qcyBpcyBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICBpZiAoY2ZnLmRlcHMgfHwgY2ZnLmNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dC5yZXF1aXJlKGNmZy5kZXBzIHx8IFtdLCBjZmcuY2FsbGJhY2spO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgbWFrZVNoaW1FeHBvcnRzOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZuKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlLmluaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0ID0gdmFsdWUuaW5pdC5hcHBseShnbG9iYWwsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXQgfHwgKHZhbHVlLmV4cG9ydHMgJiYgZ2V0R2xvYmFsKHZhbHVlLmV4cG9ydHMpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmbjtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG1ha2VSZXF1aXJlOiBmdW5jdGlvbiAocmVsTWFwLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBsb2NhbFJlcXVpcmUoZGVwcywgY2FsbGJhY2ssIGVycmJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQsIG1hcCwgcmVxdWlyZU1vZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMuZW5hYmxlQnVpbGRDYWxsYmFjayAmJiBjYWxsYmFjayAmJiBpc0Z1bmN0aW9uKGNhbGxiYWNrKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjay5fX3JlcXVpcmVKc0J1aWxkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGVwcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0ludmFsaWQgY2FsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdyZXF1aXJlYXJncycsICdJbnZhbGlkIHJlcXVpcmUgY2FsbCcpLCBlcnJiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiByZXF1aXJlfGV4cG9ydHN8bW9kdWxlIGFyZSByZXF1ZXN0ZWQsIGdldCB0aGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy92YWx1ZSBmb3IgdGhlbSBmcm9tIHRoZSBzcGVjaWFsIGhhbmRsZXJzLiBDYXZlYXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBvbmx5IHdvcmtzIHdoaWxlIG1vZHVsZSBpcyBiZWluZyBkZWZpbmVkLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVsTWFwICYmIGhhc1Byb3AoaGFuZGxlcnMsIGRlcHMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlcnNbZGVwc10ocmVnaXN0cnlbcmVsTWFwLmlkXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3luY2hyb25vdXMgYWNjZXNzIHRvIG9uZSBtb2R1bGUuIElmIHJlcXVpcmUuZ2V0IGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYXZhaWxhYmxlIChhcyBpbiB0aGUgTm9kZSBhZGFwdGVyKSwgcHJlZmVyIHRoYXQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxLmdldChjb250ZXh0LCBkZXBzLCByZWxNYXAsIGxvY2FsUmVxdWlyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vTm9ybWFsaXplIG1vZHVsZSBuYW1lLCBpZiBpdCBjb250YWlucyAuIG9yIC4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcCA9IG1ha2VNb2R1bGVNYXAoZGVwcywgcmVsTWFwLCBmYWxzZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkID0gbWFwLmlkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoYXNQcm9wKGRlZmluZWQsIGlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IobWFrZUVycm9yKCdub3Rsb2FkZWQnLCAnTW9kdWxlIG5hbWUgXCInICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIiBoYXMgbm90IGJlZW4gbG9hZGVkIHlldCBmb3IgY29udGV4dDogJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0TmFtZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocmVsTWFwID8gJycgOiAnLiBVc2UgcmVxdWlyZShbXSknKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZpbmVkW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vR3JhYiBkZWZpbmVzIHdhaXRpbmcgaW4gdGhlIGdsb2JhbCBxdWV1ZS5cclxuICAgICAgICAgICAgICAgICAgICBpbnRha2VEZWZpbmVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vTWFyayBhbGwgdGhlIGRlcGVuZGVuY2llcyBhcyBuZWVkaW5nIHRvIGJlIGxvYWRlZC5cclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9Tb21lIGRlZmluZXMgY291bGQgaGF2ZSBiZWVuIGFkZGVkIHNpbmNlIHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3JlcXVpcmUgY2FsbCwgY29sbGVjdCB0aGVtLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRha2VEZWZpbmVzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kID0gZ2V0TW9kdWxlKG1ha2VNb2R1bGVNYXAobnVsbCwgcmVsTWFwKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL1N0b3JlIGlmIG1hcCBjb25maWcgc2hvdWxkIGJlIGFwcGxpZWQgdG8gdGhpcyByZXF1aXJlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY2FsbCBmb3IgZGVwZW5kZW5jaWVzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kLnNraXBNYXAgPSBvcHRpb25zLnNraXBNYXA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlTW9kLmluaXQoZGVwcywgY2FsbGJhY2ssIGVycmJhY2ssIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja0xvYWRlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxSZXF1aXJlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1peGluKGxvY2FsUmVxdWlyZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzQnJvd3NlcjogaXNCcm93c2VyLFxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICAgICAgICAgKiBDb252ZXJ0cyBhIG1vZHVsZSBuYW1lICsgLmV4dGVuc2lvbiBpbnRvIGFuIFVSTCBwYXRoLlxyXG4gICAgICAgICAgICAgICAgICAgICAqICpSZXF1aXJlcyogdGhlIHVzZSBvZiBhIG1vZHVsZSBuYW1lLiBJdCBkb2VzIG5vdCBzdXBwb3J0IHVzaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICogcGxhaW4gVVJMcyBsaWtlIG5hbWVUb1VybC5cclxuICAgICAgICAgICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgICAgICAgICB0b1VybDogZnVuY3Rpb24gKG1vZHVsZU5hbWVQbHVzRXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleCA9IG1vZHVsZU5hbWVQbHVzRXh0Lmxhc3RJbmRleE9mKCcuJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50ID0gbW9kdWxlTmFtZVBsdXNFeHQuc3BsaXQoJy8nKVswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmVsYXRpdmUgPSBzZWdtZW50ID09PSAnLicgfHwgc2VnbWVudCA9PT0gJy4uJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vSGF2ZSBhIGZpbGUgZXh0ZW5zaW9uIGFsaWFzLCBhbmQgaXQgaXMgbm90IHRoZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RvdHMgZnJvbSBhIHJlbGF0aXZlIHBhdGguXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEgJiYgKCFpc1JlbGF0aXZlIHx8IGluZGV4ID4gMSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9IG1vZHVsZU5hbWVQbHVzRXh0LnN1YnN0cmluZyhpbmRleCwgbW9kdWxlTmFtZVBsdXNFeHQubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWVQbHVzRXh0ID0gbW9kdWxlTmFtZVBsdXNFeHQuc3Vic3RyaW5nKDAsIGluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQubmFtZVRvVXJsKG5vcm1hbGl6ZShtb2R1bGVOYW1lUGx1c0V4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsTWFwICYmIHJlbE1hcC5pZCwgdHJ1ZSksIGV4dCwgIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmluZWQ6IGZ1bmN0aW9uIChpZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaGFzUHJvcChkZWZpbmVkLCBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIGZhbHNlLCB0cnVlKS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlY2lmaWVkOiBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQgPSBtYWtlTW9kdWxlTWFwKGlkLCByZWxNYXAsIGZhbHNlLCB0cnVlKS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhhc1Byb3AoZGVmaW5lZCwgaWQpIHx8IGhhc1Byb3AocmVnaXN0cnksIGlkKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL09ubHkgYWxsb3cgdW5kZWYgb24gdG9wIGxldmVsIHJlcXVpcmUgY2FsbHNcclxuICAgICAgICAgICAgICAgIGlmICghcmVsTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYWxSZXF1aXJlLnVuZGVmID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vQmluZCBhbnkgd2FpdGluZyBkZWZpbmUoKSBjYWxscyB0byB0aGlzIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZml4IGZvciAjNDA4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcCA9IG1ha2VNb2R1bGVNYXAoaWQsIHJlbE1hcCwgdHJ1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2QgPSBnZXRPd24ocmVnaXN0cnksIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZC51bmRlZmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlU2NyaXB0KGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBkZWZpbmVkW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHVybEZldGNoZWRbbWFwLnVybF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSB1bmRlZkV2ZW50c1tpZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0NsZWFuIHF1ZXVlZCBkZWZpbmVzIHRvby4gR28gYmFja3dhcmRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vaW4gYXJyYXkgc28gdGhhdCB0aGUgc3BsaWNlcyBkbyBub3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9tZXNzIHVwIHRoZSBpdGVyYXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhY2hSZXZlcnNlKGRlZlF1ZXVlLCBmdW5jdGlvbihhcmdzLCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZRdWV1ZS5zcGxpY2UoaSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY29udGV4dC5kZWZRdWV1ZU1hcFtpZF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0hvbGQgb24gdG8gbGlzdGVuZXJzIGluIGNhc2UgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL21vZHVsZSB3aWxsIGJlIGF0dGVtcHRlZCB0byBiZSByZWxvYWRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy91c2luZyBhIGRpZmZlcmVudCBjb25maWcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kLmV2ZW50cy5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5kZWZFdmVudHNbaWRdID0gbW9kLmV2ZW50cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblJlZ2lzdHJ5KGlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsUmVxdWlyZTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBDYWxsZWQgdG8gZW5hYmxlIGEgbW9kdWxlIGlmIGl0IGlzIHN0aWxsIGluIHRoZSByZWdpc3RyeVxyXG4gICAgICAgICAgICAgKiBhd2FpdGluZyBlbmFibGVtZW50LiBBIHNlY29uZCBhcmcsIHBhcmVudCwgdGhlIHBhcmVudCBtb2R1bGUsXHJcbiAgICAgICAgICAgICAqIGlzIHBhc3NlZCBpbiBmb3IgY29udGV4dCwgd2hlbiB0aGlzIG1ldGhvZCBpcyBvdmVycmlkZGVuIGJ5XHJcbiAgICAgICAgICAgICAqIHRoZSBvcHRpbWl6ZXIuIE5vdCBzaG93biBoZXJlIHRvIGtlZXAgY29kZSBjb21wYWN0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiAoZGVwTWFwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW9kID0gZ2V0T3duKHJlZ2lzdHJ5LCBkZXBNYXAuaWQpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1vZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdldE1vZHVsZShkZXBNYXApLmVuYWJsZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludGVybmFsIG1ldGhvZCB1c2VkIGJ5IGVudmlyb25tZW50IGFkYXB0ZXJzIHRvIGNvbXBsZXRlIGEgbG9hZCBldmVudC5cclxuICAgICAgICAgICAgICogQSBsb2FkIGV2ZW50IGNvdWxkIGJlIGEgc2NyaXB0IGxvYWQgb3IganVzdCBhIGxvYWQgcGFzcyBmcm9tIGEgc3luY2hyb25vdXNcclxuICAgICAgICAgICAgICogbG9hZCBjYWxsLlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kdWxlTmFtZSB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlIHRvIHBvdGVudGlhbGx5IGNvbXBsZXRlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgY29tcGxldGVMb2FkOiBmdW5jdGlvbiAobW9kdWxlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZvdW5kLCBhcmdzLCBtb2QsXHJcbiAgICAgICAgICAgICAgICAgICAgc2hpbSA9IGdldE93bihjb25maWcuc2hpbSwgbW9kdWxlTmFtZSkgfHwge30sXHJcbiAgICAgICAgICAgICAgICAgICAgc2hFeHBvcnRzID0gc2hpbS5leHBvcnRzO1xyXG5cclxuICAgICAgICAgICAgICAgIHRha2VHbG9iYWxRdWV1ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHdoaWxlIChkZWZRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzID0gZGVmUXVldWUuc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnc1swXSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzWzBdID0gbW9kdWxlTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9JZiBhbHJlYWR5IGZvdW5kIGFuIGFub255bW91cyBtb2R1bGUgYW5kIGJvdW5kIGl0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdG8gdGhpcyBuYW1lLCB0aGVuIHRoaXMgaXMgc29tZSBvdGhlciBhbm9uIG1vZHVsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3dhaXRpbmcgZm9yIGl0cyBjb21wbGV0ZUxvYWQgdG8gZmlyZS5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmdzWzBdID09PSBtb2R1bGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vRm91bmQgbWF0Y2hpbmcgZGVmaW5lIGNhbGwgZm9yIHRoaXMgc2NyaXB0IVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYWxsR2V0TW9kdWxlKGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZU1hcCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vRG8gdGhpcyBhZnRlciB0aGUgY3ljbGUgb2YgY2FsbEdldE1vZHVsZSBpbiBjYXNlIHRoZSByZXN1bHRcclxuICAgICAgICAgICAgICAgIC8vb2YgdGhvc2UgY2FsbHMvaW5pdCBjYWxscyBjaGFuZ2VzIHRoZSByZWdpc3RyeS5cclxuICAgICAgICAgICAgICAgIG1vZCA9IGdldE93bihyZWdpc3RyeSwgbW9kdWxlTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFmb3VuZCAmJiAhaGFzUHJvcChkZWZpbmVkLCBtb2R1bGVOYW1lKSAmJiBtb2QgJiYgIW1vZC5pbml0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLmVuZm9yY2VEZWZpbmUgJiYgKCFzaEV4cG9ydHMgfHwgIWdldEdsb2JhbChzaEV4cG9ydHMpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzUGF0aEZhbGxiYWNrKG1vZHVsZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb25FcnJvcihtYWtlRXJyb3IoJ25vZGVmaW5lJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ05vIGRlZmluZSBjYWxsIGZvciAnICsgbW9kdWxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21vZHVsZU5hbWVdKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL0Egc2NyaXB0IHRoYXQgZG9lcyBub3QgY2FsbCBkZWZpbmUoKSwgc28ganVzdCBzaW11bGF0ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3RoZSBjYWxsIGZvciBpdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbEdldE1vZHVsZShbbW9kdWxlTmFtZSwgKHNoaW0uZGVwcyB8fCBbXSksIHNoaW0uZXhwb3J0c0ZuXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNoZWNrTG9hZGVkKCk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogQ29udmVydHMgYSBtb2R1bGUgbmFtZSB0byBhIGZpbGUgcGF0aC4gU3VwcG9ydHMgY2FzZXMgd2hlcmVcclxuICAgICAgICAgICAgICogbW9kdWxlTmFtZSBtYXkgYWN0dWFsbHkgYmUganVzdCBhbiBVUkwuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhhdCBpdCAqKmRvZXMgbm90KiogY2FsbCBub3JtYWxpemUgb24gdGhlIG1vZHVsZU5hbWUsXHJcbiAgICAgICAgICAgICAqIGl0IGlzIGFzc3VtZWQgdG8gaGF2ZSBhbHJlYWR5IGJlZW4gbm9ybWFsaXplZC4gVGhpcyBpcyBhblxyXG4gICAgICAgICAgICAgKiBpbnRlcm5hbCBBUEksIG5vdCBhIHB1YmxpYyBvbmUuIFVzZSB0b1VybCBmb3IgdGhlIHB1YmxpYyBBUEkuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBuYW1lVG9Vcmw6IGZ1bmN0aW9uIChtb2R1bGVOYW1lLCBleHQsIHNraXBFeHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwYXRocywgc3ltcywgaSwgcGFyZW50TW9kdWxlLCB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50UGF0aCwgYnVuZGxlSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGtnTWFpbiA9IGdldE93bihjb25maWcucGtncywgbW9kdWxlTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHBrZ01haW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2R1bGVOYW1lID0gcGtnTWFpbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBidW5kbGVJZCA9IGdldE93bihidW5kbGVzTWFwLCBtb2R1bGVOYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYnVuZGxlSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5uYW1lVG9VcmwoYnVuZGxlSWQsIGV4dCwgc2tpcEV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy9JZiBhIGNvbG9uIGlzIGluIHRoZSBVUkwsIGl0IGluZGljYXRlcyBhIHByb3RvY29sIGlzIHVzZWQgYW5kIGl0IGlzIGp1c3RcclxuICAgICAgICAgICAgICAgIC8vYW4gVVJMIHRvIGEgZmlsZSwgb3IgaWYgaXQgc3RhcnRzIHdpdGggYSBzbGFzaCwgY29udGFpbnMgYSBxdWVyeSBhcmcgKGkuZS4gPylcclxuICAgICAgICAgICAgICAgIC8vb3IgZW5kcyB3aXRoIC5qcywgdGhlbiBhc3N1bWUgdGhlIHVzZXIgbWVhbnQgdG8gdXNlIGFuIHVybCBhbmQgbm90IGEgbW9kdWxlIGlkLlxyXG4gICAgICAgICAgICAgICAgLy9UaGUgc2xhc2ggaXMgaW1wb3J0YW50IGZvciBwcm90b2NvbC1sZXNzIFVSTHMgYXMgd2VsbCBhcyBmdWxsIHBhdGhzLlxyXG4gICAgICAgICAgICAgICAgaWYgKHJlcS5qc0V4dFJlZ0V4cC50ZXN0KG1vZHVsZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9KdXN0IGEgcGxhaW4gcGF0aCwgbm90IG1vZHVsZSBuYW1lIGxvb2t1cCwgc28ganVzdCByZXR1cm4gaXQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9BZGQgZXh0ZW5zaW9uIGlmIGl0IGlzIGluY2x1ZGVkLiBUaGlzIGlzIGEgYml0IHdvbmt5LCBvbmx5IG5vbi0uanMgdGhpbmdzIHBhc3NcclxuICAgICAgICAgICAgICAgICAgICAvL2FuIGV4dGVuc2lvbiwgdGhpcyBtZXRob2QgcHJvYmFibHkgbmVlZHMgdG8gYmUgcmV3b3JrZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gbW9kdWxlTmFtZSArIChleHQgfHwgJycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvL0EgbW9kdWxlIHRoYXQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgcGF0aC5cclxuICAgICAgICAgICAgICAgICAgICBwYXRocyA9IGNvbmZpZy5wYXRocztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3ltcyA9IG1vZHVsZU5hbWUuc3BsaXQoJy8nKTtcclxuICAgICAgICAgICAgICAgICAgICAvL0ZvciBlYWNoIG1vZHVsZSBuYW1lIHNlZ21lbnQsIHNlZSBpZiB0aGVyZSBpcyBhIHBhdGhcclxuICAgICAgICAgICAgICAgICAgICAvL3JlZ2lzdGVyZWQgZm9yIGl0LiBTdGFydCB3aXRoIG1vc3Qgc3BlY2lmaWMgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vYW5kIHdvcmsgdXAgZnJvbSBpdC5cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBzeW1zLmxlbmd0aDsgaSA+IDA7IGkgLT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRNb2R1bGUgPSBzeW1zLnNsaWNlKDAsIGkpLmpvaW4oJy8nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGggPSBnZXRPd24ocGF0aHMsIHBhcmVudE1vZHVsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0lmIGFuIGFycmF5LCBpdCBtZWFucyB0aGVyZSBhcmUgYSBmZXcgY2hvaWNlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vQ2hvb3NlIHRoZSBvbmUgdGhhdCBpcyBkZXNpcmVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNBcnJheShwYXJlbnRQYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudFBhdGggPSBwYXJlbnRQYXRoWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ltcy5zcGxpY2UoMCwgaSwgcGFyZW50UGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9Kb2luIHRoZSBwYXRoIHBhcnRzIHRvZ2V0aGVyLCB0aGVuIGZpZ3VyZSBvdXQgaWYgYmFzZVVybCBpcyBuZWVkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsID0gc3ltcy5qb2luKCcvJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsICs9IChleHQgfHwgKC9eZGF0YVxcOnxeYmxvYlxcOnxcXD8vLnRlc3QodXJsKSB8fCBza2lwRXh0ID8gJycgOiAnLmpzJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHVybCA9ICh1cmwuY2hhckF0KDApID09PSAnLycgfHwgdXJsLm1hdGNoKC9eW1xcd1xcK1xcLlxcLV0rOi8pID8gJycgOiBjb25maWcuYmFzZVVybCkgKyB1cmw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZy51cmxBcmdzICYmICEvXmJsb2JcXDovLnRlc3QodXJsKSA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdXJsICsgY29uZmlnLnVybEFyZ3MobW9kdWxlTmFtZSwgdXJsKSA6IHVybDtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8vRGVsZWdhdGVzIHRvIHJlcS5sb2FkLiBCcm9rZW4gb3V0IGFzIGEgc2VwYXJhdGUgZnVuY3Rpb24gdG9cclxuICAgICAgICAgICAgLy9hbGxvdyBvdmVycmlkaW5nIGluIHRoZSBvcHRpbWl6ZXIuXHJcbiAgICAgICAgICAgIGxvYWQ6IGZ1bmN0aW9uIChpZCwgdXJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXEubG9hZChjb250ZXh0LCBpZCwgdXJsKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBFeGVjdXRlcyBhIG1vZHVsZSBjYWxsYmFjayBmdW5jdGlvbi4gQnJva2VuIG91dCBhcyBhIHNlcGFyYXRlIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgICAqIHNvbGVseSB0byBhbGxvdyB0aGUgYnVpbGQgc3lzdGVtIHRvIHNlcXVlbmNlIHRoZSBmaWxlcyBpbiB0aGUgYnVpbHRcclxuICAgICAgICAgICAgICogbGF5ZXIgaW4gdGhlIHJpZ2h0IHNlcXVlbmNlLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZXhlY0NiOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2ssIGFyZ3MsIGV4cG9ydHMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShleHBvcnRzLCBhcmdzKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBjYWxsYmFjayBmb3Igc2NyaXB0IGxvYWRzLCB1c2VkIHRvIGNoZWNrIHN0YXR1cyBvZiBsb2FkaW5nLlxyXG4gICAgICAgICAgICAgKlxyXG4gICAgICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldnQgdGhlIGV2ZW50IGZyb20gdGhlIGJyb3dzZXIgZm9yIHRoZSBzY3JpcHRcclxuICAgICAgICAgICAgICogdGhhdCB3YXMgbG9hZGVkLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb25TY3JpcHRMb2FkOiBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICAvL1VzaW5nIGN1cnJlbnRUYXJnZXQgaW5zdGVhZCBvZiB0YXJnZXQgZm9yIEZpcmVmb3ggMi4wJ3Mgc2FrZS4gTm90XHJcbiAgICAgICAgICAgICAgICAvL2FsbCBvbGQgYnJvd3NlcnMgd2lsbCBiZSBzdXBwb3J0ZWQsIGJ1dCB0aGlzIG9uZSB3YXMgZWFzeSBlbm91Z2hcclxuICAgICAgICAgICAgICAgIC8vdG8gc3VwcG9ydCBhbmQgc3RpbGwgbWFrZXMgc2Vuc2UuXHJcbiAgICAgICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdsb2FkJyB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVhZHlSZWdFeHAudGVzdCgoZXZ0LmN1cnJlbnRUYXJnZXQgfHwgZXZ0LnNyY0VsZW1lbnQpLnJlYWR5U3RhdGUpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUmVzZXQgaW50ZXJhY3RpdmUgc2NyaXB0IHNvIGEgc2NyaXB0IG5vZGUgaXMgbm90IGhlbGQgb250byBmb3JcclxuICAgICAgICAgICAgICAgICAgICAvL3RvIGxvbmcuXHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JpcHQgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL1B1bGwgb3V0IHRoZSBuYW1lIG9mIHRoZSBtb2R1bGUgYW5kIHRoZSBjb250ZXh0LlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gZ2V0U2NyaXB0RGF0YShldnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29tcGxldGVMb2FkKGRhdGEuaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIENhbGxiYWNrIGZvciBzY3JpcHQgZXJyb3JzLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgb25TY3JpcHRFcnJvcjogZnVuY3Rpb24gKGV2dCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBnZXRTY3JpcHREYXRhKGV2dCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhc1BhdGhGYWxsYmFjayhkYXRhLmlkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZWFjaFByb3AocmVnaXN0cnksIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKCdfQHInKSAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFjaCh2YWx1ZS5kZXBNYXBzLCBmdW5jdGlvbihkZXBNYXApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGVwTWFwLmlkID09PSBkYXRhLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvbkVycm9yKG1ha2VFcnJvcignc2NyaXB0ZXJyb3InLCAnU2NyaXB0IGVycm9yIGZvciBcIicgKyBkYXRhLmlkICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBhcmVudHMubGVuZ3RoID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiLCBuZWVkZWQgYnk6ICcgKyBwYXJlbnRzLmpvaW4oJywgJykgOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCInKSwgZXZ0LCBbZGF0YS5pZF0pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnRleHQucmVxdWlyZSA9IGNvbnRleHQubWFrZVJlcXVpcmUoKTtcclxuICAgICAgICByZXR1cm4gY29udGV4dDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1haW4gZW50cnkgcG9pbnQuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlIG9ubHkgYXJndW1lbnQgdG8gcmVxdWlyZSBpcyBhIHN0cmluZywgdGhlbiB0aGUgbW9kdWxlIHRoYXRcclxuICAgICAqIGlzIHJlcHJlc2VudGVkIGJ5IHRoYXQgc3RyaW5nIGlzIGZldGNoZWQgZm9yIHRoZSBhcHByb3ByaWF0ZSBjb250ZXh0LlxyXG4gICAgICpcclxuICAgICAqIElmIHRoZSBmaXJzdCBhcmd1bWVudCBpcyBhbiBhcnJheSwgdGhlbiBpdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYW4gYXJyYXlcclxuICAgICAqIG9mIGRlcGVuZGVuY3kgc3RyaW5nIG5hbWVzIHRvIGZldGNoLiBBbiBvcHRpb25hbCBmdW5jdGlvbiBjYWxsYmFjayBjYW5cclxuICAgICAqIGJlIHNwZWNpZmllZCB0byBleGVjdXRlIHdoZW4gYWxsIG9mIHRob3NlIGRlcGVuZGVuY2llcyBhcmUgYXZhaWxhYmxlLlxyXG4gICAgICpcclxuICAgICAqIE1ha2UgYSBsb2NhbCByZXEgdmFyaWFibGUgdG8gaGVscCBDYWphIGNvbXBsaWFuY2UgKGl0IGFzc3VtZXMgdGhpbmdzXHJcbiAgICAgKiBvbiBhIHJlcXVpcmUgdGhhdCBhcmUgbm90IHN0YW5kYXJkaXplZCksIGFuZCB0byBnaXZlIGEgc2hvcnRcclxuICAgICAqIG5hbWUgZm9yIG1pbmlmaWNhdGlvbi9sb2NhbCBzY29wZSB1c2UuXHJcbiAgICAgKi9cclxuICAgIHJlcSA9IHJlcXVpcmVqcyA9IGZ1bmN0aW9uIChkZXBzLCBjYWxsYmFjaywgZXJyYmFjaywgb3B0aW9uYWwpIHtcclxuXHJcbiAgICAgICAgLy9GaW5kIHRoZSByaWdodCBjb250ZXh0LCB1c2UgZGVmYXVsdFxyXG4gICAgICAgIHZhciBjb250ZXh0LCBjb25maWcsXHJcbiAgICAgICAgICAgIGNvbnRleHROYW1lID0gZGVmQ29udGV4dE5hbWU7XHJcblxyXG4gICAgICAgIC8vIERldGVybWluZSBpZiBoYXZlIGNvbmZpZyBvYmplY3QgaW4gdGhlIGNhbGwuXHJcbiAgICAgICAgaWYgKCFpc0FycmF5KGRlcHMpICYmIHR5cGVvZiBkZXBzICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAvLyBkZXBzIGlzIGEgY29uZmlnIG9iamVjdFxyXG4gICAgICAgICAgICBjb25maWcgPSBkZXBzO1xyXG4gICAgICAgICAgICBpZiAoaXNBcnJheShjYWxsYmFjaykpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFkanVzdCBhcmdzIGlmIHRoZXJlIGFyZSBkZXBlbmRlbmNpZXNcclxuICAgICAgICAgICAgICAgIGRlcHMgPSBjYWxsYmFjaztcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gZXJyYmFjaztcclxuICAgICAgICAgICAgICAgIGVycmJhY2sgPSBvcHRpb25hbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlcHMgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKGNvbmZpZyAmJiBjb25maWcuY29udGV4dCkge1xyXG4gICAgICAgICAgICBjb250ZXh0TmFtZSA9IGNvbmZpZy5jb250ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29udGV4dCA9IGdldE93bihjb250ZXh0cywgY29udGV4dE5hbWUpO1xyXG4gICAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICAgICBjb250ZXh0ID0gY29udGV4dHNbY29udGV4dE5hbWVdID0gcmVxLnMubmV3Q29udGV4dChjb250ZXh0TmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29uZmlnKSB7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY29uZmlndXJlKGNvbmZpZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGV4dC5yZXF1aXJlKGRlcHMsIGNhbGxiYWNrLCBlcnJiYWNrKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTdXBwb3J0IHJlcXVpcmUuY29uZmlnKCkgdG8gbWFrZSBpdCBlYXNpZXIgdG8gY29vcGVyYXRlIHdpdGggb3RoZXJcclxuICAgICAqIEFNRCBsb2FkZXJzIG9uIGdsb2JhbGx5IGFncmVlZCBuYW1lcy5cclxuICAgICAqL1xyXG4gICAgcmVxLmNvbmZpZyA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICByZXR1cm4gcmVxKGNvbmZpZyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZSBzb21ldGhpbmcgYWZ0ZXIgdGhlIGN1cnJlbnQgdGlja1xyXG4gICAgICogb2YgdGhlIGV2ZW50IGxvb3AuIE92ZXJyaWRlIGZvciBvdGhlciBlbnZzXHJcbiAgICAgKiB0aGF0IGhhdmUgYSBiZXR0ZXIgc29sdXRpb24gdGhhbiBzZXRUaW1lb3V0LlxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGZuIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgbGF0ZXIuXHJcbiAgICAgKi9cclxuICAgIHJlcS5uZXh0VGljayA9IHR5cGVvZiBzZXRUaW1lb3V0ICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uIChmbikge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZm4sIDQpO1xyXG4gICAgfSA6IGZ1bmN0aW9uIChmbikgeyBmbigpOyB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhwb3J0IHJlcXVpcmUgYXMgYSBnbG9iYWwsIGJ1dCBvbmx5IGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3QuXHJcbiAgICAgKi9cclxuICAgIGlmICghcmVxdWlyZSkge1xyXG4gICAgICAgIHJlcXVpcmUgPSByZXE7XHJcbiAgICB9XHJcblxyXG4gICAgcmVxLnZlcnNpb24gPSB2ZXJzaW9uO1xyXG5cclxuICAgIC8vVXNlZCB0byBmaWx0ZXIgb3V0IGRlcGVuZGVuY2llcyB0aGF0IGFyZSBhbHJlYWR5IHBhdGhzLlxyXG4gICAgcmVxLmpzRXh0UmVnRXhwID0gL15cXC98OnxcXD98XFwuanMkLztcclxuICAgIHJlcS5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XHJcbiAgICBzID0gcmVxLnMgPSB7XHJcbiAgICAgICAgY29udGV4dHM6IGNvbnRleHRzLFxyXG4gICAgICAgIG5ld0NvbnRleHQ6IG5ld0NvbnRleHRcclxuICAgIH07XHJcblxyXG4gICAgLy9DcmVhdGUgZGVmYXVsdCBjb250ZXh0LlxyXG4gICAgcmVxKHt9KTtcclxuXHJcbiAgICAvL0V4cG9ydHMgc29tZSBjb250ZXh0LXNlbnNpdGl2ZSBtZXRob2RzIG9uIGdsb2JhbCByZXF1aXJlLlxyXG4gICAgZWFjaChbXHJcbiAgICAgICAgJ3RvVXJsJyxcclxuICAgICAgICAndW5kZWYnLFxyXG4gICAgICAgICdkZWZpbmVkJyxcclxuICAgICAgICAnc3BlY2lmaWVkJ1xyXG4gICAgXSwgZnVuY3Rpb24gKHByb3ApIHtcclxuICAgICAgICAvL1JlZmVyZW5jZSBmcm9tIGNvbnRleHRzIGluc3RlYWQgb2YgZWFybHkgYmluZGluZyB0byBkZWZhdWx0IGNvbnRleHQsXHJcbiAgICAgICAgLy9zbyB0aGF0IGR1cmluZyBidWlsZHMsIHRoZSBsYXRlc3QgaW5zdGFuY2Ugb2YgdGhlIGRlZmF1bHQgY29udGV4dFxyXG4gICAgICAgIC8vd2l0aCBpdHMgY29uZmlnIGdldHMgdXNlZC5cclxuICAgICAgICByZXFbcHJvcF0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdHggPSBjb250ZXh0c1tkZWZDb250ZXh0TmFtZV07XHJcbiAgICAgICAgICAgIHJldHVybiBjdHgucmVxdWlyZVtwcm9wXS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICBoZWFkID0gcy5oZWFkID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXTtcclxuICAgICAgICAvL0lmIEJBU0UgdGFnIGlzIGluIHBsYXksIHVzaW5nIGFwcGVuZENoaWxkIGlzIGEgcHJvYmxlbSBmb3IgSUU2LlxyXG4gICAgICAgIC8vV2hlbiB0aGF0IGJyb3dzZXIgZGllcywgdGhpcyBjYW4gYmUgcmVtb3ZlZC4gRGV0YWlscyBpbiB0aGlzIGpRdWVyeSBidWc6XHJcbiAgICAgICAgLy9odHRwOi8vZGV2LmpxdWVyeS5jb20vdGlja2V0LzI3MDlcclxuICAgICAgICBiYXNlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdiYXNlJylbMF07XHJcbiAgICAgICAgaWYgKGJhc2VFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGhlYWQgPSBzLmhlYWQgPSBiYXNlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFueSBlcnJvcnMgdGhhdCByZXF1aXJlIGV4cGxpY2l0bHkgZ2VuZXJhdGVzIHdpbGwgYmUgcGFzc2VkIHRvIHRoaXNcclxuICAgICAqIGZ1bmN0aW9uLiBJbnRlcmNlcHQvb3ZlcnJpZGUgaXQgaWYgeW91IHdhbnQgY3VzdG9tIGVycm9yIGhhbmRsaW5nLlxyXG4gICAgICogQHBhcmFtIHtFcnJvcn0gZXJyIHRoZSBlcnJvciBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHJlcS5vbkVycm9yID0gZGVmYXVsdE9uRXJyb3I7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIHRoZSBub2RlIGZvciB0aGUgbG9hZCBjb21tYW5kLiBPbmx5IHVzZWQgaW4gYnJvd3NlciBlbnZzLlxyXG4gICAgICovXHJcbiAgICByZXEuY3JlYXRlTm9kZSA9IGZ1bmN0aW9uIChjb25maWcsIG1vZHVsZU5hbWUsIHVybCkge1xyXG4gICAgICAgIHZhciBub2RlID0gY29uZmlnLnhodG1sID9cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbCcsICdodG1sOnNjcmlwdCcpIDpcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gICAgICAgIG5vZGUudHlwZSA9IGNvbmZpZy5zY3JpcHRUeXBlIHx8ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIG5vZGUuY2hhcnNldCA9ICd1dGYtOCc7XHJcbiAgICAgICAgbm9kZS5hc3luYyA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRG9lcyB0aGUgcmVxdWVzdCB0byBsb2FkIGEgbW9kdWxlIGZvciB0aGUgYnJvd3NlciBjYXNlLlxyXG4gICAgICogTWFrZSB0aGlzIGEgc2VwYXJhdGUgZnVuY3Rpb24gdG8gYWxsb3cgb3RoZXIgZW52aXJvbm1lbnRzXHJcbiAgICAgKiB0byBvdmVycmlkZSBpdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dCB0aGUgcmVxdWlyZSBjb250ZXh0IHRvIGZpbmQgc3RhdGUuXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kdWxlTmFtZSB0aGUgbmFtZSBvZiB0aGUgbW9kdWxlLlxyXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHVybCB0aGUgVVJMIHRvIHRoZSBtb2R1bGUuXHJcbiAgICAgKi9cclxuICAgIHJlcS5sb2FkID0gZnVuY3Rpb24gKGNvbnRleHQsIG1vZHVsZU5hbWUsIHVybCkge1xyXG4gICAgICAgIHZhciBjb25maWcgPSAoY29udGV4dCAmJiBjb250ZXh0LmNvbmZpZykgfHwge30sXHJcbiAgICAgICAgICAgIG5vZGU7XHJcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAvL0luIHRoZSBicm93c2VyIHNvIHVzZSBhIHNjcmlwdCB0YWdcclxuICAgICAgICAgICAgbm9kZSA9IHJlcS5jcmVhdGVOb2RlKGNvbmZpZywgbW9kdWxlTmFtZSwgdXJsKTtcclxuXHJcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVjb250ZXh0JywgY29udGV4dC5jb250ZXh0TmFtZSk7XHJcbiAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnLCBtb2R1bGVOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIC8vU2V0IHVwIGxvYWQgbGlzdGVuZXIuIFRlc3QgYXR0YWNoRXZlbnQgZmlyc3QgYmVjYXVzZSBJRTkgaGFzXHJcbiAgICAgICAgICAgIC8vYSBzdWJ0bGUgaXNzdWUgaW4gaXRzIGFkZEV2ZW50TGlzdGVuZXIgYW5kIHNjcmlwdCBvbmxvYWQgZmlyaW5nc1xyXG4gICAgICAgICAgICAvL3RoYXQgZG8gbm90IG1hdGNoIHRoZSBiZWhhdmlvciBvZiBhbGwgb3RoZXIgYnJvd3NlcnMgd2l0aFxyXG4gICAgICAgICAgICAvL2FkZEV2ZW50TGlzdGVuZXIgc3VwcG9ydCwgd2hpY2ggZmlyZSB0aGUgb25sb2FkIGV2ZW50IGZvciBhXHJcbiAgICAgICAgICAgIC8vc2NyaXB0IHJpZ2h0IGFmdGVyIHRoZSBzY3JpcHQgZXhlY3V0aW9uLiBTZWU6XHJcbiAgICAgICAgICAgIC8vaHR0cHM6Ly9jb25uZWN0Lm1pY3Jvc29mdC5jb20vSUUvZmVlZGJhY2svZGV0YWlscy82NDgwNTcvc2NyaXB0LW9ubG9hZC1ldmVudC1pcy1ub3QtZmlyZWQtaW1tZWRpYXRlbHktYWZ0ZXItc2NyaXB0LWV4ZWN1dGlvblxyXG4gICAgICAgICAgICAvL1VORk9SVFVOQVRFTFkgT3BlcmEgaW1wbGVtZW50cyBhdHRhY2hFdmVudCBidXQgZG9lcyBub3QgZm9sbG93IHRoZSBzY3JpcHRcclxuICAgICAgICAgICAgLy9zY3JpcHQgZXhlY3V0aW9uIG1vZGUuXHJcbiAgICAgICAgICAgIGlmIChub2RlLmF0dGFjaEV2ZW50ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgLy9DaGVjayBpZiBub2RlLmF0dGFjaEV2ZW50IGlzIGFydGlmaWNpYWxseSBhZGRlZCBieSBjdXN0b20gc2NyaXB0IG9yXHJcbiAgICAgICAgICAgICAgICAgICAgLy9uYXRpdmVseSBzdXBwb3J0ZWQgYnkgYnJvd3NlclxyXG4gICAgICAgICAgICAgICAgICAgIC8vcmVhZCBodHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9pc3N1ZXMvMTg3XHJcbiAgICAgICAgICAgICAgICAgICAgLy9pZiB3ZSBjYW4gTk9UIGZpbmQgW25hdGl2ZSBjb2RlXSB0aGVuIGl0IG11c3QgTk9UIG5hdGl2ZWx5IHN1cHBvcnRlZC5cclxuICAgICAgICAgICAgICAgICAgICAvL2luIElFOCwgbm9kZS5hdHRhY2hFdmVudCBkb2VzIG5vdCBoYXZlIHRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAvL05vdGUgdGhlIHRlc3QgZm9yIFwiW25hdGl2ZSBjb2RlXCIgd2l0aCBubyBjbG9zaW5nIGJyYWNlLCBzZWU6XHJcbiAgICAgICAgICAgICAgICAgICAgLy9odHRwczovL2dpdGh1Yi5jb20vcmVxdWlyZWpzL3JlcXVpcmVqcy9pc3N1ZXMvMjczXHJcbiAgICAgICAgICAgICAgICAgICAgIShub2RlLmF0dGFjaEV2ZW50LnRvU3RyaW5nICYmIG5vZGUuYXR0YWNoRXZlbnQudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSA8IDApICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIWlzT3BlcmEpIHtcclxuICAgICAgICAgICAgICAgIC8vUHJvYmFibHkgSUUuIElFIChhdCBsZWFzdCA2LTgpIGRvIG5vdCBmaXJlXHJcbiAgICAgICAgICAgICAgICAvL3NjcmlwdCBvbmxvYWQgcmlnaHQgYWZ0ZXIgZXhlY3V0aW5nIHRoZSBzY3JpcHQsIHNvXHJcbiAgICAgICAgICAgICAgICAvL3dlIGNhbm5vdCB0aWUgdGhlIGFub255bW91cyBkZWZpbmUgY2FsbCB0byBhIG5hbWUuXHJcbiAgICAgICAgICAgICAgICAvL0hvd2V2ZXIsIElFIHJlcG9ydHMgdGhlIHNjcmlwdCBhcyBiZWluZyBpbiAnaW50ZXJhY3RpdmUnXHJcbiAgICAgICAgICAgICAgICAvL3JlYWR5U3RhdGUgYXQgdGhlIHRpbWUgb2YgdGhlIGRlZmluZSBjYWxsLlxyXG4gICAgICAgICAgICAgICAgdXNlSW50ZXJhY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vZGUuYXR0YWNoRXZlbnQoJ29ucmVhZHlzdGF0ZWNoYW5nZScsIGNvbnRleHQub25TY3JpcHRMb2FkKTtcclxuICAgICAgICAgICAgICAgIC8vSXQgd291bGQgYmUgZ3JlYXQgdG8gYWRkIGFuIGVycm9yIGhhbmRsZXIgaGVyZSB0byBjYXRjaFxyXG4gICAgICAgICAgICAgICAgLy80MDRzIGluIElFOSsuIEhvd2V2ZXIsIG9ucmVhZHlzdGF0ZWNoYW5nZSB3aWxsIGZpcmUgYmVmb3JlXHJcbiAgICAgICAgICAgICAgICAvL3RoZSBlcnJvciBoYW5kbGVyLCBzbyB0aGF0IGRvZXMgbm90IGhlbHAuIElmIGFkZEV2ZW50TGlzdGVuZXJcclxuICAgICAgICAgICAgICAgIC8vaXMgdXNlZCwgdGhlbiBJRSB3aWxsIGZpcmUgZXJyb3IgYmVmb3JlIGxvYWQsIGJ1dCB3ZSBjYW5ub3RcclxuICAgICAgICAgICAgICAgIC8vdXNlIHRoYXQgcGF0aHdheSBnaXZlbiB0aGUgY29ubmVjdC5taWNyb3NvZnQuY29tIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAvL21lbnRpb25lZCBhYm92ZSBhYm91dCBub3QgZG9pbmcgdGhlICdzY3JpcHQgZXhlY3V0ZSxcclxuICAgICAgICAgICAgICAgIC8vdGhlbiBmaXJlIHRoZSBzY3JpcHQgbG9hZCBldmVudCBsaXN0ZW5lciBiZWZvcmUgZXhlY3V0ZVxyXG4gICAgICAgICAgICAgICAgLy9uZXh0IHNjcmlwdCcgdGhhdCBvdGhlciBicm93c2VycyBkby5cclxuICAgICAgICAgICAgICAgIC8vQmVzdCBob3BlOiBJRTEwIGZpeGVzIHRoZSBpc3N1ZXMsXHJcbiAgICAgICAgICAgICAgICAvL2FuZCB0aGVuIGRlc3Ryb3lzIGFsbCBpbnN0YWxscyBvZiBJRSA2LTkuXHJcbiAgICAgICAgICAgICAgICAvL25vZGUuYXR0YWNoRXZlbnQoJ29uZXJyb3InLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgY29udGV4dC5vblNjcmlwdExvYWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBjb250ZXh0Lm9uU2NyaXB0RXJyb3IsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBub2RlLnNyYyA9IHVybDtcclxuXHJcbiAgICAgICAgICAgIC8vQ2FsbGluZyBvbk5vZGVDcmVhdGVkIGFmdGVyIGFsbCBwcm9wZXJ0aWVzIG9uIHRoZSBub2RlIGhhdmUgYmVlblxyXG4gICAgICAgICAgICAvL3NldCwgYnV0IGJlZm9yZSBpdCBpcyBwbGFjZWQgaW4gdGhlIERPTS5cclxuICAgICAgICAgICAgaWYgKGNvbmZpZy5vbk5vZGVDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25maWcub25Ob2RlQ3JlYXRlZChub2RlLCBjb25maWcsIG1vZHVsZU5hbWUsIHVybCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vRm9yIHNvbWUgY2FjaGUgY2FzZXMgaW4gSUUgNi04LCB0aGUgc2NyaXB0IGV4ZWN1dGVzIGJlZm9yZSB0aGUgZW5kXHJcbiAgICAgICAgICAgIC8vb2YgdGhlIGFwcGVuZENoaWxkIGV4ZWN1dGlvbiwgc28gdG8gdGllIGFuIGFub255bW91cyBkZWZpbmVcclxuICAgICAgICAgICAgLy9jYWxsIHRvIHRoZSBtb2R1bGUgbmFtZSAod2hpY2ggaXMgc3RvcmVkIG9uIHRoZSBub2RlKSwgaG9sZCBvblxyXG4gICAgICAgICAgICAvL3RvIGEgcmVmZXJlbmNlIHRvIHRoaXMgbm9kZSwgYnV0IGNsZWFyIGFmdGVyIHRoZSBET00gaW5zZXJ0aW9uLlxyXG4gICAgICAgICAgICBjdXJyZW50bHlBZGRpbmdTY3JpcHQgPSBub2RlO1xyXG4gICAgICAgICAgICBpZiAoYmFzZUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIGhlYWQuaW5zZXJ0QmVmb3JlKG5vZGUsIGJhc2VFbGVtZW50KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGhlYWQuYXBwZW5kQ2hpbGQobm9kZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudGx5QWRkaW5nU2NyaXB0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNXZWJXb3JrZXIpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vSW4gYSB3ZWIgd29ya2VyLCB1c2UgaW1wb3J0U2NyaXB0cy4gVGhpcyBpcyBub3QgYSB2ZXJ5XHJcbiAgICAgICAgICAgICAgICAvL2VmZmljaWVudCB1c2Ugb2YgaW1wb3J0U2NyaXB0cywgaW1wb3J0U2NyaXB0cyB3aWxsIGJsb2NrIHVudGlsXHJcbiAgICAgICAgICAgICAgICAvL2l0cyBzY3JpcHQgaXMgZG93bmxvYWRlZCBhbmQgZXZhbHVhdGVkLiBIb3dldmVyLCBpZiB3ZWIgd29ya2Vyc1xyXG4gICAgICAgICAgICAgICAgLy9hcmUgaW4gcGxheSwgdGhlIGV4cGVjdGF0aW9uIGlzIHRoYXQgYSBidWlsZCBoYXMgYmVlbiBkb25lIHNvXHJcbiAgICAgICAgICAgICAgICAvL3RoYXQgb25seSBvbmUgc2NyaXB0IG5lZWRzIHRvIGJlIGxvYWRlZCBhbnl3YXkuIFRoaXMgbWF5IG5lZWRcclxuICAgICAgICAgICAgICAgIC8vdG8gYmUgcmVldmFsdWF0ZWQgaWYgb3RoZXIgdXNlIGNhc2VzIGJlY29tZSBjb21tb24uXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUG9zdCBhIHRhc2sgdG8gdGhlIGV2ZW50IGxvb3AgdG8gd29yayBhcm91bmQgYSBidWcgaW4gV2ViS2l0XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVyZSB0aGUgd29ya2VyIGdldHMgZ2FyYmFnZS1jb2xsZWN0ZWQgYWZ0ZXIgY2FsbGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gaW1wb3J0U2NyaXB0cygpOiBodHRwczovL3dlYmtpdC5vcmcvYi8xNTMzMTdcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7fSwgMCk7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnRTY3JpcHRzKHVybCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9BY2NvdW50IGZvciBhbm9ueW1vdXMgbW9kdWxlc1xyXG4gICAgICAgICAgICAgICAgY29udGV4dC5jb21wbGV0ZUxvYWQobW9kdWxlTmFtZSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQub25FcnJvcihtYWtlRXJyb3IoJ2ltcG9ydHNjcmlwdHMnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdpbXBvcnRTY3JpcHRzIGZhaWxlZCBmb3IgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZHVsZU5hbWUgKyAnIGF0ICcgKyB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbW9kdWxlTmFtZV0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SW50ZXJhY3RpdmVTY3JpcHQoKSB7XHJcbiAgICAgICAgaWYgKGludGVyYWN0aXZlU2NyaXB0ICYmIGludGVyYWN0aXZlU2NyaXB0LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVyYWN0aXZlU2NyaXB0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZWFjaFJldmVyc2Uoc2NyaXB0cygpLCBmdW5jdGlvbiAoc2NyaXB0KSB7XHJcbiAgICAgICAgICAgIGlmIChzY3JpcHQucmVhZHlTdGF0ZSA9PT0gJ2ludGVyYWN0aXZlJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIChpbnRlcmFjdGl2ZVNjcmlwdCA9IHNjcmlwdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gaW50ZXJhY3RpdmVTY3JpcHQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9Mb29rIGZvciBhIGRhdGEtbWFpbiBzY3JpcHQgYXR0cmlidXRlLCB3aGljaCBjb3VsZCBhbHNvIGFkanVzdCB0aGUgYmFzZVVybC5cclxuICAgIGlmIChpc0Jyb3dzZXIgJiYgIWNmZy5za2lwRGF0YU1haW4pIHtcclxuICAgICAgICAvL0ZpZ3VyZSBvdXQgYmFzZVVybC4gR2V0IGl0IGZyb20gdGhlIHNjcmlwdCB0YWcgd2l0aCByZXF1aXJlLmpzIGluIGl0LlxyXG4gICAgICAgIGVhY2hSZXZlcnNlKHNjcmlwdHMoKSwgZnVuY3Rpb24gKHNjcmlwdCkge1xyXG4gICAgICAgICAgICAvL1NldCB0aGUgJ2hlYWQnIHdoZXJlIHdlIGNhbiBhcHBlbmQgY2hpbGRyZW4gYnlcclxuICAgICAgICAgICAgLy91c2luZyB0aGUgc2NyaXB0J3MgcGFyZW50LlxyXG4gICAgICAgICAgICBpZiAoIWhlYWQpIHtcclxuICAgICAgICAgICAgICAgIGhlYWQgPSBzY3JpcHQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9Mb29rIGZvciBhIGRhdGEtbWFpbiBhdHRyaWJ1dGUgdG8gc2V0IG1haW4gc2NyaXB0IGZvciB0aGUgcGFnZVxyXG4gICAgICAgICAgICAvL3RvIGxvYWQuIElmIGl0IGlzIHRoZXJlLCB0aGUgcGF0aCB0byBkYXRhIG1haW4gYmVjb21lcyB0aGVcclxuICAgICAgICAgICAgLy9iYXNlVXJsLCBpZiBpdCBpcyBub3QgYWxyZWFkeSBzZXQuXHJcbiAgICAgICAgICAgIGRhdGFNYWluID0gc2NyaXB0LmdldEF0dHJpYnV0ZSgnZGF0YS1tYWluJyk7XHJcbiAgICAgICAgICAgIGlmIChkYXRhTWFpbikge1xyXG4gICAgICAgICAgICAgICAgLy9QcmVzZXJ2ZSBkYXRhTWFpbiBpbiBjYXNlIGl0IGlzIGEgcGF0aCAoaS5lLiBjb250YWlucyAnPycpXHJcbiAgICAgICAgICAgICAgICBtYWluU2NyaXB0ID0gZGF0YU1haW47XHJcblxyXG4gICAgICAgICAgICAgICAgLy9TZXQgZmluYWwgYmFzZVVybCBpZiB0aGVyZSBpcyBub3QgYWxyZWFkeSBhbiBleHBsaWNpdCBvbmUsXHJcbiAgICAgICAgICAgICAgICAvL2J1dCBvbmx5IGRvIHNvIGlmIHRoZSBkYXRhLW1haW4gdmFsdWUgaXMgbm90IGEgbG9hZGVyIHBsdWdpblxyXG4gICAgICAgICAgICAgICAgLy9tb2R1bGUgSUQuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWNmZy5iYXNlVXJsICYmIG1haW5TY3JpcHQuaW5kZXhPZignIScpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vUHVsbCBvZmYgdGhlIGRpcmVjdG9yeSBvZiBkYXRhLW1haW4gZm9yIHVzZSBhcyB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvL2Jhc2VVcmwuXHJcbiAgICAgICAgICAgICAgICAgICAgc3JjID0gbWFpblNjcmlwdC5zcGxpdCgnLycpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBzcmMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3ViUGF0aCA9IHNyYy5sZW5ndGggPyBzcmMuam9pbignLycpICArICcvJyA6ICcuLyc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNmZy5iYXNlVXJsID0gc3ViUGF0aDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1N0cmlwIG9mZiBhbnkgdHJhaWxpbmcgLmpzIHNpbmNlIG1haW5TY3JpcHQgaXMgbm93XHJcbiAgICAgICAgICAgICAgICAvL2xpa2UgYSBtb2R1bGUgbmFtZS5cclxuICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBtYWluU2NyaXB0LnJlcGxhY2UoanNTdWZmaXhSZWdFeHAsICcnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL0lmIG1haW5TY3JpcHQgaXMgc3RpbGwgYSBwYXRoLCBmYWxsIGJhY2sgdG8gZGF0YU1haW5cclxuICAgICAgICAgICAgICAgIGlmIChyZXEuanNFeHRSZWdFeHAudGVzdChtYWluU2NyaXB0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG1haW5TY3JpcHQgPSBkYXRhTWFpbjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1B1dCB0aGUgZGF0YS1tYWluIHNjcmlwdCBpbiB0aGUgZmlsZXMgdG8gbG9hZC5cclxuICAgICAgICAgICAgICAgIGNmZy5kZXBzID0gY2ZnLmRlcHMgPyBjZmcuZGVwcy5jb25jYXQobWFpblNjcmlwdCkgOiBbbWFpblNjcmlwdF07XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbiB0aGF0IGhhbmRsZXMgZGVmaW5pdGlvbnMgb2YgbW9kdWxlcy4gRGlmZmVycyBmcm9tXHJcbiAgICAgKiByZXF1aXJlKCkgaW4gdGhhdCBhIHN0cmluZyBmb3IgdGhlIG1vZHVsZSBzaG91bGQgYmUgdGhlIGZpcnN0IGFyZ3VtZW50LFxyXG4gICAgICogYW5kIHRoZSBmdW5jdGlvbiB0byBleGVjdXRlIGFmdGVyIGRlcGVuZGVuY2llcyBhcmUgbG9hZGVkIHNob3VsZFxyXG4gICAgICogcmV0dXJuIGEgdmFsdWUgdG8gZGVmaW5lIHRoZSBtb2R1bGUgY29ycmVzcG9uZGluZyB0byB0aGUgZmlyc3QgYXJndW1lbnQnc1xyXG4gICAgICogbmFtZS5cclxuICAgICAqL1xyXG4gICAgZGVmaW5lID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdmFyIG5vZGUsIGNvbnRleHQ7XHJcblxyXG4gICAgICAgIC8vQWxsb3cgZm9yIGFub255bW91cyBtb2R1bGVzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAvL0FkanVzdCBhcmdzIGFwcHJvcHJpYXRlbHlcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xyXG4gICAgICAgICAgICBkZXBzID0gbmFtZTtcclxuICAgICAgICAgICAgbmFtZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXNcclxuICAgICAgICBpZiAoIWlzQXJyYXkoZGVwcykpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xyXG4gICAgICAgICAgICBkZXBzID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vSWYgbm8gbmFtZSwgYW5kIGNhbGxiYWNrIGlzIGEgZnVuY3Rpb24sIHRoZW4gZmlndXJlIG91dCBpZiBpdCBhXHJcbiAgICAgICAgLy9Db21tb25KUyB0aGluZyB3aXRoIGRlcGVuZGVuY2llcy5cclxuICAgICAgICBpZiAoIWRlcHMgJiYgaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcclxuICAgICAgICAgICAgZGVwcyA9IFtdO1xyXG4gICAgICAgICAgICAvL1JlbW92ZSBjb21tZW50cyBmcm9tIHRoZSBjYWxsYmFjayBzdHJpbmcsXHJcbiAgICAgICAgICAgIC8vbG9vayBmb3IgcmVxdWlyZSBjYWxscywgYW5kIHB1bGwgdGhlbSBpbnRvIHRoZSBkZXBlbmRlbmNpZXMsXHJcbiAgICAgICAgICAgIC8vYnV0IG9ubHkgaWYgdGhlcmUgYXJlIGZ1bmN0aW9uIGFyZ3MuXHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvU3RyaW5nKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjb21tZW50UmVnRXhwLCBjb21tZW50UmVwbGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShjanNSZXF1aXJlUmVnRXhwLCBmdW5jdGlvbiAobWF0Y2gsIGRlcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXBzLnB1c2goZGVwKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL01heSBiZSBhIENvbW1vbkpTIHRoaW5nIGV2ZW4gd2l0aG91dCByZXF1aXJlIGNhbGxzLCBidXQgc3RpbGxcclxuICAgICAgICAgICAgICAgIC8vY291bGQgdXNlIGV4cG9ydHMsIGFuZCBtb2R1bGUuIEF2b2lkIGRvaW5nIGV4cG9ydHMgYW5kIG1vZHVsZVxyXG4gICAgICAgICAgICAgICAgLy93b3JrIHRob3VnaCBpZiBpdCBqdXN0IG5lZWRzIHJlcXVpcmUuXHJcbiAgICAgICAgICAgICAgICAvL1JFUVVJUkVTIHRoZSBmdW5jdGlvbiB0byBleHBlY3QgdGhlIENvbW1vbkpTIHZhcmlhYmxlcyBpbiB0aGVcclxuICAgICAgICAgICAgICAgIC8vb3JkZXIgbGlzdGVkIGJlbG93LlxyXG4gICAgICAgICAgICAgICAgZGVwcyA9IChjYWxsYmFjay5sZW5ndGggPT09IDEgPyBbJ3JlcXVpcmUnXSA6IFsncmVxdWlyZScsICdleHBvcnRzJywgJ21vZHVsZSddKS5jb25jYXQoZGVwcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vSWYgaW4gSUUgNi04IGFuZCBoaXQgYW4gYW5vbnltb3VzIGRlZmluZSgpIGNhbGwsIGRvIHRoZSBpbnRlcmFjdGl2ZVxyXG4gICAgICAgIC8vd29yay5cclxuICAgICAgICBpZiAodXNlSW50ZXJhY3RpdmUpIHtcclxuICAgICAgICAgICAgbm9kZSA9IGN1cnJlbnRseUFkZGluZ1NjcmlwdCB8fCBnZXRJbnRlcmFjdGl2ZVNjcmlwdCgpO1xyXG4gICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IG5vZGUuZ2V0QXR0cmlidXRlKCdkYXRhLXJlcXVpcmVtb2R1bGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRleHQgPSBjb250ZXh0c1tub2RlLmdldEF0dHJpYnV0ZSgnZGF0YS1yZXF1aXJlY29udGV4dCcpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9BbHdheXMgc2F2ZSBvZmYgZXZhbHVhdGluZyB0aGUgZGVmIGNhbGwgdW50aWwgdGhlIHNjcmlwdCBvbmxvYWQgaGFuZGxlci5cclxuICAgICAgICAvL1RoaXMgYWxsb3dzIG11bHRpcGxlIG1vZHVsZXMgdG8gYmUgaW4gYSBmaWxlIHdpdGhvdXQgcHJlbWF0dXJlbHlcclxuICAgICAgICAvL3RyYWNpbmcgZGVwZW5kZW5jaWVzLCBhbmQgYWxsb3dzIGZvciBhbm9ueW1vdXMgbW9kdWxlIHN1cHBvcnQsXHJcbiAgICAgICAgLy93aGVyZSB0aGUgbW9kdWxlIG5hbWUgaXMgbm90IGtub3duIHVudGlsIHRoZSBzY3JpcHQgb25sb2FkIGV2ZW50XHJcbiAgICAgICAgLy9vY2N1cnMuIElmIG5vIGNvbnRleHQsIHVzZSB0aGUgZ2xvYmFsIHF1ZXVlLCBhbmQgZ2V0IGl0IHByb2Nlc3NlZFxyXG4gICAgICAgIC8vaW4gdGhlIG9uc2NyaXB0IGxvYWQgY2FsbGJhY2suXHJcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgY29udGV4dC5kZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pO1xyXG4gICAgICAgICAgICBjb250ZXh0LmRlZlF1ZXVlTWFwW25hbWVdID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnbG9iYWxEZWZRdWV1ZS5wdXNoKFtuYW1lLCBkZXBzLCBjYWxsYmFja10pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZGVmaW5lLmFtZCA9IHtcclxuICAgICAgICBqUXVlcnk6IHRydWVcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGVjdXRlcyB0aGUgdGV4dC4gTm9ybWFsbHkganVzdCB1c2VzIGV2YWwsIGJ1dCBjYW4gYmUgbW9kaWZpZWRcclxuICAgICAqIHRvIHVzZSBhIGJldHRlciwgZW52aXJvbm1lbnQtc3BlY2lmaWMgY2FsbC4gT25seSB1c2VkIGZvciB0cmFuc3BpbGluZ1xyXG4gICAgICogbG9hZGVyIHBsdWdpbnMsIG5vdCBmb3IgcGxhaW4gSlMgbW9kdWxlcy5cclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSB0ZXh0IHRvIGV4ZWN1dGUvZXZhbHVhdGUuXHJcbiAgICAgKi9cclxuICAgIHJlcS5leGVjID0gZnVuY3Rpb24gKHRleHQpIHtcclxuICAgICAgICAvKmpzbGludCBldmlsOiB0cnVlICovXHJcbiAgICAgICAgcmV0dXJuIGV2YWwodGV4dCk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vU2V0IHVwIHdpdGggY29uZmlnIGluZm8uXHJcbiAgICByZXEoY2ZnKTtcclxufSh0aGlzLCBzZXRUaW1lb3V0KSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
